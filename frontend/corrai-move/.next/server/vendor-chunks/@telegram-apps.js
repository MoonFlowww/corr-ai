"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps";
exports.ids = ["vendor-chunks/@telegram-apps"];
exports.modules = {

/***/ "(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@telegram-apps/bridge/dist/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ re),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ ne),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ He),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Je),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ Be),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ge),\n/* harmony export */   EnhancedPromise: () => (/* binding */ S),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ te),\n/* harmony export */   camelToKebab: () => (/* binding */ ct),\n/* harmony export */   camelToSnake: () => (/* binding */ it),\n/* harmony export */   captureSameReq: () => (/* binding */ et),\n/* harmony export */   compareVersions: () => (/* binding */ tt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ k),\n/* harmony export */   createLogger: () => (/* binding */ ke),\n/* harmony export */   createPostEvent: () => (/* binding */ dt),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ L),\n/* harmony export */   defineEventHandlers: () => (/* binding */ bt),\n/* harmony export */   deleteCssVar: () => (/* binding */ ft),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ x),\n/* harmony export */   getStorageValue: () => (/* binding */ xe),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ Q),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Et),\n/* harmony export */   isAbortError: () => (/* binding */ ot),\n/* harmony export */   isCanceledError: () => (/* binding */ st),\n/* harmony export */   isIframe: () => (/* binding */ Ne),\n/* harmony export */   isTMA: () => (/* binding */ _t),\n/* harmony export */   isTimeoutError: () => (/* binding */ nt),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ lt),\n/* harmony export */   off: () => (/* binding */ wt),\n/* harmony export */   on: () => (/* binding */ Fe),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ gt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ yt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Ye),\n/* harmony export */   setCssVar: () => (/* binding */ pt),\n/* harmony export */   setStorageValue: () => (/* binding */ We),\n/* harmony export */   sleep: () => (/* binding */ at),\n/* harmony export */   snakeToCamel: () => (/* binding */ ut),\n/* harmony export */   subscribe: () => (/* binding */ ht),\n/* harmony export */   supports: () => (/* binding */ H),\n/* harmony export */   unsubscribe: () => (/* binding */ mt)\n/* harmony export */ });\nclass d extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, d.prototype);\n  }\n}\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", me = \"ERR_UNEXPECTED_VALUE\", de = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const r = {};\n  for (const n in e) {\n    const o = e[n];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = n, a = o) : [s, a] = o;\n    try {\n      const c = a(t(s));\n      c !== void 0 && (r[n] = c);\n    } catch (c) {\n      throw new d(\n        K,\n        `Parser for \"${n}\" property failed${s === n ? \"\" : `. Source field: \"${s}\"`}`,\n        c\n      );\n    }\n  }\n  return r;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (r) {\n      throw new d(he, { cause: r });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new d(me);\n  return t;\n}\nfunction g(e, t) {\n  return (r) => {\n    const n = (o) => {\n      if (!(r && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new d(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      n,\n      {\n        isValid(o) {\n          try {\n            return n(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (r) => {\n    const n = Z(r);\n    return V(e, (o) => n[o]);\n  });\n}\nfunction R(e) {\n  throw new d(de, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && R(r);\n    const n = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return V(e, (o) => {\n      const s = n.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction j(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), r = P(!0), n = _(), o = _(!0), s = $(!0), a = l(j({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: n,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    j({\n      authDate: Ee(),\n      canSendAfter: r,\n      chat: l(\n        j({\n          id: t,\n          type: n,\n          title: n,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: n,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      signature: n,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let n = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      n += t[1 + o].repeat(2);\n    return n;\n  }\n  const r = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((n, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return n + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), I = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((r, [n, o]) => (r[we(n)] = t(o), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction W(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, r]) => [G(t), r])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), r = _(!0), n = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", n],\n    defaultColors: [\"tgWebAppDefaultColors\", I(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", n],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", n],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", I()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Se(e) {\n  const {\n    initDataRaw: t,\n    startParam: r,\n    showSettings: n,\n    botInline: o,\n    fullscreen: s,\n    defaultColors: a\n  } = e, c = new URLSearchParams();\n  return c.set(\"tgWebAppPlatform\", e.platform), c.set(\"tgWebAppThemeParams\", /* @__PURE__ */ W(e.themeParams)), c.set(\"tgWebAppVersion\", e.version), t && c.set(\"tgWebAppData\", t), r && c.set(\"tgWebAppStartParam\", r), typeof n == \"boolean\" && c.set(\"tgWebAppShowSettings\", n ? \"1\" : \"0\"), typeof o == \"boolean\" && c.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && c.set(\"tgWebAppFullscreen\", s ? \"1\" : \"0\"), a && c.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ W(a)), c.toString();\n}\nconst X = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Y = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction $e(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Y() })()\n});\nfunction Q(e) {\n  return Ce().isValid(e);\n}\nfunction Ne() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar De = Object.defineProperty, je = (e, t, r) => t in e ? De(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t, r) => je(e, typeof t != \"symbol\" ? t + \"\" : t, r);\nclass b extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction te(e, t, r) {\n  return e.addEventListener(t, r), () => e.removeEventListener(t, r);\n}\nfunction k(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((r) => {\n        r();\n      });\n    }\n  ];\n}\nfunction Ue(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction L(e) {\n  return (t) => Ue(t, e);\n}\nconst re = \"ERR_ABORTED\", ne = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(re, { cause: e });\n}\nconst nt = L(oe), ot = L(re), st = L(ne);\nfunction F(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s, a;\n    super((c, i) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return i(M(u.reason));\n      const [f, h] = k(), m = (E) => (...ge) => (h(), E(...ge)), T = new AbortController(), { signal: A } = T;\n      a = m((E) => {\n        T.abort(E), i(E);\n      }), s = m(c), u && f(\n        te(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const E = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(E);\n        });\n      }\n      n && n(s, a, A);\n    }), ee(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new w((n, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(n, o) : n(a);\n      } catch (a) {\n        o(a);\n      }\n    }, r);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(ne));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return F(super.then(t, r), this);\n  }\n}\nfunction J(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass S extends w {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s;\n    super((a, c, i) => {\n      s = a, n && n(a, c, i);\n    }, o), ee(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new S(\n      (n, o, s) => w.withFn(t, { abortSignal: s }).then(n, o),\n      r\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new S((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new S((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return J(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return J(super.then(t, r), this);\n  }\n}\nfunction at(e, t) {\n  return new w((r) => {\n    setTimeout(r, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction We(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction xe(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction it(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction ke(e, t) {\n  t || (t = {});\n  const {\n    textColor: r,\n    bgColor: n,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...c) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const i = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${i};background-color: lightblue;color:black`,\n      \"\",\n      `${i};${r ? `color:${r};` : \"\"}${n ? `background-color:${n}` : \"\"}`,\n      ...c\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction ft(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Le(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction y(e, t) {\n  t || (t = {});\n  const r = t.equals || Object.is;\n  let n = [], o = e;\n  const s = (u) => {\n    if (!r(o, u)) {\n      const f = o;\n      o = u, Le(i, () => {\n        [...n].forEach(([h, m]) => {\n          h(u, f), m && c(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const c = (u, f) => {\n    const h = a(f), m = n.findIndex(([T, A]) => T === u && A.once === h.once && A.signal === h.signal);\n    m >= 0 && n.splice(m, 1);\n  }, i = Object.assign(\n    function() {\n      return Oe(i), o;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return n.push([u, a(f)]), () => c(u, f);\n      },\n      unsub: c,\n      unsubAll() {\n        n = n.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return i;\n}\nconst U = [];\nfunction Oe(e) {\n  U.length && U[U.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ y(!1), [O, qe] = /* @__PURE__ */ ke(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), Ie = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Me(e) {\n  const t = window, [, r] = k(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    te(t, \"message\", (n) => {\n      if (n.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = X()(n.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, c = Ie[s];\n      try {\n        const i = c ? c()(a) : a;\n        O(\"Event received:\", i ? { eventType: s, eventData: i } : { eventType: s }), e([s, i]);\n      } catch (i) {\n        qe(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          i\n        );\n      }\n    })\n  );\n  return r;\n}\nconst C = /* @__PURE__ */ y(), N = /* @__PURE__ */ y();\nfunction ce() {\n  return N() || N.set(Me(C.set)), C;\n}\nconst v = /* @__PURE__ */ y({});\nfunction ie(e) {\n  let t = v()[e];\n  return t || (t = /* @__PURE__ */ y(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ce().sub((r) => {\n    r && r[0] === e && t.set(r[1]);\n  }), v.set({ ...v(), [e]: t })), t;\n}\nfunction Fe(e, t, r) {\n  return ie(e).sub(t, r);\n}\nconst Je = \"ERR_METHOD_UNSUPPORTED\", Be = \"ERR_RETRIEVE_LP_FAILED\", He = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ge = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ y(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const r = window;\n  if (Q(r)) {\n    r.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const n = JSON.stringify({ eventType: e, eventData: t });\n  if (Ne())\n    return r.parent.postMessage(n, ue());\n  const { external: o } = r;\n  if (l({ notify: Y() })().isValid(o)) {\n    o.notify(n);\n    return;\n  }\n  throw new b(Ge);\n}\nfunction fe(e, t, r) {\n  r || (r = {});\n  const { capture: n } = r, [o, s] = k();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((c) => {\n      o(\n        Fe(c, (i) => {\n          (!n || (Array.isArray(t) ? n({\n            event: c,\n            payload: i\n          }) : n(i))) && a(i);\n        })\n      );\n    }), (r.postEvent || pe)(e, r.params);\n  }, r).finally(s);\n}\nfunction q(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return q(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ve() {\n  return _e(window.location.href);\n}\nfunction Ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst ze = \"launchParams\";\nfunction Xe() {\n  return q(xe(ze) || \"\");\n}\nfunction le(e) {\n  We(\"launchParams\", /* @__PURE__ */ Se(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Ye() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ve,\n    // Then, try using the lower level API - window.performance.\n    Ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Xe\n  ])\n    try {\n      const r = t();\n      return le(r), r;\n    } catch (r) {\n      e.push(r);\n    }\n  throw new b(Be, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Ye(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (Q(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction x(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Qe(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: r } = X()(t);\n      r === \"web_app_request_theme\" && x(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ W(e))\n      }), r === \"web_app_request_viewport\" && x(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction lt(e) {\n  var n;\n  const t = typeof e == \"string\" ? q(e) : e;\n  le(t);\n  const r = (n = window.TelegramWebviewProxy) == null ? void 0 : n.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      Qe(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), r == null || r(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction bt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((r, n, o) => {\n      if (n === o.length - 1) {\n        t[r] = x;\n        return;\n      }\n      r in t || (t[r] = {}), t = t[r];\n    });\n  });\n}\nfunction gt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction wt(e, t, r) {\n  ie(e).unsub(t, r);\n}\nfunction ht(e, t) {\n  return ce().sub(e, t);\n}\nfunction mt(e, t) {\n  C.unsub(e, t);\n}\nfunction et(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction B(e) {\n  return e.split(\".\").map(Number);\n}\nfunction tt(e, t) {\n  const r = B(e), n = B(t), o = Math.max(r.length, n.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = r[s] || 0, c = n[s] || 0;\n    if (a !== c)\n      return a > c ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return tt(e, t) <= 0;\n}\nfunction H(e, t, r) {\n  if (typeof r == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", r);\n      if (t === \"try_browser\")\n        return p(\"7.6\", r);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", r);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", r);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", r);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    case \"web_app_request_safe_area\":\n    case \"web_app_request_content_safe_area\":\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n    case \"web_app_set_emoji_status\":\n    case \"web_app_add_to_home_screen\":\n    case \"web_app_check_home_screen\":\n    case \"web_app_request_emoji_status_access\":\n      return p(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction dt(e, t) {\n  t || (t = \"strict\");\n  const r = typeof t == \"function\" ? t : (n) => {\n    const { method: o, version: s } = n;\n    let a, c;\n    if (\"param\" in n ? (a = `Parameter \"${n.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, c = He) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, c = Je), t === \"strict\")\n      throw new b(c, a);\n    return console.warn(a);\n  };\n  return (n, o) => H(n, e) ? $e(o) && n === \"web_app_set_header_color\" && \"color\" in o && !H(n, \"color\", e) ? r({ version: e, method: n, param: \"color\" }) : pe(n, o) : r({ version: e, method: n });\n}\nfunction Et(e, t, r, n) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...n || {},\n    params: { method: e, params: t, req_id: r },\n    capture: et(r)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction yt() {\n  var e;\n  (e = N()) == null || e(), [\n    ...Object.values(v()),\n    v,\n    C,\n    N,\n    ue,\n    ae\n  ].forEach(rt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvYnJpZGdlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRSxtQkFBbUIsbUNBQW1DLEVBQUUsR0FBRztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsMENBQTBDLFFBQVEsUUFBUSxFQUFFLCtDQUErQyxFQUFFLDZCQUE2QixFQUFFLHdDQUF3QyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1Q0FBdUMsbUJBQW1CLHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQSxHQUFHLFVBQVUscUJBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL0BhcHRvcy1sYWJzL3dhbGxldC1hZGFwdGVyLW5leHRqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0B0ZWxlZ3JhbS1hcHBzL2JyaWRnZS9kaXN0L2luZGV4LmpzP2VjN2MiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgZCBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IodCwgciwgbikge1xuICAgIHN1cGVyKFxuICAgICAgdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIubWVzc2FnZSA6IHIgfHwgdCxcbiAgICAgIHtcbiAgICAgICAgY2F1c2U6IHR5cGVvZiByID09IFwib2JqZWN0XCIgPyByLmNhdXNlIDogblxuICAgICAgfVxuICAgICksIHRoaXMudHlwZSA9IHQsIHRoaXMubmFtZSA9IFwiVHlwZWRFcnJvclwiLCBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgZC5wcm90b3R5cGUpO1xuICB9XG59XG5mdW5jdGlvbiBHKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB3ZShlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbmNvbnN0IGhlID0gXCJFUlJfSU5WQUxJRF9WQUxVRVwiLCBtZSA9IFwiRVJSX1VORVhQRUNURURfVkFMVUVcIiwgZGUgPSBcIkVSUl9VTkVYUEVDVEVEX1RZUEVcIiwgSyA9IFwiRVJSX1BBUlNFXCI7XG5mdW5jdGlvbiBWKGUsIHQpIHtcbiAgY29uc3QgciA9IHt9O1xuICBmb3IgKGNvbnN0IG4gaW4gZSkge1xuICAgIGNvbnN0IG8gPSBlW25dO1xuICAgIGlmICghbylcbiAgICAgIGNvbnRpbnVlO1xuICAgIGxldCBzLCBhO1xuICAgIHR5cGVvZiBvID09IFwiZnVuY3Rpb25cIiA/IChzID0gbiwgYSA9IG8pIDogW3MsIGFdID0gbztcbiAgICB0cnkge1xuICAgICAgY29uc3QgYyA9IGEodChzKSk7XG4gICAgICBjICE9PSB2b2lkIDAgJiYgKHJbbl0gPSBjKTtcbiAgICB9IGNhdGNoIChjKSB7XG4gICAgICB0aHJvdyBuZXcgZChcbiAgICAgICAgSyxcbiAgICAgICAgYFBhcnNlciBmb3IgXCIke259XCIgcHJvcGVydHkgZmFpbGVkJHtzID09PSBuID8gXCJcIiA6IGAuIFNvdXJjZSBmaWVsZDogXCIke3N9XCJgfWAsXG4gICAgICAgIGNcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gWihlKSB7XG4gIGxldCB0ID0gZTtcbiAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgdHJ5IHtcbiAgICAgIHQgPSBKU09OLnBhcnNlKHQpO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIHRocm93IG5ldyBkKGhlLCB7IGNhdXNlOiByIH0pO1xuICAgIH1cbiAgaWYgKHR5cGVvZiB0ICE9IFwib2JqZWN0XCIgfHwgIXQgfHwgQXJyYXkuaXNBcnJheSh0KSlcbiAgICB0aHJvdyBuZXcgZChtZSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gZyhlLCB0KSB7XG4gIHJldHVybiAocikgPT4ge1xuICAgIGNvbnN0IG4gPSAobykgPT4ge1xuICAgICAgaWYgKCEociAmJiBvID09PSB2b2lkIDApKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0KG8pO1xuICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IGQoSywge1xuICAgICAgICAgICAgbWVzc2FnZTogYFwiJHtlfVwiIHRyYW5zZm9ybWVyIGZhaWxlZCB0byBwYXJzZSB0aGUgdmFsdWVgLFxuICAgICAgICAgICAgY2F1c2U6IHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuYXNzaWduKFxuICAgICAgbixcbiAgICAgIHtcbiAgICAgICAgaXNWYWxpZChvKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuKG8pLCAhMDtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xufVxuZnVuY3Rpb24gbChlLCB0KSB7XG4gIHJldHVybiBnKHQgfHwgXCJvYmplY3RcIiwgKHIpID0+IHtcbiAgICBjb25zdCBuID0gWihyKTtcbiAgICByZXR1cm4gVihlLCAobykgPT4gbltvXSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gUihlKSB7XG4gIHRocm93IG5ldyBkKGRlLCBgVW5leHBlY3RlZCB2YWx1ZSByZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbn1cbmNvbnN0ICQgPSBnKFwiYm9vbGVhblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJib29sZWFuXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSBTdHJpbmcoZSk7XG4gIGlmICh0ID09PSBcIjFcIiB8fCB0ID09PSBcInRydWVcIilcbiAgICByZXR1cm4gITA7XG4gIGlmICh0ID09PSBcIjBcIiB8fCB0ID09PSBcImZhbHNlXCIpXG4gICAgcmV0dXJuICExO1xuICBSKGUpO1xufSksIF8gPSBnKFwic3RyaW5nXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBlID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIGUudG9TdHJpbmcoKTtcbiAgUihlKTtcbn0pLCBQID0gZyhcIm51bWJlclwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZTtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCB0ID0gTnVtYmVyKGUpO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgUihlKTtcbn0pLCBFZSA9IGcoXCJkYXRlXCIsIChlKSA9PiBlIGluc3RhbmNlb2YgRGF0ZSA/IGUgOiBuZXcgRGF0ZShQKCkoZSkgKiAxZTMpKTtcbmZ1bmN0aW9uIHooZSwgdCkge1xuICByZXR1cm4gZyh0IHx8IFwic2VhcmNoUGFyYW1zXCIsIChyKSA9PiB7XG4gICAgdHlwZW9mIHIgIT0gXCJzdHJpbmdcIiAmJiAhKHIgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpICYmIFIocik7XG4gICAgY29uc3QgbiA9IHR5cGVvZiByID09IFwic3RyaW5nXCIgPyBuZXcgVVJMU2VhcmNoUGFyYW1zKHIpIDogcjtcbiAgICByZXR1cm4gVihlLCAobykgPT4ge1xuICAgICAgY29uc3QgcyA9IG4uZ2V0KG8pO1xuICAgICAgcmV0dXJuIHMgPT09IG51bGwgPyB2b2lkIDAgOiBzO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGooZSkge1xuICBmb3IgKGNvbnN0IHQgaW4gZSlcbiAgICBlW3RdID0gW0codCksIGVbdF1dO1xuICByZXR1cm4gZTtcbn1cbmNvbnN0IHllID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IFAoKSwgciA9IFAoITApLCBuID0gXygpLCBvID0gXyghMCksIHMgPSAkKCEwKSwgYSA9IGwoaih7XG4gICAgYWRkZWRUb0F0dGFjaG1lbnRNZW51OiBzLFxuICAgIGFsbG93c1dyaXRlVG9QbTogcyxcbiAgICBmaXJzdE5hbWU6IG4sXG4gICAgaWQ6IHQsXG4gICAgaXNCb3Q6IHMsXG4gICAgaXNQcmVtaXVtOiBzLFxuICAgIGxhbmd1YWdlQ29kZTogbyxcbiAgICBsYXN0TmFtZTogbyxcbiAgICBwaG90b1VybDogbyxcbiAgICB1c2VybmFtZTogb1xuICB9KSwgXCJVc2VyXCIpKCEwKTtcbiAgcmV0dXJuIHooXG4gICAgaih7XG4gICAgICBhdXRoRGF0ZTogRWUoKSxcbiAgICAgIGNhblNlbmRBZnRlcjogcixcbiAgICAgIGNoYXQ6IGwoXG4gICAgICAgIGooe1xuICAgICAgICAgIGlkOiB0LFxuICAgICAgICAgIHR5cGU6IG4sXG4gICAgICAgICAgdGl0bGU6IG4sXG4gICAgICAgICAgcGhvdG9Vcmw6IG8sXG4gICAgICAgICAgdXNlcm5hbWU6IG9cbiAgICAgICAgfSksXG4gICAgICAgIFwiQ2hhdFwiXG4gICAgICApKCEwKSxcbiAgICAgIGNoYXRJbnN0YW5jZTogbyxcbiAgICAgIGNoYXRUeXBlOiBvLFxuICAgICAgaGFzaDogbixcbiAgICAgIHF1ZXJ5SWQ6IG8sXG4gICAgICByZWNlaXZlcjogYSxcbiAgICAgIHN0YXJ0UGFyYW06IG8sXG4gICAgICBzaWduYXR1cmU6IG4sXG4gICAgICB1c2VyOiBhXG4gICAgfSksXG4gICAgXCJpbml0RGF0YVwiXG4gICkoZSk7XG59O1xuZnVuY3Rpb24gdmUoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17Nn0kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFBlKGUpIHtcbiAgcmV0dXJuIC9eI1tcXGRhLWZdezN9JC9pLnRlc3QoZSk7XG59XG5mdW5jdGlvbiBSZShlKSB7XG4gIGNvbnN0IHQgPSBlLnJlcGxhY2UoL1xccy9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAodmUodCkpXG4gICAgcmV0dXJuIHQ7XG4gIGlmIChQZSh0KSkge1xuICAgIGxldCBuID0gXCIjXCI7XG4gICAgZm9yIChsZXQgbyA9IDA7IG8gPCAzOyBvICs9IDEpXG4gICAgICBuICs9IHRbMSArIG9dLnJlcGVhdCgyKTtcbiAgICByZXR1cm4gbjtcbiAgfVxuICBjb25zdCByID0gdC5tYXRjaCgvXnJnYlxcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pXFwpJC8pIHx8IHQubWF0Y2goL15yZ2JhXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSksXFxkezEsM31cXCkkLyk7XG4gIGlmICghcilcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIFwiJHtlfVwiIGRvZXMgbm90IHNhdGlzZnkgYW55IG9mIGtub3duIFJHQiBmb3JtYXRzLmApO1xuICByZXR1cm4gci5zbGljZSgxKS5yZWR1Y2UoKG4sIG8pID0+IHtcbiAgICBjb25zdCBzID0gcGFyc2VJbnQobywgMTApLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gbiArIChzLmxlbmd0aCA9PT0gMSA/IFwiMFwiIDogXCJcIikgKyBzO1xuICB9LCBcIiNcIik7XG59XG5jb25zdCBUZSA9IGcoXCJyZ2JcIiwgKGUpID0+IFJlKF8oKShlKSkpLCBJID0gZyhcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBUZSghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFooZSkpLnJlZHVjZSgociwgW24sIG9dKSA9PiAoclt3ZShuKV0gPSB0KG8pLCByKSwge30pO1xuICB9XG4pO1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIFcoZSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXMoZSkubWFwKChbdCwgcl0pID0+IFtHKHQpLCByXSlcbiAgICApXG4gICk7XG59XG5jb25zdCBBZSA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBfKCksIHIgPSBfKCEwKSwgbiA9ICQoITApO1xuICByZXR1cm4geih7XG4gICAgYm90SW5saW5lOiBbXCJ0Z1dlYkFwcEJvdElubGluZVwiLCBuXSxcbiAgICBkZWZhdWx0Q29sb3JzOiBbXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgSSghMCldLFxuICAgIGZ1bGxzY3JlZW46IFtcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBuXSxcbiAgICBpbml0RGF0YTogW1widGdXZWJBcHBEYXRhXCIsIHllKCEwKV0sXG4gICAgaW5pdERhdGFSYXc6IFtcInRnV2ViQXBwRGF0YVwiLCByXSxcbiAgICBwbGF0Zm9ybTogW1widGdXZWJBcHBQbGF0Zm9ybVwiLCB0XSxcbiAgICBzaG93U2V0dGluZ3M6IFtcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIG5dLFxuICAgIHN0YXJ0UGFyYW06IFtcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCByXSxcbiAgICB0aGVtZVBhcmFtczogW1widGdXZWJBcHBUaGVtZVBhcmFtc1wiLCBJKCldLFxuICAgIHZlcnNpb246IFtcInRnV2ViQXBwVmVyc2lvblwiLCB0XVxuICB9LCBcImxhdW5jaFBhcmFtc1wiKShlKTtcbn07XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gU2UoZSkge1xuICBjb25zdCB7XG4gICAgaW5pdERhdGFSYXc6IHQsXG4gICAgc3RhcnRQYXJhbTogcixcbiAgICBzaG93U2V0dGluZ3M6IG4sXG4gICAgYm90SW5saW5lOiBvLFxuICAgIGZ1bGxzY3JlZW46IHMsXG4gICAgZGVmYXVsdENvbG9yczogYVxuICB9ID0gZSwgYyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgcmV0dXJuIGMuc2V0KFwidGdXZWJBcHBQbGF0Zm9ybVwiLCBlLnBsYXRmb3JtKSwgYy5zZXQoXCJ0Z1dlYkFwcFRoZW1lUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyBXKGUudGhlbWVQYXJhbXMpKSwgYy5zZXQoXCJ0Z1dlYkFwcFZlcnNpb25cIiwgZS52ZXJzaW9uKSwgdCAmJiBjLnNldChcInRnV2ViQXBwRGF0YVwiLCB0KSwgciAmJiBjLnNldChcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCByKSwgdHlwZW9mIG4gPT0gXCJib29sZWFuXCIgJiYgYy5zZXQoXCJ0Z1dlYkFwcFNob3dTZXR0aW5nc1wiLCBuID8gXCIxXCIgOiBcIjBcIiksIHR5cGVvZiBvID09IFwiYm9vbGVhblwiICYmIGMuc2V0KFwidGdXZWJBcHBCb3RJbmxpbmVcIiwgbyA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgcyA9PSBcImJvb2xlYW5cIiAmJiBjLnNldChcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBzID8gXCIxXCIgOiBcIjBcIiksIGEgJiYgYy5zZXQoXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgLyogQF9fUFVSRV9fICovIFcoYSkpLCBjLnRvU3RyaW5nKCk7XG59XG5jb25zdCBYID0gbCh7XG4gIGV2ZW50VHlwZTogXygpLFxuICBldmVudERhdGE6IChlKSA9PiBlXG59LCBcIm1pbmlBcHBzTWVzc2FnZVwiKSwgWSA9IGcoXCJmblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiKVxuICAgIHJldHVybiBlO1xuICBSKGUpO1xufSk7XG5mdW5jdGlvbiAkZShlKSB7XG4gIHJldHVybiAhIWUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShlKTtcbn1cbmNvbnN0IENlID0gbCh7XG4gIFRlbGVncmFtV2Vidmlld1Byb3h5OiBsKHsgcG9zdEV2ZW50OiBZKCkgfSkoKVxufSk7XG5mdW5jdGlvbiBRKGUpIHtcbiAgcmV0dXJuIENlKCkuaXNWYWxpZChlKTtcbn1cbmZ1bmN0aW9uIE5lKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICEwO1xuICB9XG59XG52YXIgRGUgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIGplID0gKGUsIHQsIHIpID0+IHQgaW4gZSA/IERlKGUsIHQsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IHIgfSkgOiBlW3RdID0gciwgZWUgPSAoZSwgdCwgcikgPT4gamUoZSwgdHlwZW9mIHQgIT0gXCJzeW1ib2xcIiA/IHQgKyBcIlwiIDogdCwgcik7XG5jbGFzcyBiIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCByLCBuKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgciA9PSBcIm9iamVjdFwiID8gci5tZXNzYWdlIDogciB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIuY2F1c2UgOiBuXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgdGhpcy5uYW1lID0gXCJUeXBlZEVycm9yXCIsIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBiLnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRlKGUsIHQsIHIpIHtcbiAgcmV0dXJuIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCByKSwgKCkgPT4gZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIHIpO1xufVxuZnVuY3Rpb24gayguLi5lKSB7XG4gIGNvbnN0IHQgPSBlLmZsYXQoMSk7XG4gIHJldHVybiBbXG4gICAgdC5wdXNoLmJpbmQodCksXG4gICAgKCkgPT4ge1xuICAgICAgdC5mb3JFYWNoKChyKSA9PiB7XG4gICAgICAgIHIoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXTtcbn1cbmZ1bmN0aW9uIFVlKGUsIHQpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBiICYmIGUudHlwZSA9PT0gdDtcbn1cbmZ1bmN0aW9uIEwoZSkge1xuICByZXR1cm4gKHQpID0+IFVlKHQsIGUpO1xufVxuY29uc3QgcmUgPSBcIkVSUl9BQk9SVEVEXCIsIG5lID0gXCJFUlJfQ0FOQ0VMRURcIiwgb2UgPSBcIkVSUl9USU1FRF9PVVRcIjtcbmZ1bmN0aW9uIE0oZSkge1xuICByZXR1cm4gbmV3IGIocmUsIHsgY2F1c2U6IGUgfSk7XG59XG5jb25zdCBudCA9IEwob2UpLCBvdCA9IEwocmUpLCBzdCA9IEwobmUpO1xuZnVuY3Rpb24gRihlLCB0KSB7XG4gIHJldHVybiBlLnJlamVjdCA9IHQucmVqZWN0LCBlO1xufVxuY2xhc3MgdyBleHRlbmRzIFByb21pc2Uge1xuICBjb25zdHJ1Y3Rvcih0LCByKSB7XG4gICAgbGV0IG4sIG87XG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gKG4gPSB0LCBvID0gcikgOiBvID0gdDtcbiAgICBsZXQgcywgYTtcbiAgICBzdXBlcigoYywgaSkgPT4ge1xuICAgICAgbyB8fCAobyA9IHt9KTtcbiAgICAgIGNvbnN0IHsgYWJvcnRTaWduYWw6IHUgfSA9IG87XG4gICAgICBpZiAodSAmJiB1LmFib3J0ZWQpXG4gICAgICAgIHJldHVybiBpKE0odS5yZWFzb24pKTtcbiAgICAgIGNvbnN0IFtmLCBoXSA9IGsoKSwgbSA9IChFKSA9PiAoLi4uZ2UpID0+IChoKCksIEUoLi4uZ2UpKSwgVCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgeyBzaWduYWw6IEEgfSA9IFQ7XG4gICAgICBhID0gbSgoRSkgPT4ge1xuICAgICAgICBULmFib3J0KEUpLCBpKEUpO1xuICAgICAgfSksIHMgPSBtKGMpLCB1ICYmIGYoXG4gICAgICAgIHRlKHUsIFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgIGEoTSh1LnJlYXNvbikpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgdGltZW91dDogRCB9ID0gbztcbiAgICAgIGlmIChEKSB7XG4gICAgICAgIGNvbnN0IEUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBhKG5ldyBiKG9lLCBgVGltZW91dCByZWFjaGVkOiAke0R9bXNgKSk7XG4gICAgICAgIH0sIEQpO1xuICAgICAgICBmKCgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoRSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbiAmJiBuKHMsIGEsIEEpO1xuICAgIH0pLCBlZSh0aGlzLCBcInJlamVjdFwiKSwgdGhpcy5yZWplY3QgPSBhO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEJldHRlclByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCByKSB7XG4gICAgcmV0dXJuIG5ldyB3KChuLCBvLCBzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhID0gdChzKTtcbiAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBQcm9taXNlID8gYS50aGVuKG4sIG8pIDogbihhKTtcbiAgICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgICAgbyhhKTtcbiAgICAgIH1cbiAgICB9LCByKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICByZXR1cm4gbmV3IHcoKHIpID0+IHtcbiAgICAgIHIodCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgdygociwgbikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcHJvbWlzZSBleGVjdXRpb24uXG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5yZWplY3QobmV3IGIobmUpKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmNhdGNoXG4gICAqL1xuICBjYXRjaCh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHQpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuZmluYWxseVxuICAgKi9cbiAgZmluYWxseSh0KSB7XG4gICAgcmV0dXJuIEYoc3VwZXIuZmluYWxseSh0KSwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS50aGVuXG4gICAqL1xuICB0aGVuKHQsIHIpIHtcbiAgICByZXR1cm4gRihzdXBlci50aGVuKHQsIHIpLCB0aGlzKTtcbiAgfVxufVxuZnVuY3Rpb24gSihlLCB0KSB7XG4gIHJldHVybiBlLnJlc29sdmUgPSB0LnJlc29sdmUsIGU7XG59XG5jbGFzcyBTIGV4dGVuZHMgdyB7XG4gIGNvbnN0cnVjdG9yKHQsIHIpIHtcbiAgICBsZXQgbiwgbztcbiAgICB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyAobiA9IHQsIG8gPSByKSA6IG8gPSB0O1xuICAgIGxldCBzO1xuICAgIHN1cGVyKChhLCBjLCBpKSA9PiB7XG4gICAgICBzID0gYSwgbiAmJiBuKGEsIGMsIGkpO1xuICAgIH0sIG8pLCBlZSh0aGlzLCBcInJlc29sdmVcIiksIHRoaXMucmVzb2x2ZSA9IHM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRW5oYW5jZWRQcm9taXNlIGluc3RhbmNlIHVzaW5nIGV4ZWN1dG9yLCByZXNvbHZpbmcgcHJvbWlzZSB3aGVuIGEgcmVzdWx0XG4gICAqIHdhcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIGZuIC0gZnVuY3Rpb24gcmV0dXJuaW5nIHByb21pc2UgcmVzdWx0LlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICovXG4gIHN0YXRpYyB3aXRoRm4odCwgcikge1xuICAgIHJldHVybiBuZXcgUyhcbiAgICAgIChuLCBvLCBzKSA9PiB3LndpdGhGbih0LCB7IGFib3J0U2lnbmFsOiBzIH0pLnRoZW4obiwgbyksXG4gICAgICByXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICByZXR1cm4gbmV3IFMoKHIpID0+IHtcbiAgICAgIHIodCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgUygociwgbikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmNhdGNoXG4gICAqL1xuICBjYXRjaCh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHQpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuZmluYWxseVxuICAgKi9cbiAgZmluYWxseSh0KSB7XG4gICAgcmV0dXJuIEooc3VwZXIuZmluYWxseSh0KSwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS50aGVuXG4gICAqL1xuICB0aGVuKHQsIHIpIHtcbiAgICByZXR1cm4gSihzdXBlci50aGVuKHQsIHIpLCB0aGlzKTtcbiAgfVxufVxuZnVuY3Rpb24gYXQoZSwgdCkge1xuICByZXR1cm4gbmV3IHcoKHIpID0+IHtcbiAgICBzZXRUaW1lb3V0KHIsIGUpO1xuICB9LCB7IGFib3J0U2lnbmFsOiB0IH0pO1xufVxuZnVuY3Rpb24gc2UoZSkge1xuICByZXR1cm4gYHRhcHBzLyR7ZX1gO1xufVxuZnVuY3Rpb24gV2UoZSwgdCkge1xuICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHNlKGUpLCBKU09OLnN0cmluZ2lmeSh0KSk7XG59XG5mdW5jdGlvbiB4ZShlKSB7XG4gIGNvbnN0IHQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHNlKGUpKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdCA/IEpTT04ucGFyc2UodCkgOiB2b2lkIDA7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBjdChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgLSR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gaXQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLCAodCkgPT4gYF8ke3QudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIHV0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvX1thLXpdL2csICh0KSA9PiB0WzFdLnRvVXBwZXJDYXNlKCkpO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGtlKGUsIHQpIHtcbiAgdCB8fCAodCA9IHt9KTtcbiAgY29uc3Qge1xuICAgIHRleHRDb2xvcjogcixcbiAgICBiZ0NvbG9yOiBuLFxuICAgIHNob3VsZExvZzogbyA9ICEwXG4gIH0gPSB0O1xuICBmdW5jdGlvbiBzKGEsIC4uLmMpIHtcbiAgICBpZiAoIW8gfHwgdHlwZW9mIG8gPT0gXCJmdW5jdGlvblwiICYmICFvKCkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaSA9IFwiZm9udC13ZWlnaHQ6Ym9sZDtwYWRkaW5nOjAgNXB4O2JvcmRlci1yYWRpdXM6NXB4XCI7XG4gICAgY29uc29sZVthXShcbiAgICAgIGAlYyR7SW50bC5EYXRlVGltZUZvcm1hdChcImVuLUdCXCIsIHtcbiAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCIsXG4gICAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IDMsXG4gICAgICAgIHRpbWVab25lOiBcIlVUQ1wiXG4gICAgICB9KS5mb3JtYXQoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpfSVjIC8gJWMke2V9YCxcbiAgICAgIGAke2l9O2JhY2tncm91bmQtY29sb3I6IGxpZ2h0Ymx1ZTtjb2xvcjpibGFja2AsXG4gICAgICBcIlwiLFxuICAgICAgYCR7aX07JHtyID8gYGNvbG9yOiR7cn07YCA6IFwiXCJ9JHtuID8gYGJhY2tncm91bmQtY29sb3I6JHtufWAgOiBcIlwifWAsXG4gICAgICAuLi5jXG4gICAgKTtcbiAgfVxuICByZXR1cm4gW1xuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHMoXCJsb2dcIiwgLi4uYSk7XG4gICAgfSxcbiAgICBmdW5jdGlvbiguLi5hKSB7XG4gICAgICBzKFwiZXJyb3JcIiwgLi4uYSk7XG4gICAgfVxuICBdO1xufVxuZnVuY3Rpb24gcHQoZSwgdCkge1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoZSwgdCk7XG59XG5mdW5jdGlvbiBmdChlKSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShlKTtcbn1cbmZ1bmN0aW9uIExlKGUsIHQpIHtcbiAgdCgpO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIHkoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCByID0gdC5lcXVhbHMgfHwgT2JqZWN0LmlzO1xuICBsZXQgbiA9IFtdLCBvID0gZTtcbiAgY29uc3QgcyA9ICh1KSA9PiB7XG4gICAgaWYgKCFyKG8sIHUpKSB7XG4gICAgICBjb25zdCBmID0gbztcbiAgICAgIG8gPSB1LCBMZShpLCAoKSA9PiB7XG4gICAgICAgIFsuLi5uXS5mb3JFYWNoKChbaCwgbV0pID0+IHtcbiAgICAgICAgICBoKHUsIGYpLCBtICYmIGMoaCwgITApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gYSh1KSB7XG4gICAgY29uc3QgZiA9IHR5cGVvZiB1ICE9IFwib2JqZWN0XCIgPyB7IG9uY2U6IHUgfSA6IHU7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uY2U6IGYub25jZSB8fCAhMSxcbiAgICAgIHNpZ25hbDogZi5zaWduYWwgfHwgITFcbiAgICB9O1xuICB9XG4gIGNvbnN0IGMgPSAodSwgZikgPT4ge1xuICAgIGNvbnN0IGggPSBhKGYpLCBtID0gbi5maW5kSW5kZXgoKFtULCBBXSkgPT4gVCA9PT0gdSAmJiBBLm9uY2UgPT09IGgub25jZSAmJiBBLnNpZ25hbCA9PT0gaC5zaWduYWwpO1xuICAgIG0gPj0gMCAmJiBuLnNwbGljZShtLCAxKTtcbiAgfSwgaSA9IE9iamVjdC5hc3NpZ24oXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2UoaSksIG87XG4gICAgfSxcbiAgICB7XG4gICAgICBkZXN0cm95KCkge1xuICAgICAgICBuID0gW107XG4gICAgICB9LFxuICAgICAgc2V0OiBzLFxuICAgICAgcmVzZXQoKSB7XG4gICAgICAgIHMoZSk7XG4gICAgICB9LFxuICAgICAgc3ViKHUsIGYpIHtcbiAgICAgICAgcmV0dXJuIG4ucHVzaChbdSwgYShmKV0pLCAoKSA9PiBjKHUsIGYpO1xuICAgICAgfSxcbiAgICAgIHVuc3ViOiBjLFxuICAgICAgdW5zdWJBbGwoKSB7XG4gICAgICAgIG4gPSBuLmZpbHRlcigodSkgPT4gdVsxXS5zaWduYWwpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGk7XG59XG5jb25zdCBVID0gW107XG5mdW5jdGlvbiBPZShlKSB7XG4gIFUubGVuZ3RoICYmIFVbVS5sZW5ndGggLSAxXS5hZGQoZSk7XG59XG5jb25zdCBhZSA9IC8qIEBfX1BVUkVfXyAqLyB5KCExKSwgW08sIHFlXSA9IC8qIEBfX1BVUkVfXyAqLyBrZShcIkJyaWRnZVwiLCB7XG4gIGJnQ29sb3I6IFwiIzkxNDdmZlwiLFxuICB0ZXh0Q29sb3I6IFwid2hpdGVcIixcbiAgc2hvdWxkTG9nOiBhZVxufSksIEllID0ge1xuICBjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZDogbCh7XG4gICAgcmVxX2lkOiBfKCksXG4gICAgZGF0YTogKGUpID0+IGUgPT09IG51bGwgPyBlIDogXyghMCkoZSlcbiAgfSwgXCJjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZFwiKSxcbiAgY3VzdG9tX21ldGhvZF9pbnZva2VkOiBsKHtcbiAgICByZXFfaWQ6IF8oKSxcbiAgICByZXN1bHQ6IChlKSA9PiBlLFxuICAgIGVycm9yOiBfKCEwKVxuICB9LCBcImN1c3RvbV9tZXRob2RfaW52b2tlZFwiKSxcbiAgcG9wdXBfY2xvc2VkOiBnKFwicG9wdXBfY2xvc2VkXCIsIChlKSA9PiBlID8gbCh7XG4gICAgYnV0dG9uX2lkOiAodCkgPT4gdCA9PSBudWxsID8gdm9pZCAwIDogXygpKHQpXG4gIH0pKCkoZSkgOiB7fSksXG4gIHZpZXdwb3J0X2NoYW5nZWQ6IGwoe1xuICAgIGhlaWdodDogUCgpLFxuICAgIHdpZHRoOiAoZSkgPT4gZSA9PSBudWxsID8gd2luZG93LmlubmVyV2lkdGggOiBQKCkoZSksXG4gICAgaXNfc3RhdGVfc3RhYmxlOiAkKCksXG4gICAgaXNfZXhwYW5kZWQ6ICQoKVxuICB9LCBcInZpZXdwb3J0X2NoYW5nZWRcIilcbn07XG5mdW5jdGlvbiBNZShlKSB7XG4gIGNvbnN0IHQgPSB3aW5kb3csIFssIHJdID0gayhcbiAgICAvLyBBZGQgbGlzdGVuZXIsIHdoaWNoIGhhbmRsZXMgZXZlbnRzIHNlbnQgZnJvbSB0aGUgVGVsZWdyYW0gd2ViIGFwcGxpY2F0aW9uIGFuZCBhbHNvIGV2ZW50c1xuICAgIC8vIGdlbmVyYXRlZCBieSB0aGUgbG9jYWwgZW1pdEV2ZW50IGZ1bmN0aW9uLlxuICAgIHRlKHQsIFwibWVzc2FnZVwiLCAobikgPT4ge1xuICAgICAgaWYgKG4uc291cmNlICE9PSB0LnBhcmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbGV0IG87XG4gICAgICB0cnkge1xuICAgICAgICBvID0gWCgpKG4uZGF0YSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBldmVudFR5cGU6IHMsIGV2ZW50RGF0YTogYSB9ID0gbywgYyA9IEllW3NdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaSA9IGMgPyBjKCkoYSkgOiBhO1xuICAgICAgICBPKFwiRXZlbnQgcmVjZWl2ZWQ6XCIsIGkgPyB7IGV2ZW50VHlwZTogcywgZXZlbnREYXRhOiBpIH0gOiB7IGV2ZW50VHlwZTogcyB9KSwgZShbcywgaV0pO1xuICAgICAgfSBjYXRjaCAoaSkge1xuICAgICAgICBxZShcbiAgICAgICAgICBbXG4gICAgICAgICAgICBgQW4gZXJyb3Igb2NjdXJyZWQgcHJvY2Vzc2luZyB0aGUgXCIke3N9XCIgZXZlbnQgZnJvbSB0aGUgVGVsZWdyYW0gYXBwbGljYXRpb24uYCxcbiAgICAgICAgICAgIFwiUGxlYXNlLCBmaWxlIGFuIGlzc3VlIGhlcmU6XCIsXG4gICAgICAgICAgICBcImh0dHBzOi8vZ2l0aHViLmNvbS9UZWxlZ3JhbS1NaW5pLUFwcHMvdGVsZWdyYW0tYXBwcy9pc3N1ZXMvbmV3L2Nob29zZVwiXG4gICAgICAgICAgXS5qb2luKGBcbmApLFxuICAgICAgICAgIG8sXG4gICAgICAgICAgaVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pXG4gICk7XG4gIHJldHVybiByO1xufVxuY29uc3QgQyA9IC8qIEBfX1BVUkVfXyAqLyB5KCksIE4gPSAvKiBAX19QVVJFX18gKi8geSgpO1xuZnVuY3Rpb24gY2UoKSB7XG4gIHJldHVybiBOKCkgfHwgTi5zZXQoTWUoQy5zZXQpKSwgQztcbn1cbmNvbnN0IHYgPSAvKiBAX19QVVJFX18gKi8geSh7fSk7XG5mdW5jdGlvbiBpZShlKSB7XG4gIGxldCB0ID0gdigpW2VdO1xuICByZXR1cm4gdCB8fCAodCA9IC8qIEBfX1BVUkVfXyAqLyB5KHZvaWQgMCwge1xuICAgIGVxdWFscygpIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0pLCBjZSgpLnN1YigocikgPT4ge1xuICAgIHIgJiYgclswXSA9PT0gZSAmJiB0LnNldChyWzFdKTtcbiAgfSksIHYuc2V0KHsgLi4udigpLCBbZV06IHQgfSkpLCB0O1xufVxuZnVuY3Rpb24gRmUoZSwgdCwgcikge1xuICByZXR1cm4gaWUoZSkuc3ViKHQsIHIpO1xufVxuY29uc3QgSmUgPSBcIkVSUl9NRVRIT0RfVU5TVVBQT1JURURcIiwgQmUgPSBcIkVSUl9SRVRSSUVWRV9MUF9GQUlMRURcIiwgSGUgPSBcIkVSUl9NRVRIT0RfUEFSQU1FVEVSX1VOU1VQUE9SVEVEXCIsIEdlID0gXCJFUlJfVU5LTk9XTl9FTlZcIiwgS2UgPSBcIkVSUl9JTlZPS0VfQ1VTVE9NX01FVEhPRF9SRVNQT05TRVwiLCB1ZSA9IC8qIEBfX1BVUkVfXyAqLyB5KFwiaHR0cHM6Ly93ZWIudGVsZWdyYW0ub3JnXCIpO1xuZnVuY3Rpb24gcGUoZSwgdCkge1xuICBPKFwiUG9zdGluZyBldmVudDpcIiwgdCA/IHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSA6IHsgZXZlbnRUeXBlOiBlIH0pO1xuICBjb25zdCByID0gd2luZG93O1xuICBpZiAoUShyKSkge1xuICAgIHIuVGVsZWdyYW1XZWJ2aWV3UHJveHkucG9zdEV2ZW50KGUsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbiA9IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSk7XG4gIGlmIChOZSgpKVxuICAgIHJldHVybiByLnBhcmVudC5wb3N0TWVzc2FnZShuLCB1ZSgpKTtcbiAgY29uc3QgeyBleHRlcm5hbDogbyB9ID0gcjtcbiAgaWYgKGwoeyBub3RpZnk6IFkoKSB9KSgpLmlzVmFsaWQobykpIHtcbiAgICBvLm5vdGlmeShuKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IGIoR2UpO1xufVxuZnVuY3Rpb24gZmUoZSwgdCwgcikge1xuICByIHx8IChyID0ge30pO1xuICBjb25zdCB7IGNhcHR1cmU6IG4gfSA9IHIsIFtvLCBzXSA9IGsoKTtcbiAgcmV0dXJuIG5ldyB3KChhKSA9PiB7XG4gICAgKEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdKS5mb3JFYWNoKChjKSA9PiB7XG4gICAgICBvKFxuICAgICAgICBGZShjLCAoaSkgPT4ge1xuICAgICAgICAgICghbiB8fCAoQXJyYXkuaXNBcnJheSh0KSA/IG4oe1xuICAgICAgICAgICAgZXZlbnQ6IGMsXG4gICAgICAgICAgICBwYXlsb2FkOiBpXG4gICAgICAgICAgfSkgOiBuKGkpKSkgJiYgYShpKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksIChyLnBvc3RFdmVudCB8fCBwZSkoZSwgci5wYXJhbXMpO1xuICB9LCByKS5maW5hbGx5KHMpO1xufVxuZnVuY3Rpb24gcShlKSB7XG4gIHJldHVybiBBZSgpKGUpO1xufVxuZnVuY3Rpb24gX2UoZSkge1xuICByZXR1cm4gcShcbiAgICBlLnJlcGxhY2UoL15bXj8jXSpbPyNdLywgXCJcIikucmVwbGFjZSgvWz8jXS9nLCBcIiZcIilcbiAgKTtcbn1cbmZ1bmN0aW9uIFZlKCkge1xuICByZXR1cm4gX2Uod2luZG93LmxvY2F0aW9uLmhyZWYpO1xufVxuZnVuY3Rpb24gWmUoKSB7XG4gIGNvbnN0IGUgPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKVswXTtcbiAgaWYgKCFlKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgZmlyc3QgbmF2aWdhdGlvbiBlbnRyeS5cIik7XG4gIHJldHVybiBfZShlLm5hbWUpO1xufVxuY29uc3QgemUgPSBcImxhdW5jaFBhcmFtc1wiO1xuZnVuY3Rpb24gWGUoKSB7XG4gIHJldHVybiBxKHhlKHplKSB8fCBcIlwiKTtcbn1cbmZ1bmN0aW9uIGxlKGUpIHtcbiAgV2UoXCJsYXVuY2hQYXJhbXNcIiwgLyogQF9fUFVSRV9fICovIFNlKGUpKTtcbn1cbmZ1bmN0aW9uIGJlKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSArIChlLmNhdXNlID8gYFxuICAke2JlKGUuY2F1c2UpfWAgOiBcIlwiKSA6IEpTT04uc3RyaW5naWZ5KGUpO1xufVxuZnVuY3Rpb24gWWUoKSB7XG4gIGNvbnN0IGUgPSBbXTtcbiAgZm9yIChjb25zdCB0IG9mIFtcbiAgICAvLyBUcnkgdG8gcmV0cmlldmUgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbi4gVGhpcyBtZXRob2QgY2FuIHJldHVyblxuICAgIC8vIG5vdGhpbmcgaW4gY2FzZSwgbG9jYXRpb24gd2FzIGNoYW5nZWQsIGFuZCB0aGVuIHRoZSBwYWdlIHdhcyByZWxvYWRlZC5cbiAgICBWZSxcbiAgICAvLyBUaGVuLCB0cnkgdXNpbmcgdGhlIGxvd2VyIGxldmVsIEFQSSAtIHdpbmRvdy5wZXJmb3JtYW5jZS5cbiAgICBaZSxcbiAgICAvLyBGaW5hbGx5LCB0cnkgdG8gZXh0cmFjdCBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIHRoZSBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgWGVcbiAgXSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgciA9IHQoKTtcbiAgICAgIHJldHVybiBsZShyKSwgcjtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICBlLnB1c2gocik7XG4gICAgfVxuICB0aHJvdyBuZXcgYihCZSwgW1xuICAgIFwiVW5hYmxlIHRvIHJldHJpZXZlIGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gYW55IGtub3duIHNvdXJjZS4gUGVyaGFwcywgeW91IGhhdmUgb3BlbmVkIHlvdXIgYXBwIG91dHNpZGUgVGVsZWdyYW0/XCIsXG4gICAgXCLwn5OWIFJlZmVyIHRvIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb246XCIsXG4gICAgXCJodHRwczovL2RvY3MudGVsZWdyYW0tbWluaS1hcHBzLmNvbS9wYWNrYWdlcy90ZWxlZ3JhbS1hcHBzLWJyaWRnZS9lbnZpcm9ubWVudFwiLFxuICAgIFwiQ29sbGVjdGVkIGVycm9yczpcIixcbiAgICAuLi5lLm1hcCgodCkgPT4gYOKAlCAke2JlKHQpfWApXG4gIF0uam9pbihgXG5gKSk7XG59XG5mdW5jdGlvbiBfdChlKSB7XG4gIGlmIChlID09PSBcInNpbXBsZVwiKVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gWWUoKSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICByZXR1cm4gdy53aXRoRm4oYXN5bmMgKCkgPT4ge1xuICAgIGlmIChRKHdpbmRvdykpXG4gICAgICByZXR1cm4gITA7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBmZShcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiLCBcInRoZW1lX2NoYW5nZWRcIiwgeyB0aW1lb3V0OiAxMDAgfSksICEwO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSwgZSk7XG59XG5mdW5jdGlvbiB4KGUsIHQpIHtcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IE1lc3NhZ2VFdmVudChcIm1lc3NhZ2VcIiwge1xuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSksXG4gICAgLy8gV2Ugc3BlY2lmeSB3aW5kb3cucGFyZW50IHRvIGltaXRhdGUgdGhlIGNhc2UsIHRoZSBwYXJlbnQgaWZyYW1lIHNlbnQgdXMgdGhpcyBldmVudC5cbiAgICBzb3VyY2U6IHdpbmRvdy5wYXJlbnRcbiAgfSkpO1xufVxuZnVuY3Rpb24gUWUoZSwgdCkge1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBldmVudFR5cGU6IHIgfSA9IFgoKSh0KTtcbiAgICAgIHIgPT09IFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIgJiYgeChcInRoZW1lX2NoYW5nZWRcIiwge1xuICAgICAgICB0aGVtZV9wYXJhbXM6IEpTT04ucGFyc2UoLyogQF9fUFVSRV9fICovIFcoZSkpXG4gICAgICB9KSwgciA9PT0gXCJ3ZWJfYXBwX3JlcXVlc3Rfdmlld3BvcnRcIiAmJiB4KFwidmlld3BvcnRfY2hhbmdlZFwiLCB7XG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgIGlzX3N0YXRlX3N0YWJsZTogITAsXG4gICAgICAgIGlzX2V4cGFuZGVkOiAhMFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCB7XG4gICAgfVxufVxuZnVuY3Rpb24gbHQoZSkge1xuICB2YXIgbjtcbiAgY29uc3QgdCA9IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyBxKGUpIDogZTtcbiAgbGUodCk7XG4gIGNvbnN0IHIgPSAobiA9IHdpbmRvdy5UZWxlZ3JhbVdlYnZpZXdQcm94eSkgPT0gbnVsbCA/IHZvaWQgMCA6IG4ucG9zdEV2ZW50O1xuICB3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkgPSB7XG4gICAgcG9zdEV2ZW50KG8sIHMpIHtcbiAgICAgIFFlKHQudGhlbWVQYXJhbXMsIEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBvLCBldmVudERhdGE6IHMgfSkpLCByID09IG51bGwgfHwgcihvLCBzKTtcbiAgICB9XG4gIH0sIE8oXCJFbnZpcm9ubWVudCB3YXMgbW9ja2VkIGJ5IHRoZSBtb2NrVGVsZWdyYW1FbnYgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBidCgpIHtcbiAgW1xuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5X3JlY2VpdmVFdmVudFwiXSxcbiAgICAvLyBXaW5kb3dzIFBob25lLlxuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5XCIsIFwicmVjZWl2ZUV2ZW50XCJdLFxuICAgIC8vIERlc2t0b3AuXG4gICAgW1wiVGVsZWdyYW1cIiwgXCJXZWJWaWV3XCIsIFwicmVjZWl2ZUV2ZW50XCJdXG4gICAgLy8gQW5kcm9pZCBhbmQgaU9TLlxuICBdLmZvckVhY2goKGUpID0+IHtcbiAgICBsZXQgdCA9IHdpbmRvdztcbiAgICBlLmZvckVhY2goKHIsIG4sIG8pID0+IHtcbiAgICAgIGlmIChuID09PSBvLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdFtyXSA9IHg7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHIgaW4gdCB8fCAodFtyXSA9IHt9KSwgdCA9IHRbcl07XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZ3QoKSB7XG4gIFtcIlRlbGVncmFtR2FtZVByb3h5X3JlY2VpdmVFdmVudFwiLCBcIlRlbGVncmFtR2FtZVByb3h5XCIsIFwiVGVsZWdyYW1cIl0uZm9yRWFjaCgoZSkgPT4ge1xuICAgIGRlbGV0ZSB3aW5kb3dbZV07XG4gIH0pO1xufVxuZnVuY3Rpb24gd3QoZSwgdCwgcikge1xuICBpZShlKS51bnN1Yih0LCByKTtcbn1cbmZ1bmN0aW9uIGh0KGUsIHQpIHtcbiAgcmV0dXJuIGNlKCkuc3ViKGUsIHQpO1xufVxuZnVuY3Rpb24gbXQoZSwgdCkge1xuICBDLnVuc3ViKGUsIHQpO1xufVxuZnVuY3Rpb24gZXQoZSkge1xuICByZXR1cm4gKHsgcmVxX2lkOiB0IH0pID0+IHQgPT09IGU7XG59XG5mdW5jdGlvbiBCKGUpIHtcbiAgcmV0dXJuIGUuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xufVxuZnVuY3Rpb24gdHQoZSwgdCkge1xuICBjb25zdCByID0gQihlKSwgbiA9IEIodCksIG8gPSBNYXRoLm1heChyLmxlbmd0aCwgbi5sZW5ndGgpO1xuICBmb3IgKGxldCBzID0gMDsgcyA8IG87IHMgKz0gMSkge1xuICAgIGNvbnN0IGEgPSByW3NdIHx8IDAsIGMgPSBuW3NdIHx8IDA7XG4gICAgaWYgKGEgIT09IGMpXG4gICAgICByZXR1cm4gYSA+IGMgPyAxIDogLTE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBwKGUsIHQpIHtcbiAgcmV0dXJuIHR0KGUsIHQpIDw9IDA7XG59XG5mdW5jdGlvbiBIKGUsIHQsIHIpIHtcbiAgaWYgKHR5cGVvZiByID09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX29wZW5fbGlua1wiKSB7XG4gICAgICBpZiAodCA9PT0gXCJ0cnlfaW5zdGFudF92aWV3XCIpXG4gICAgICAgIHJldHVybiBwKFwiNi40XCIsIHIpO1xuICAgICAgaWYgKHQgPT09IFwidHJ5X2Jyb3dzZXJcIilcbiAgICAgICAgcmV0dXJuIHAoXCI3LjZcIiwgcik7XG4gICAgfVxuICAgIGlmIChlID09PSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiICYmIHQgPT09IFwiY29sb3JcIilcbiAgICAgIHJldHVybiBwKFwiNi45XCIsIHIpO1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfY2xvc2VcIiAmJiB0ID09PSBcInJldHVybl9iYWNrXCIpXG4gICAgICByZXR1cm4gcChcIjcuNlwiLCByKTtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX3NldHVwX21haW5fYnV0dG9uXCIgJiYgdCA9PT0gXCJoYXNfc2hpbmVfZWZmZWN0XCIpXG4gICAgICByZXR1cm4gcChcIjcuMTBcIiwgcik7XG4gIH1cbiAgc3dpdGNoIChlKSB7XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl90Z19saW5rXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9pbnZvaWNlXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfYmFja19idXR0b25cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfYmFja2dyb3VuZF9jb2xvclwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIjpcbiAgICBjYXNlIFwid2ViX2FwcF90cmlnZ2VyX2hhcHRpY19mZWVkYmFja1wiOlxuICAgICAgcmV0dXJuIHAoXCI2LjFcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9wb3B1cFwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjJcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfY2xvc2Vfc2Nhbl9xcl9wb3B1cFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fc2Nhbl9xcl9wb3B1cFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlYWRfdGV4dF9mcm9tX2NsaXBib2FyZFwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjRcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc3dpdGNoX2lubGluZV9xdWVyeVwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjdcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfaW52b2tlX2N1c3RvbV9tZXRob2RcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3dyaXRlX2FjY2Vzc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfcGhvbmVcIjpcbiAgICAgIHJldHVybiBwKFwiNi45XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3NldHRpbmdzX2J1dHRvblwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjEwXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X2dldF9pbmZvXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfb3Blbl9zZXR0aW5nc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYWNjZXNzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfcmVxdWVzdF9hdXRoXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfdXBkYXRlX3Rva2VuXCI6XG4gICAgICByZXR1cm4gcChcIjcuMlwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zd2lwZV9iZWhhdmlvclwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjdcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2hhcmVfdG9fc3RvcnlcIjpcbiAgICAgIHJldHVybiBwKFwiNy44XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3NlY29uZGFyeV9idXR0b25cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfYm90dG9tX2Jhcl9jb2xvclwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjEwXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3Rfc2FmZV9hcmVhXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9jb250ZW50X3NhZmVfYXJlYVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfZnVsbHNjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2V4aXRfZnVsbHNjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9lbW9qaV9zdGF0dXNcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9hZGRfdG9faG9tZV9zY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9jaGVja19ob21lX3NjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfZW1vamlfc3RhdHVzX2FjY2Vzc1wiOlxuICAgICAgcmV0dXJuIHAoXCI4LjBcIiwgdCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXG4gICAgICAgIFwiaWZyYW1lX3JlYWR5XCIsXG4gICAgICAgIFwiaWZyYW1lX3dpbGxfcmVsb2FkXCIsXG4gICAgICAgIFwid2ViX2FwcF9jbG9zZVwiLFxuICAgICAgICBcIndlYl9hcHBfZGF0YV9zZW5kXCIsXG4gICAgICAgIFwid2ViX2FwcF9leHBhbmRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX29wZW5fbGlua1wiLFxuICAgICAgICBcIndlYl9hcHBfcmVhZHlcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlcXVlc3Rfdmlld3BvcnRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3NldHVwX21haW5fYnV0dG9uXCIsXG4gICAgICAgIFwid2ViX2FwcF9zZXR1cF9jbG9zaW5nX2JlaGF2aW9yXCJcbiAgICAgIF0uaW5jbHVkZXMoZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGR0KGUsIHQpIHtcbiAgdCB8fCAodCA9IFwic3RyaWN0XCIpO1xuICBjb25zdCByID0gdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gdCA6IChuKSA9PiB7XG4gICAgY29uc3QgeyBtZXRob2Q6IG8sIHZlcnNpb246IHMgfSA9IG47XG4gICAgbGV0IGEsIGM7XG4gICAgaWYgKFwicGFyYW1cIiBpbiBuID8gKGEgPSBgUGFyYW1ldGVyIFwiJHtuLnBhcmFtfVwiIG9mIFwiJHtvfVwiIG1ldGhvZCBpcyB1bnN1cHBvcnRlZCBpbiBNaW5pIEFwcHMgdmVyc2lvbiAke3N9YCwgYyA9IEhlKSA6IChhID0gYE1ldGhvZCBcIiR7b31cIiBpcyB1bnN1cHBvcnRlZCBpbiBNaW5pIEFwcHMgdmVyc2lvbiAke3N9YCwgYyA9IEplKSwgdCA9PT0gXCJzdHJpY3RcIilcbiAgICAgIHRocm93IG5ldyBiKGMsIGEpO1xuICAgIHJldHVybiBjb25zb2xlLndhcm4oYSk7XG4gIH07XG4gIHJldHVybiAobiwgbykgPT4gSChuLCBlKSA/ICRlKG8pICYmIG4gPT09IFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCIgJiYgXCJjb2xvclwiIGluIG8gJiYgIUgobiwgXCJjb2xvclwiLCBlKSA/IHIoeyB2ZXJzaW9uOiBlLCBtZXRob2Q6IG4sIHBhcmFtOiBcImNvbG9yXCIgfSkgOiBwZShuLCBvKSA6IHIoeyB2ZXJzaW9uOiBlLCBtZXRob2Q6IG4gfSk7XG59XG5mdW5jdGlvbiBFdChlLCB0LCByLCBuKSB7XG4gIHJldHVybiBmZShcIndlYl9hcHBfaW52b2tlX2N1c3RvbV9tZXRob2RcIiwgXCJjdXN0b21fbWV0aG9kX2ludm9rZWRcIiwge1xuICAgIC4uLm4gfHwge30sXG4gICAgcGFyYW1zOiB7IG1ldGhvZDogZSwgcGFyYW1zOiB0LCByZXFfaWQ6IHIgfSxcbiAgICBjYXB0dXJlOiBldChyKVxuICB9KS50aGVuKCh7IHJlc3VsdDogbywgZXJyb3I6IHMgfSkgPT4ge1xuICAgIGlmIChzKVxuICAgICAgdGhyb3cgbmV3IGIoS2UsIHMpO1xuICAgIHJldHVybiBvO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHJ0KGUpIHtcbiAgZS51bnN1YkFsbCgpLCBlLnJlc2V0KCk7XG59XG5mdW5jdGlvbiB5dCgpIHtcbiAgdmFyIGU7XG4gIChlID0gTigpKSA9PSBudWxsIHx8IGUoKSwgW1xuICAgIC4uLk9iamVjdC52YWx1ZXModigpKSxcbiAgICB2LFxuICAgIEMsXG4gICAgTixcbiAgICB1ZSxcbiAgICBhZVxuICBdLmZvckVhY2gocnQpO1xufVxuZXhwb3J0IHtcbiAgYWUgYXMgJGRlYnVnLFxuICB1ZSBhcyAkdGFyZ2V0T3JpZ2luLFxuICB3IGFzIENhbmNlbGFibGVQcm9taXNlLFxuICByZSBhcyBFUlJfQUJPUlRFRCxcbiAgbmUgYXMgRVJSX0NBTkNFTEVELFxuICBLZSBhcyBFUlJfQ1VTVE9NX01FVEhPRF9FUlJfUkVTUE9OU0UsXG4gIEhlIGFzIEVSUl9NRVRIT0RfUEFSQU1FVEVSX1VOU1VQUE9SVEVELFxuICBKZSBhcyBFUlJfTUVUSE9EX1VOU1VQUE9SVEVELFxuICBCZSBhcyBFUlJfUkVUUklFVkVfTFBfRkFJTEVELFxuICBvZSBhcyBFUlJfVElNRURfT1VULFxuICBHZSBhcyBFUlJfVU5LTk9XTl9FTlYsXG4gIFMgYXMgRW5oYW5jZWRQcm9taXNlLFxuICBiIGFzIFR5cGVkRXJyb3IsXG4gIHRlIGFzIGFkZEV2ZW50TGlzdGVuZXIsXG4gIGN0IGFzIGNhbWVsVG9LZWJhYixcbiAgaXQgYXMgY2FtZWxUb1NuYWtlLFxuICBldCBhcyBjYXB0dXJlU2FtZVJlcSxcbiAgdHQgYXMgY29tcGFyZVZlcnNpb25zLFxuICBNIGFzIGNyZWF0ZUFib3J0RXJyb3IsXG4gIGsgYXMgY3JlYXRlQ2JDb2xsZWN0b3IsXG4gIGtlIGFzIGNyZWF0ZUxvZ2dlcixcbiAgZHQgYXMgY3JlYXRlUG9zdEV2ZW50LFxuICBMIGFzIGNyZWF0ZVR5cGVkRXJyb3JQcmVkaWNhdGUsXG4gIGJ0IGFzIGRlZmluZUV2ZW50SGFuZGxlcnMsXG4gIGZ0IGFzIGRlbGV0ZUNzc1ZhcixcbiAgeCBhcyBlbWl0TWluaUFwcHNFdmVudCxcbiAgeGUgYXMgZ2V0U3RvcmFnZVZhbHVlLFxuICBRIGFzIGhhc1dlYnZpZXdQcm94eSxcbiAgRXQgYXMgaW52b2tlQ3VzdG9tTWV0aG9kLFxuICBvdCBhcyBpc0Fib3J0RXJyb3IsXG4gIHN0IGFzIGlzQ2FuY2VsZWRFcnJvcixcbiAgTmUgYXMgaXNJZnJhbWUsXG4gIF90IGFzIGlzVE1BLFxuICBudCBhcyBpc1RpbWVvdXRFcnJvcixcbiAgbHQgYXMgbW9ja1RlbGVncmFtRW52LFxuICB3dCBhcyBvZmYsXG4gIEZlIGFzIG9uLFxuICBwZSBhcyBwb3N0RXZlbnQsXG4gIGd0IGFzIHJlbW92ZUV2ZW50SGFuZGxlcnMsXG4gIGZlIGFzIHJlcXVlc3QsXG4gIHl0IGFzIHJlc2V0UGFja2FnZVN0YXRlLFxuICBZZSBhcyByZXRyaWV2ZUxhdW5jaFBhcmFtcyxcbiAgcHQgYXMgc2V0Q3NzVmFyLFxuICBXZSBhcyBzZXRTdG9yYWdlVmFsdWUsXG4gIGF0IGFzIHNsZWVwLFxuICB1dCBhcyBzbmFrZVRvQ2FtZWwsXG4gIGh0IGFzIHN1YnNjcmliZSxcbiAgSCBhcyBzdXBwb3J0cyxcbiAgbXQgYXMgdW5zdWJzY3JpYmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@telegram-apps/sdk/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@telegram-apps/sdk/dist/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $createRequestId: () => (/* binding */ Mr),\n/* harmony export */   $debug: () => (/* binding */ lr),\n/* harmony export */   $postEvent: () => (/* binding */ Ao),\n/* harmony export */   $targetOrigin: () => (/* binding */ gr),\n/* harmony export */   $version: () => (/* binding */ V),\n/* harmony export */   CancelablePromise: () => (/* binding */ b),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ po),\n/* harmony export */   ERR_ACCESS_DENIED: () => (/* binding */ kr),\n/* harmony export */   ERR_ALREADY_MOUNTING: () => (/* binding */ xr),\n/* harmony export */   ERR_ALREADY_OPENED: () => (/* binding */ Wt),\n/* harmony export */   ERR_ALREADY_REQUESTING: () => (/* binding */ q),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ _o),\n/* harmony export */   ERR_CSS_VARS_ALREADY_BOUND: () => (/* binding */ Vr),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ br),\n/* harmony export */   ERR_DATA_INVALID_SIZE: () => (/* binding */ Nr),\n/* harmony export */   ERR_EMOJI_STATUS_SET_FAILED: () => (/* binding */ qr),\n/* harmony export */   ERR_FULLSCREEN_FAILED: () => (/* binding */ Ur),\n/* harmony export */   ERR_INVALID_SLUG: () => (/* binding */ Dr),\n/* harmony export */   ERR_INVALID_URL: () => (/* binding */ Ft),\n/* harmony export */   ERR_INVALID_VALUE: () => (/* binding */ Ms),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ hr),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ dr),\n/* harmony export */   ERR_NOT_AVAILABLE: () => (/* binding */ Lr),\n/* harmony export */   ERR_NOT_INITIALIZED: () => (/* binding */ jr),\n/* harmony export */   ERR_NOT_MOUNTED: () => (/* binding */ Hr),\n/* harmony export */   ERR_NOT_SUPPORTED: () => (/* binding */ In),\n/* harmony export */   ERR_PARSE: () => (/* binding */ Qn),\n/* harmony export */   ERR_POPUP_INVALID_PARAMS: () => (/* binding */ ce),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ mr),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ fo),\n/* harmony export */   ERR_UNEXPECTED_TYPE: () => (/* binding */ Ds),\n/* harmony export */   ERR_UNEXPECTED_VALUE: () => (/* binding */ Is),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ go),\n/* harmony export */   TypedError: () => (/* binding */ l),\n/* harmony export */   addEventListener: () => (/* binding */ lo),\n/* harmony export */   addToHomeScreen: () => (/* binding */ uu),\n/* harmony export */   authenticateBiometry: () => (/* binding */ aa),\n/* harmony export */   backButton: () => (/* binding */ Hc),\n/* harmony export */   bindMiniAppCssVars: () => (/* binding */ Ei),\n/* harmony export */   bindThemeParamsCssVars: () => (/* binding */ di),\n/* harmony export */   bindViewportCssVars: () => (/* binding */ Sc),\n/* harmony export */   biometry: () => (/* binding */ Uc),\n/* harmony export */   biometryMountError: () => (/* binding */ Ro),\n/* harmony export */   biometryState: () => (/* binding */ Qe),\n/* harmony export */   changeFullscreenError: () => (/* binding */ ls),\n/* harmony export */   changeFullscreenPromise: () => (/* binding */ En),\n/* harmony export */   checkHomeScreenStatus: () => (/* binding */ lu),\n/* harmony export */   checkHomeScreenStatusError: () => (/* binding */ $c),\n/* harmony export */   checkHomeScreenStatusPromise: () => (/* binding */ Ps),\n/* harmony export */   classNames: () => (/* binding */ yt),\n/* harmony export */   closeMiniApp: () => (/* binding */ wi),\n/* harmony export */   closeQrScanner: () => (/* binding */ Bt),\n/* harmony export */   closingBehavior: () => (/* binding */ qc),\n/* harmony export */   cloudStorage: () => (/* binding */ Fc),\n/* harmony export */   compareVersions: () => (/* binding */ Tr),\n/* harmony export */   createPostEvent: () => (/* binding */ $r),\n/* harmony export */   defineEventHandlers: () => (/* binding */ Cr),\n/* harmony export */   deleteCloudStorageItem: () => (/* binding */ ga),\n/* harmony export */   deleteCssVar: () => (/* binding */ Lt),\n/* harmony export */   disableClosingConfirmation: () => (/* binding */ fa),\n/* harmony export */   disableVerticalSwipes: () => (/* binding */ sc),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ vt),\n/* harmony export */   enableClosingConfirmation: () => (/* binding */ da),\n/* harmony export */   enableVerticalSwipes: () => (/* binding */ rc),\n/* harmony export */   exitFullscreen: () => (/* binding */ dc),\n/* harmony export */   expandViewport: () => (/* binding */ yc),\n/* harmony export */   getCloudStorageItem: () => (/* binding */ wa),\n/* harmony export */   getCloudStorageKeys: () => (/* binding */ Sa),\n/* harmony export */   getCurrentTime: () => (/* binding */ Eu),\n/* harmony export */   hapticFeedback: () => (/* binding */ Wc),\n/* harmony export */   hapticFeedbackImpactOccurred: () => (/* binding */ Ca),\n/* harmony export */   hapticFeedbackNotificationOccurred: () => (/* binding */ va),\n/* harmony export */   hapticFeedbackSelectionChanged: () => (/* binding */ Ta),\n/* harmony export */   hideBackButton: () => (/* binding */ Wr),\n/* harmony export */   hideSettingsButton: () => (/* binding */ Yi),\n/* harmony export */   init: () => (/* binding */ vu),\n/* harmony export */   initData: () => (/* binding */ Gc),\n/* harmony export */   initDataAuthDate: () => (/* binding */ Io),\n/* harmony export */   initDataCanSendAfter: () => (/* binding */ Do),\n/* harmony export */   initDataCanSendAfterDate: () => (/* binding */ $a),\n/* harmony export */   initDataChat: () => (/* binding */ Ra),\n/* harmony export */   initDataChatInstance: () => (/* binding */ Pa),\n/* harmony export */   initDataChatType: () => (/* binding */ Oa),\n/* harmony export */   initDataHash: () => (/* binding */ Ba),\n/* harmony export */   initDataQueryId: () => (/* binding */ Ma),\n/* harmony export */   initDataRaw: () => (/* binding */ No),\n/* harmony export */   initDataReceiver: () => (/* binding */ Ia),\n/* harmony export */   initDataStartParam: () => (/* binding */ Na),\n/* harmony export */   initDataState: () => (/* binding */ en),\n/* harmony export */   initDataUser: () => (/* binding */ ka),\n/* harmony export */   invoice: () => (/* binding */ Qc),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Rr),\n/* harmony export */   isAbortError: () => (/* binding */ kc),\n/* harmony export */   isAuthenticatingBiometry: () => (/* binding */ Ie),\n/* harmony export */   isBackButtonMounted: () => (/* binding */ me),\n/* harmony export */   isBackButtonSupported: () => (/* binding */ Fr),\n/* harmony export */   isBackButtonVisible: () => (/* binding */ $t),\n/* harmony export */   isBiometryMounted: () => (/* binding */ Je),\n/* harmony export */   isBiometryMounting: () => (/* binding */ Kr),\n/* harmony export */   isBiometrySupported: () => (/* binding */ oa),\n/* harmony export */   isCanceledError: () => (/* binding */ xc),\n/* harmony export */   isChangingFullscreen: () => (/* binding */ lc),\n/* harmony export */   isCheckingHomeScreenStatus: () => (/* binding */ cu),\n/* harmony export */   isClosingBehaviorMounted: () => (/* binding */ he),\n/* harmony export */   isClosingConfirmationEnabled: () => (/* binding */ Rt),\n/* harmony export */   isCloudStorageSupported: () => (/* binding */ ba),\n/* harmony export */   isColorDark: () => (/* binding */ Vo),\n/* harmony export */   isFullscreen: () => (/* binding */ us),\n/* harmony export */   isHapticFeedbackSupported: () => (/* binding */ Aa),\n/* harmony export */   isIframe: () => (/* binding */ tr),\n/* harmony export */   isInvoiceOpened: () => (/* binding */ Ne),\n/* harmony export */   isInvoiceSupported: () => (/* binding */ Va),\n/* harmony export */   isMainButtonEnabled: () => (/* binding */ Xa),\n/* harmony export */   isMainButtonLoaderVisible: () => (/* binding */ ei),\n/* harmony export */   isMainButtonMounted: () => (/* binding */ ge),\n/* harmony export */   isMainButtonVisible: () => (/* binding */ ti),\n/* harmony export */   isMiniAppActive: () => (/* binding */ ot),\n/* harmony export */   isMiniAppCssVarsBound: () => (/* binding */ xe),\n/* harmony export */   isMiniAppDark: () => (/* binding */ hi),\n/* harmony export */   isMiniAppMounted: () => (/* binding */ ye),\n/* harmony export */   isMiniAppSupported: () => (/* binding */ bi),\n/* harmony export */   isPopupOpened: () => (/* binding */ Le),\n/* harmony export */   isPopupSupported: () => (/* binding */ Ti),\n/* harmony export */   isQrScannerOpened: () => (/* binding */ X),\n/* harmony export */   isQrScannerSupported: () => (/* binding */ Bi),\n/* harmony export */   isRGB: () => (/* binding */ fe),\n/* harmony export */   isRGBShort: () => (/* binding */ xs),\n/* harmony export */   isRecord: () => (/* binding */ Xn),\n/* harmony export */   isRequestingBiometryAccess: () => (/* binding */ De),\n/* harmony export */   isRequestingEmojiStatusAccess: () => (/* binding */ su),\n/* harmony export */   isRequestingPhoneAccess: () => (/* binding */ wt),\n/* harmony export */   isRequestingWriteAccess: () => (/* binding */ St),\n/* harmony export */   isSSR: () => (/* binding */ Dn),\n/* harmony export */   isSecondaryButtonEnabled: () => (/* binding */ ki),\n/* harmony export */   isSecondaryButtonLoaderVisible: () => (/* binding */ xi),\n/* harmony export */   isSecondaryButtonMounted: () => (/* binding */ Ae),\n/* harmony export */   isSecondaryButtonSupported: () => (/* binding */ qi),\n/* harmony export */   isSecondaryButtonVisible: () => (/* binding */ Vi),\n/* harmony export */   isSettingEmojiStatus: () => (/* binding */ au),\n/* harmony export */   isSettingsButtonMounted: () => (/* binding */ Ce),\n/* harmony export */   isSettingsButtonSupported: () => (/* binding */ Ji),\n/* harmony export */   isSettingsButtonVisible: () => (/* binding */ Mt),\n/* harmony export */   isSwipeBehaviorMounted: () => (/* binding */ ve),\n/* harmony export */   isSwipeBehaviorSupported: () => (/* binding */ nc),\n/* harmony export */   isTMA: () => (/* binding */ Bn),\n/* harmony export */   isThemeParamsCssVarsBound: () => (/* binding */ ke),\n/* harmony export */   isThemeParamsDark: () => (/* binding */ Fa),\n/* harmony export */   isThemeParamsMounted: () => (/* binding */ be),\n/* harmony export */   isTimeoutError: () => (/* binding */ Nc),\n/* harmony export */   isVerticalSwipesEnabled: () => (/* binding */ It),\n/* harmony export */   isViewportCssVarsBound: () => (/* binding */ je),\n/* harmony export */   isViewportExpanded: () => (/* binding */ Ac),\n/* harmony export */   isViewportMounted: () => (/* binding */ Be),\n/* harmony export */   isViewportMounting: () => (/* binding */ pc),\n/* harmony export */   isViewportStable: () => (/* binding */ Cc),\n/* harmony export */   mainButton: () => (/* binding */ Jc),\n/* harmony export */   mainButtonBackgroundColor: () => (/* binding */ Ka),\n/* harmony export */   mainButtonHasShineEffect: () => (/* binding */ Za),\n/* harmony export */   mainButtonState: () => (/* binding */ sn),\n/* harmony export */   mainButtonText: () => (/* binding */ ni),\n/* harmony export */   mainButtonTextColor: () => (/* binding */ oi),\n/* harmony export */   mergeClassNames: () => (/* binding */ Dc),\n/* harmony export */   miniApp: () => (/* binding */ Yc),\n/* harmony export */   miniAppBackgroundColor: () => (/* binding */ Ee),\n/* harmony export */   miniAppBackgroundColorRGB: () => (/* binding */ cn),\n/* harmony export */   miniAppBottomBarColor: () => (/* binding */ we),\n/* harmony export */   miniAppBottomBarColorRGB: () => (/* binding */ un),\n/* harmony export */   miniAppHeaderColor: () => (/* binding */ Se),\n/* harmony export */   miniAppHeaderColorRGB: () => (/* binding */ Go),\n/* harmony export */   miniAppReady: () => (/* binding */ yi),\n/* harmony export */   miniAppState: () => (/* binding */ zo),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ Vc),\n/* harmony export */   mountBackButton: () => (/* binding */ Gr),\n/* harmony export */   mountBiometry: () => (/* binding */ ua),\n/* harmony export */   mountClosingBehavior: () => (/* binding */ ma),\n/* harmony export */   mountMainButton: () => (/* binding */ ai),\n/* harmony export */   mountMiniApp: () => (/* binding */ Si),\n/* harmony export */   mountSecondaryButton: () => (/* binding */ Fi),\n/* harmony export */   mountSettingsButton: () => (/* binding */ Ki),\n/* harmony export */   mountSwipeBehavior: () => (/* binding */ ac),\n/* harmony export */   mountThemeParams: () => (/* binding */ qo),\n/* harmony export */   mountViewport: () => (/* binding */ Ec),\n/* harmony export */   off: () => (/* binding */ v),\n/* harmony export */   offAddToHomeScreenFailed: () => (/* binding */ du),\n/* harmony export */   offAddedToHomeScreen: () => (/* binding */ fu),\n/* harmony export */   offBackButtonClick: () => (/* binding */ Qr),\n/* harmony export */   offMainButtonClick: () => (/* binding */ ci),\n/* harmony export */   offSecondaryButtonClick: () => (/* binding */ Gi),\n/* harmony export */   offSettingsButtonClick: () => (/* binding */ Xi),\n/* harmony export */   on: () => (/* binding */ E),\n/* harmony export */   onAddToHomeScreenFailed: () => (/* binding */ _u),\n/* harmony export */   onAddedToHomeScreen: () => (/* binding */ pu),\n/* harmony export */   onBackButtonClick: () => (/* binding */ zr),\n/* harmony export */   onMainButtonClick: () => (/* binding */ ii),\n/* harmony export */   onSecondaryButtonClick: () => (/* binding */ Wi),\n/* harmony export */   onSettingsButtonClick: () => (/* binding */ Zi),\n/* harmony export */   openBiometrySettings: () => (/* binding */ ia),\n/* harmony export */   openInvoice: () => (/* binding */ La),\n/* harmony export */   openLink: () => (/* binding */ mu),\n/* harmony export */   openPopup: () => (/* binding */ $i),\n/* harmony export */   openQrScanner: () => (/* binding */ Ii),\n/* harmony export */   openTelegramLink: () => (/* binding */ Pc),\n/* harmony export */   parseInitData: () => (/* binding */ zc),\n/* harmony export */   parseThemeParams: () => (/* binding */ pi),\n/* harmony export */   popup: () => (/* binding */ Kc),\n/* harmony export */   postEvent: () => (/* binding */ Ht),\n/* harmony export */   qrScanner: () => (/* binding */ Zc),\n/* harmony export */   readTextFromClipboard: () => (/* binding */ wu),\n/* harmony export */   removeEventHandlers: () => (/* binding */ vr),\n/* harmony export */   request: () => (/* binding */ Ut),\n/* harmony export */   requestBiometry: () => (/* binding */ Xr),\n/* harmony export */   requestBiometryAccess: () => (/* binding */ ca),\n/* harmony export */   requestContact: () => (/* binding */ bu),\n/* harmony export */   requestContentSafeAreaInsets: () => (/* binding */ hc),\n/* harmony export */   requestEmojiStatusAccess: () => (/* binding */ ru),\n/* harmony export */   requestEmojiStatusAccessError: () => (/* binding */ vc),\n/* harmony export */   requestEmojiStatusAccessPromise: () => (/* binding */ $s),\n/* harmony export */   requestFullscreen: () => (/* binding */ fc),\n/* harmony export */   requestPhoneAccess: () => (/* binding */ Mc),\n/* harmony export */   requestSafeAreaInsets: () => (/* binding */ bc),\n/* harmony export */   requestViewport: () => (/* binding */ gc),\n/* harmony export */   requestWriteAccess: () => (/* binding */ gu),\n/* harmony export */   restoreInitData: () => (/* binding */ Da),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ oe),\n/* harmony export */   safeCall: () => (/* binding */ Cu),\n/* harmony export */   secondaryButton: () => (/* binding */ Xc),\n/* harmony export */   secondaryButtonBackgroundColor: () => (/* binding */ Di),\n/* harmony export */   secondaryButtonHasShineEffect: () => (/* binding */ Ni),\n/* harmony export */   secondaryButtonPosition: () => (/* binding */ Li),\n/* harmony export */   secondaryButtonState: () => (/* binding */ fn),\n/* harmony export */   secondaryButtonText: () => (/* binding */ ji),\n/* harmony export */   secondaryButtonTextColor: () => (/* binding */ Hi),\n/* harmony export */   sendData: () => (/* binding */ Su),\n/* harmony export */   serializeLaunchParams: () => (/* binding */ Ic),\n/* harmony export */   serializeThemeParams: () => (/* binding */ vn),\n/* harmony export */   setCloudStorageItem: () => (/* binding */ ya),\n/* harmony export */   setCssVar: () => (/* binding */ Vt),\n/* harmony export */   setEmojiStatus: () => (/* binding */ iu),\n/* harmony export */   setEmojiStatusError: () => (/* binding */ Tc),\n/* harmony export */   setEmojiStatusPromise: () => (/* binding */ Rs),\n/* harmony export */   setMainButtonParams: () => (/* binding */ ui),\n/* harmony export */   setMiniAppBackgroundColor: () => (/* binding */ Ko),\n/* harmony export */   setMiniAppBottomBarColor: () => (/* binding */ Zo),\n/* harmony export */   setMiniAppHeaderColor: () => (/* binding */ Xo),\n/* harmony export */   setSecondaryButtonParams: () => (/* binding */ zi),\n/* harmony export */   settingsButton: () => (/* binding */ eu),\n/* harmony export */   shareStory: () => (/* binding */ yu),\n/* harmony export */   shareURL: () => (/* binding */ hu),\n/* harmony export */   showBackButton: () => (/* binding */ Jr),\n/* harmony export */   showSettingsButton: () => (/* binding */ ec),\n/* harmony export */   subscribe: () => (/* binding */ Lc),\n/* harmony export */   supports: () => (/* binding */ Q),\n/* harmony export */   swipeBehavior: () => (/* binding */ tu),\n/* harmony export */   switchInlineQuery: () => (/* binding */ Au),\n/* harmony export */   themeParams: () => (/* binding */ nu),\n/* harmony export */   themeParamsAccentTextColor: () => (/* binding */ ja),\n/* harmony export */   themeParamsBackgroundColor: () => (/* binding */ nn),\n/* harmony export */   themeParamsBottomBarBgColor: () => (/* binding */ jo),\n/* harmony export */   themeParamsButtonColor: () => (/* binding */ on),\n/* harmony export */   themeParamsButtonTextColor: () => (/* binding */ Lo),\n/* harmony export */   themeParamsDestructiveTextColor: () => (/* binding */ Ha),\n/* harmony export */   themeParamsHeaderBackgroundColor: () => (/* binding */ Ua),\n/* harmony export */   themeParamsHintColor: () => (/* binding */ qa),\n/* harmony export */   themeParamsLinkColor: () => (/* binding */ Wa),\n/* harmony export */   themeParamsSecondaryBackgroundColor: () => (/* binding */ Fe),\n/* harmony export */   themeParamsSectionBackgroundColor: () => (/* binding */ Ga),\n/* harmony export */   themeParamsSectionHeaderTextColor: () => (/* binding */ za),\n/* harmony export */   themeParamsSectionSeparatorColor: () => (/* binding */ Qa),\n/* harmony export */   themeParamsState: () => (/* binding */ U),\n/* harmony export */   themeParamsSubtitleTextColor: () => (/* binding */ Ja),\n/* harmony export */   themeParamsTextColor: () => (/* binding */ Ya),\n/* harmony export */   toRGB: () => (/* binding */ Zn),\n/* harmony export */   toRecord: () => (/* binding */ Yn),\n/* harmony export */   unmountBackButton: () => (/* binding */ Yr),\n/* harmony export */   unmountBiometry: () => (/* binding */ la),\n/* harmony export */   unmountClosingBehavior: () => (/* binding */ ha),\n/* harmony export */   unmountMainButton: () => (/* binding */ li),\n/* harmony export */   unmountMiniApp: () => (/* binding */ Ai),\n/* harmony export */   unmountSecondaryButton: () => (/* binding */ Qi),\n/* harmony export */   unmountSettingsButton: () => (/* binding */ tc),\n/* harmony export */   unmountSwipeBehavior: () => (/* binding */ ic),\n/* harmony export */   unmountThemeParams: () => (/* binding */ mi),\n/* harmony export */   unmountViewport: () => (/* binding */ wc),\n/* harmony export */   unsubscribe: () => (/* binding */ jc),\n/* harmony export */   updateBiometryToken: () => (/* binding */ pa),\n/* harmony export */   viewport: () => (/* binding */ ou),\n/* harmony export */   viewportContentSafeAreaInsetBottom: () => (/* binding */ gs),\n/* harmony export */   viewportContentSafeAreaInsetLeft: () => (/* binding */ Es),\n/* harmony export */   viewportContentSafeAreaInsetRight: () => (/* binding */ ws),\n/* harmony export */   viewportContentSafeAreaInsetTop: () => (/* binding */ Ss),\n/* harmony export */   viewportContentSafeAreaInsets: () => (/* binding */ Sn),\n/* harmony export */   viewportHeight: () => (/* binding */ yn),\n/* harmony export */   viewportMountError: () => (/* binding */ ps),\n/* harmony export */   viewportMountPromise: () => (/* binding */ _t),\n/* harmony export */   viewportSafeAreaInsetBottom: () => (/* binding */ ds),\n/* harmony export */   viewportSafeAreaInsetLeft: () => (/* binding */ ms),\n/* harmony export */   viewportSafeAreaInsetRight: () => (/* binding */ hs),\n/* harmony export */   viewportSafeAreaInsetTop: () => (/* binding */ bs),\n/* harmony export */   viewportSafeAreaInsets: () => (/* binding */ wn),\n/* harmony export */   viewportStableHeight: () => (/* binding */ An),\n/* harmony export */   viewportState: () => (/* binding */ _e),\n/* harmony export */   viewportWidth: () => (/* binding */ Ts)\n/* harmony export */ });\nclass G extends Error {\n  constructor(t, n, o) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : o\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, G.prototype);\n  }\n}\nfunction zn(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction Bs(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst Ms = \"ERR_INVALID_VALUE\", Is = \"ERR_UNEXPECTED_VALUE\", Ds = \"ERR_UNEXPECTED_TYPE\", Qn = \"ERR_PARSE\";\nfunction Jn(e, t) {\n  const n = {};\n  for (const o in e) {\n    const s = e[o];\n    if (!s)\n      continue;\n    let r, a;\n    typeof s == \"function\" ? (r = o, a = s) : [r, a] = s;\n    try {\n      const i = a(t(r));\n      i !== void 0 && (n[o] = i);\n    } catch (i) {\n      throw new G(\n        Qn,\n        `Parser for \"${o}\" property failed${r === o ? \"\" : `. Source field: \"${r}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Yn(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new G(Ms, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new G(Is);\n  return t;\n}\nfunction j(e, t) {\n  return (n) => {\n    const o = (s) => {\n      if (!(n && s === void 0))\n        try {\n          return t(s);\n        } catch (r) {\n          throw new G(Qn, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: r\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      o,\n      {\n        isValid(s) {\n          try {\n            return o(s), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction He(e, t) {\n  return j(t || \"object\", (n) => {\n    const o = Yn(n);\n    return Jn(e, (s) => o[s]);\n  });\n}\nfunction Te(e) {\n  throw new G(Ds, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst Ns = j(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  Te(e);\n}), L = j(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  Te(e);\n}), Ue = j(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  Te(e);\n}), Nt = j(\"date\", (e) => e instanceof Date ? e : new Date(Ue()(e) * 1e3));\nfunction Kn(e, t) {\n  return j(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && Te(n);\n    const o = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return Jn(e, (s) => {\n      const r = o.get(s);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction mt(e) {\n  for (const t in e)\n    e[t] = [zn(t), e[t]];\n  return e;\n}\nconst ks = (e) => {\n  const t = Ue(), n = Ue(!0), o = L(), s = L(!0), r = Ns(!0), a = He(mt({\n    addedToAttachmentMenu: r,\n    allowsWriteToPm: r,\n    firstName: o,\n    id: t,\n    isBot: r,\n    isPremium: r,\n    languageCode: s,\n    lastName: s,\n    photoUrl: s,\n    username: s\n  }), \"User\")(!0);\n  return Kn(\n    mt({\n      authDate: Nt(),\n      canSendAfter: n,\n      chat: He(\n        mt({\n          id: t,\n          type: o,\n          title: o,\n          photoUrl: s,\n          username: s\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: s,\n      chatType: s,\n      hash: o,\n      queryId: s,\n      receiver: a,\n      startParam: s,\n      signature: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction fe(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction xs(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Zn(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (fe(t))\n    return t;\n  if (xs(t)) {\n    let o = \"#\";\n    for (let s = 0; s < 3; s += 1)\n      o += t[1 + s].repeat(2);\n    return o;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((o, s) => {\n    const r = parseInt(s, 10).toString(16);\n    return o + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst Vs = j(\"rgb\", (e) => Zn(L()(e))), Ls = j(\n  \"themeParams\",\n  (e) => {\n    const t = Vs(!0);\n    return Object.entries(Yn(e)).reduce((n, [o, s]) => (n[Bs(o)] = t(s), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction vn(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [zn(t), n])\n    )\n  );\n}\n// @__NO_SIDE_EFFECTS__\nfunction Ic(e) {\n  const {\n    initDataRaw: t,\n    startParam: n,\n    showSettings: o,\n    botInline: s,\n    fullscreen: r,\n    defaultColors: a\n  } = e, i = new URLSearchParams();\n  return i.set(\"tgWebAppPlatform\", e.platform), i.set(\"tgWebAppThemeParams\", /* @__PURE__ */ vn(e.themeParams)), i.set(\"tgWebAppVersion\", e.version), t && i.set(\"tgWebAppData\", t), n && i.set(\"tgWebAppStartParam\", n), typeof o == \"boolean\" && i.set(\"tgWebAppShowSettings\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && i.set(\"tgWebAppBotInline\", s ? \"1\" : \"0\"), typeof r == \"boolean\" && i.set(\"tgWebAppFullscreen\", r ? \"1\" : \"0\"), a && i.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ vn(a)), i.toString();\n}\nfunction js(e, t) {\n  return j(\"array\", (n) => {\n    let o;\n    if (Array.isArray(n))\n      o = n;\n    else if (typeof n == \"string\")\n      try {\n        const s = JSON.parse(n);\n        Array.isArray(s) && (o = s);\n      } catch {\n      }\n    return o || Te(n), o.map(e);\n  });\n}\nfunction Xn(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nfunction yt(...e) {\n  return e.map((t) => {\n    if (typeof t == \"string\")\n      return t;\n    if (Xn(t))\n      return yt(Object.entries(t).map((n) => n[1] && n[0]));\n    if (Array.isArray(t))\n      return yt(...t);\n  }).filter(Boolean).join(\" \");\n}\nfunction Dc(...e) {\n  return e.reduce((t, n) => (Xn(n) && Object.entries(n).forEach(([o, s]) => {\n    const r = yt(t[o], s);\n    r && (t[o] = r);\n  }), t), {});\n}\nclass z extends Error {\n  constructor(t, n, o) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : o\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, z.prototype);\n  }\n}\nfunction eo(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction Hs(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst Us = \"ERR_INVALID_VALUE\", qs = \"ERR_UNEXPECTED_VALUE\", Fs = \"ERR_UNEXPECTED_TYPE\", to = \"ERR_PARSE\";\nfunction no(e, t) {\n  const n = {};\n  for (const o in e) {\n    const s = e[o];\n    if (!s)\n      continue;\n    let r, a;\n    typeof s == \"function\" ? (r = o, a = s) : [r, a] = s;\n    try {\n      const i = a(t(r));\n      i !== void 0 && (n[o] = i);\n    } catch (i) {\n      throw new z(\n        to,\n        `Parser for \"${o}\" property failed${r === o ? \"\" : `. Source field: \"${r}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction oo(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new z(Us, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new z(qs);\n  return t;\n}\nfunction I(e, t) {\n  return (n) => {\n    const o = (s) => {\n      if (!(n && s === void 0))\n        try {\n          return t(s);\n        } catch (r) {\n          throw new z(to, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: r\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      o,\n      {\n        isValid(s) {\n          try {\n            return o(s), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction M(e, t) {\n  return I(t || \"object\", (n) => {\n    const o = oo(n);\n    return no(e, (s) => o[s]);\n  });\n}\nfunction $e(e) {\n  throw new z(Fs, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst qe = I(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  $e(e);\n}), R = I(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  $e(e);\n}), de = I(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  $e(e);\n}), Ws = I(\"date\", (e) => e instanceof Date ? e : new Date(de()(e) * 1e3));\nfunction so(e, t) {\n  return I(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && $e(n);\n    const o = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return no(e, (s) => {\n      const r = o.get(s);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction ht(e) {\n  for (const t in e)\n    e[t] = [eo(t), e[t]];\n  return e;\n}\nconst Gs = (e) => {\n  const t = de(), n = de(!0), o = R(), s = R(!0), r = qe(!0), a = M(ht({\n    addedToAttachmentMenu: r,\n    allowsWriteToPm: r,\n    firstName: o,\n    id: t,\n    isBot: r,\n    isPremium: r,\n    languageCode: s,\n    lastName: s,\n    photoUrl: s,\n    username: s\n  }), \"User\")(!0);\n  return so(\n    ht({\n      authDate: Ws(),\n      canSendAfter: n,\n      chat: M(\n        ht({\n          id: t,\n          type: o,\n          title: o,\n          photoUrl: s,\n          username: s\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: s,\n      chatType: s,\n      hash: o,\n      queryId: s,\n      receiver: a,\n      startParam: s,\n      signature: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction zs(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Qs(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Js(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (zs(t))\n    return t;\n  if (Qs(t)) {\n    let o = \"#\";\n    for (let s = 0; s < 3; s += 1)\n      o += t[1 + s].repeat(2);\n    return o;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((o, s) => {\n    const r = parseInt(s, 10).toString(16);\n    return o + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst Ys = I(\"rgb\", (e) => Js(R()(e))), Tn = I(\n  \"themeParams\",\n  (e) => {\n    const t = Ys(!0);\n    return Object.entries(oo(e)).reduce((n, [o, s]) => (n[Hs(o)] = t(s), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction At(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [eo(t), n])\n    )\n  );\n}\nconst Ks = (e) => {\n  const t = R(), n = R(!0), o = qe(!0);\n  return so({\n    botInline: [\"tgWebAppBotInline\", o],\n    defaultColors: [\"tgWebAppDefaultColors\", Tn(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", o],\n    initData: [\"tgWebAppData\", Gs(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", o],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Tn()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Zs(e) {\n  const {\n    initDataRaw: t,\n    startParam: n,\n    showSettings: o,\n    botInline: s,\n    fullscreen: r,\n    defaultColors: a\n  } = e, i = new URLSearchParams();\n  return i.set(\"tgWebAppPlatform\", e.platform), i.set(\"tgWebAppThemeParams\", /* @__PURE__ */ At(e.themeParams)), i.set(\"tgWebAppVersion\", e.version), t && i.set(\"tgWebAppData\", t), n && i.set(\"tgWebAppStartParam\", n), typeof o == \"boolean\" && i.set(\"tgWebAppShowSettings\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && i.set(\"tgWebAppBotInline\", s ? \"1\" : \"0\"), typeof r == \"boolean\" && i.set(\"tgWebAppFullscreen\", r ? \"1\" : \"0\"), a && i.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ At(a)), i.toString();\n}\nconst ro = M({\n  eventType: R(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), ao = I(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  $e(e);\n});\nfunction Xs(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst er = M({\n  TelegramWebviewProxy: M({ postEvent: ao() })()\n});\nfunction io(e) {\n  return er().isValid(e);\n}\nfunction tr() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar nr = Object.defineProperty, or = (e, t, n) => t in e ? nr(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, co = (e, t, n) => or(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nlet l = class uo extends Error {\n  constructor(t, n, o) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : o\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, uo.prototype);\n  }\n};\nfunction lo(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction te(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction sr(e, t) {\n  return e instanceof l && e.type === t;\n}\nfunction kt(e) {\n  return (t) => sr(t, e);\n}\nconst po = \"ERR_ABORTED\", _o = \"ERR_CANCELED\", fo = \"ERR_TIMED_OUT\";\nfunction $n(e) {\n  return new l(po, { cause: e });\n}\nconst Nc = kt(fo), kc = kt(po), xc = kt(_o);\nfunction Rn(e, t) {\n  return e.reject = t.reject, e;\n}\nclass b extends Promise {\n  constructor(t, n) {\n    let o, s;\n    typeof t == \"function\" ? (o = t, s = n) : s = t;\n    let r, a;\n    super((i, p) => {\n      s || (s = {});\n      const { abortSignal: u } = s;\n      if (u && u.aborted)\n        return p($n(u.reason));\n      const [d, w] = te(), A = (m) => (...W) => (w(), m(...W)), x = new AbortController(), { signal: T } = x;\n      a = A((m) => {\n        x.abort(m), p(m);\n      }), r = A(i), u && d(\n        lo(u, \"abort\", () => {\n          a($n(u.reason));\n        })\n      );\n      const { timeout: g } = s;\n      if (g) {\n        const m = setTimeout(() => {\n          a(new l(fo, `Timeout reached: ${g}ms`));\n        }, g);\n        d(() => {\n          clearTimeout(m);\n        });\n      }\n      o && o(r, a, T);\n    }), co(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new b((o, s, r) => {\n      try {\n        const a = t(r);\n        return a instanceof Promise ? a.then(o, s) : o(a);\n      } catch (a) {\n        s(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new b((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new b((n, o) => {\n      o(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new l(_o));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return Rn(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return Rn(super.then(t, n), this);\n  }\n}\nfunction On(e, t) {\n  return e.resolve = t.resolve, e;\n}\nlet rr = class Me extends b {\n  constructor(t, n) {\n    let o, s;\n    typeof t == \"function\" ? (o = t, s = n) : s = t;\n    let r;\n    super((a, i, p) => {\n      r = a, o && o(a, i, p);\n    }, s), co(this, \"resolve\"), this.resolve = r;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new Me(\n      (o, s, r) => b.withFn(t, { abortSignal: r }).then(o, s),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new Me((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new Me((n, o) => {\n      o(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return On(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return On(super.then(t, n), this);\n  }\n};\nfunction ar(e, t) {\n  return new b((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction mo(e) {\n  return `tapps/${e}`;\n}\nfunction O(e, t) {\n  sessionStorage.setItem(mo(e), JSON.stringify(t));\n}\nfunction P(e) {\n  const t = sessionStorage.getItem(mo(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction xt(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\n// @__NO_SIDE_EFFECTS__\nfunction ir(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: o,\n    shouldLog: s = !0\n  } = t;\n  function r(a, ...i) {\n    if (!s || typeof s == \"function\" && !s())\n      return;\n    const p = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${p};background-color: lightblue;color:black`,\n      \"\",\n      `${p};${n ? `color:${n};` : \"\"}${o ? `background-color:${o}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      r(\"log\", ...a);\n    },\n    function(...a) {\n      r(\"error\", ...a);\n    }\n  ];\n}\nfunction Vt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction Lt(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction cr(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction ne(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let o = [], s = e;\n  const r = (u) => {\n    if (!n(s, u)) {\n      const d = s;\n      s = u, cr(p, () => {\n        [...o].forEach(([w, A]) => {\n          w(u, d), A && i(w, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const d = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: d.once || !1,\n      signal: d.signal || !1\n    };\n  }\n  const i = (u, d) => {\n    const w = a(d), A = o.findIndex(([x, T]) => x === u && T.once === w.once && T.signal === w.signal);\n    A >= 0 && o.splice(A, 1);\n  }, p = Object.assign(\n    function() {\n      return ur(p), s;\n    },\n    {\n      destroy() {\n        o = [];\n      },\n      set: r,\n      reset() {\n        r(e);\n      },\n      sub(u, d) {\n        return o.push([u, a(d)]), () => i(u, d);\n      },\n      unsub: i,\n      unsubAll() {\n        o = o.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return p;\n}\nconst bt = [];\nfunction ur(e) {\n  bt.length && bt[bt.length - 1].add(e);\n}\nconst lr = /* @__PURE__ */ ne(!1), [jt, pr] = /* @__PURE__ */ ir(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: lr\n}), _r = {\n  clipboard_text_received: M({\n    req_id: R(),\n    data: (e) => e === null ? e : R(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: M({\n    req_id: R(),\n    result: (e) => e,\n    error: R(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: I(\"popup_closed\", (e) => e ? M({\n    button_id: (t) => t == null ? void 0 : R()(t)\n  })()(e) : {}),\n  viewport_changed: M({\n    height: de(),\n    width: (e) => e == null ? window.innerWidth : de()(e),\n    is_state_stable: qe(),\n    is_expanded: qe()\n  }, \"viewport_changed\")\n};\nfunction fr(e) {\n  const t = window, [, n] = te(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    lo(t, \"message\", (o) => {\n      if (o.source !== t.parent)\n        return;\n      let s;\n      try {\n        s = ro()(o.data);\n      } catch {\n        return;\n      }\n      const { eventType: r, eventData: a } = s, i = _r[r];\n      try {\n        const p = i ? i()(a) : a;\n        jt(\"Event received:\", p ? { eventType: r, eventData: p } : { eventType: r }), e([r, p]);\n      } catch (p) {\n        pr(\n          [\n            `An error occurred processing the \"${r}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          s,\n          p\n        );\n      }\n    })\n  );\n  return n;\n}\nconst Ct = /* @__PURE__ */ ne(), Pn = /* @__PURE__ */ ne();\nfunction ho() {\n  return Pn() || Pn.set(fr(Ct.set)), Ct;\n}\nconst gt = /* @__PURE__ */ ne({});\nfunction bo(e) {\n  let t = gt()[e];\n  return t || (t = /* @__PURE__ */ ne(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ho().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), gt.set({ ...gt(), [e]: t })), t;\n}\nfunction E(e, t, n) {\n  return bo(e).sub(t, n);\n}\nconst dr = \"ERR_METHOD_UNSUPPORTED\", mr = \"ERR_RETRIEVE_LP_FAILED\", hr = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", go = \"ERR_UNKNOWN_ENV\", br = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", gr = /* @__PURE__ */ ne(\"https://web.telegram.org\");\nfunction Ht(e, t) {\n  jt(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (io(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const o = JSON.stringify({ eventType: e, eventData: t });\n  if (tr())\n    return n.parent.postMessage(o, gr());\n  const { external: s } = n;\n  if (M({ notify: ao() })().isValid(s)) {\n    s.notify(o);\n    return;\n  }\n  throw new l(go);\n}\nfunction Ut(e, t, n) {\n  n || (n = {});\n  const { capture: o } = n, [s, r] = te();\n  return new b((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      s(\n        E(i, (p) => {\n          (!o || (Array.isArray(t) ? o({\n            event: i,\n            payload: p\n          }) : o(p))) && a(p);\n        })\n      );\n    }), (n.postEvent || Ht)(e, n.params);\n  }, n).finally(r);\n}\nfunction qt(e) {\n  return Ks()(e);\n}\nfunction Eo(e) {\n  return qt(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Er() {\n  return Eo(window.location.href);\n}\nfunction wr() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return Eo(e.name);\n}\nconst Sr = \"launchParams\";\nfunction yr() {\n  return qt(P(Sr) || \"\");\n}\nfunction wo(e) {\n  O(\"launchParams\", /* @__PURE__ */ Zs(e));\n}\nfunction So(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${So(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction oe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Er,\n    // Then, try using the lower level API - window.performance.\n    wr,\n    // Finally, try to extract launch parameters from the session storage.\n    yr\n  ])\n    try {\n      const n = t();\n      return wo(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new l(mr, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${So(t)}`)\n  ].join(`\n`));\n}\nfunction Bn(e) {\n  if (e === \"simple\")\n    try {\n      return oe(), !0;\n    } catch {\n      return !1;\n    }\n  return b.withFn(async () => {\n    if (io(window))\n      return !0;\n    try {\n      return await Ut(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction vt(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Ar(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = ro()(t);\n      n === \"web_app_request_theme\" && vt(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ At(e))\n      }), n === \"web_app_request_viewport\" && vt(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction Vc(e) {\n  var t;\n  const n = typeof e == \"string\" ? qt(e) : e;\n  wo(n);\n  const o = (t = window.TelegramWebviewProxy) == null ? void 0 : t.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(s, r) {\n      Ar(n.themeParams, JSON.stringify({ eventType: s, eventData: r })), o == null || o(s, r);\n    }\n  }, jt(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction Cr() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, o, s) => {\n      if (o === s.length - 1) {\n        t[n] = vt;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction vr() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction v(e, t, n) {\n  bo(e).unsub(t, n);\n}\nfunction Lc(e, t) {\n  return ho().sub(e, t);\n}\nfunction jc(e, t) {\n  Ct.unsub(e, t);\n}\nfunction yo(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction Mn(e) {\n  return e.split(\".\").map(Number);\n}\nfunction Tr(e, t) {\n  const n = Mn(e), o = Mn(t), s = Math.max(n.length, o.length);\n  for (let r = 0; r < s; r += 1) {\n    const a = n[r] || 0, i = o[r] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction S(e, t) {\n  return Tr(e, t) <= 0;\n}\nfunction Q(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return S(\"6.4\", n);\n      if (t === \"try_browser\")\n        return S(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return S(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return S(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return S(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return S(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return S(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return S(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return S(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return S(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return S(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return S(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return S(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return S(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return S(\"7.10\", t);\n    case \"web_app_request_safe_area\":\n    case \"web_app_request_content_safe_area\":\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n    case \"web_app_set_emoji_status\":\n    case \"web_app_add_to_home_screen\":\n    case \"web_app_check_home_screen\":\n    case \"web_app_request_emoji_status_access\":\n      return S(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction $r(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (o) => {\n    const { method: s, version: r } = o;\n    let a, i;\n    if (\"param\" in o ? (a = `Parameter \"${o.param}\" of \"${s}\" method is unsupported in Mini Apps version ${r}`, i = hr) : (a = `Method \"${s}\" is unsupported in Mini Apps version ${r}`, i = dr), t === \"strict\")\n      throw new l(i, a);\n    return console.warn(a);\n  };\n  return (o, s) => Q(o, e) ? Xs(s) && o === \"web_app_set_header_color\" && \"color\" in s && !Q(o, \"color\", e) ? n({ version: e, method: o, param: \"color\" }) : Ht(o, s) : n({ version: e, method: o });\n}\nfunction Rr(e, t, n, o) {\n  return Ut(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...o || {},\n    params: { method: e, params: t, req_id: n },\n    capture: yo(n)\n  }).then(({ result: s, error: r }) => {\n    if (r)\n      throw new l(br, r);\n    return s;\n  });\n}\nfunction Or() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction D() {\n  const e = Or();\n  return !!e && e.type === \"reload\";\n}\nlet Z;\nfunction Pr(e, t) {\n  Z && Z.set(e, t) || t();\n}\nfunction Tt(e) {\n  if (Z)\n    return e();\n  Z = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    Z.forEach((t) => t()), Z = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction c(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let o = [], s = e;\n  const r = (u) => {\n    if (!n(s, u)) {\n      const d = s;\n      s = u, Pr(p, () => {\n        [...o].forEach(([w, A]) => {\n          w(u, d), A && i(w, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const d = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: d.once || !1,\n      signal: d.signal || !1\n    };\n  }\n  const i = (u, d) => {\n    const w = a(d), A = o.findIndex(([x, T]) => x === u && T.once === w.once && T.signal === w.signal);\n    A >= 0 && o.splice(A, 1);\n  }, p = Object.assign(\n    function() {\n      return Br(p), s;\n    },\n    {\n      destroy() {\n        o = [];\n      },\n      set: r,\n      reset() {\n        r(e);\n      },\n      sub(u, d) {\n        return o.push([u, a(d)]), () => i(u, d);\n      },\n      unsub: i,\n      unsubAll() {\n        o = o.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return p;\n}\nconst ue = [];\nfunction Br(e) {\n  ue.length && ue[ue.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction _(e, t) {\n  let n = /* @__PURE__ */ new Set(), o;\n  function s() {\n    return o || (o = /* @__PURE__ */ c(a(), t));\n  }\n  function r() {\n    s().set(a());\n  }\n  function a() {\n    n.forEach((u) => {\n      u.unsub(r, { signal: !0 });\n    });\n    const i = /* @__PURE__ */ new Set();\n    let p;\n    ue.push(i);\n    try {\n      p = e();\n    } finally {\n      ue.pop();\n    }\n    return i.forEach((u) => {\n      u.sub(r, { signal: !0 });\n    }), n = i, p;\n  }\n  return Object.assign(function() {\n    return s()();\n  }, {\n    destroy() {\n      s().destroy();\n    },\n    sub(...i) {\n      return s().sub(...i);\n    },\n    unsub(...i) {\n      s().unsub(...i);\n    },\n    unsubAll(...i) {\n      s().unsubAll(...i);\n    }\n  });\n}\nconst Mr = /* @__PURE__ */ c(/* @__PURE__ */ (() => {\n  let e = 0;\n  return () => (e += 1).toString();\n})()), Ao = /* @__PURE__ */ c(Ht), V = /* @__PURE__ */ c(\"0.0\");\nfunction Ir(e) {\n  e || (e = {});\n  const { postEvent: t } = e, n = e.version || oe().version;\n  V.set(n), Ao.set(\n    typeof t == \"function\" ? t : $r(n)\n  );\n}\nfunction Co() {\n  return Mr()();\n}\nfunction se(e, t, n) {\n  return Rr(e, t, Co(), {\n    ...n || {},\n    postEvent: f\n  });\n}\nconst y = (e, t, n) => (n || (n = {}), n.postEvent || (n.postEvent = f), Ut(e, t, n)), f = (e, t) => Ao()(e, t);\nfunction N(e) {\n  return /* @__PURE__ */ _(() => Q(e, V()));\n}\nconst ce = \"ERR_POPUP_INVALID_PARAMS\", Ft = \"ERR_INVALID_URL\", Dr = \"ERR_INVALID_SLUG\", Nr = \"ERR_DATA_INVALID_SIZE\", kr = \"ERR_ACCESS_DENIED\", q = \"ERR_ALREADY_REQUESTING\", Wt = \"ERR_ALREADY_OPENED\", xr = \"ERR_ALREADY_MOUNTING\", Vr = \"ERR_VARS_ALREADY_BOUND\", Lr = \"ERR_NOT_AVAILABLE\", jr = \"ERR_NOT_INITIALIZED\", In = \"ERR_NOT_SUPPORTED\", Hr = \"ERR_NOT_MOUNTED\", Ur = \"ERR_FULLSCREEN_FAILED\", qr = \"ERR_EMOJI_STATUS_SET_FAILED\";\nfunction Dn() {\n  return typeof window > \"u\";\n}\n// @__NO_SIDE_EFFECTS__\nfunction h(e, t, { isSupported: n, isMounted: o, component: s, supports: r } = {}) {\n  const a = `${s ? `${s}.` : \"\"}${e}()`;\n  n = n ? Array.isArray(n) || typeof n == \"object\" && \"any\" in n ? n : [n] : void 0;\n  function i(g) {\n    if (r) {\n      const m = r[g];\n      return Q(m[0], m[1], V());\n    }\n    return !0;\n  }\n  const p = () => {\n    if (!n)\n      return;\n    const g = `it is unsupported in Mini Apps version ${V()}`;\n    function m($) {\n      return typeof $ == \"string\" ? Q($, V()) ? void 0 : g : $.fn() ? void 0 : $.error;\n    }\n    if (Array.isArray(n)) {\n      for (const $ of n) {\n        const Cn = m($);\n        if (Cn)\n          return Cn;\n      }\n      return;\n    }\n    let W;\n    for (const $ of n.any)\n      if (W = m($), !W)\n        return;\n    return g;\n  }, u = (...g) => {\n    if (r) {\n      for (const m in r)\n        if (r[m][2](...g) && !i(m))\n          return `option ${m} is not supported in Mini Apps version ${V()}`;\n    }\n  }, d = /* @__PURE__ */ _(() => !p()), w = /* @__PURE__ */ _(() => V() !== \"0.0\"), A = /* @__PURE__ */ _(() => !o || o()), x = /* @__PURE__ */ _(\n    () => Bn(\"simple\") && !Dn() && w() && d() && A()\n  );\n  let T;\n  if (r) {\n    T = {};\n    for (const g in r)\n      T[g] = /* @__PURE__ */ _(() => i(g));\n  }\n  return Object.assign(\n    (...g) => {\n      const m = `Unable to call the ${a} ${s ? \"method\" : \"function\"}:`;\n      if (Dn() || !Bn(\"simple\"))\n        throw new l(\n          go,\n          `${m} it can't be called outside Mini Apps`\n        );\n      if (!w())\n        throw new l(\n          jr,\n          `${m} the SDK was not initialized. Use the SDK init() function`\n        );\n      const W = p();\n      if (W)\n        throw new l(In, `${m} ${W}`);\n      const $ = u(...g);\n      if ($)\n        throw new l(In, `${m} ${$}`);\n      if (!A())\n        throw new l(\n          Hr,\n          `${m} the component is not mounted. Use the ${s}.mount() method`\n        );\n      return t(...g);\n    },\n    t,\n    {\n      isAvailable: x,\n      ifAvailable(...g) {\n        return x() ? t(...g) : void 0;\n      }\n    },\n    n ? {\n      isSupported: d\n    } : {},\n    T ? {\n      supports: T\n    } : {}\n  );\n}\nfunction We(e, t) {\n  return t || (t = {}), (n, o, s, r) => /* @__PURE__ */ h(n, o, {\n    ...t,\n    isSupported: s || t.isSupported,\n    supports: r,\n    component: e\n  });\n}\nfunction J(e, t, n) {\n  return We(e, { isSupported: n, isMounted: t });\n}\nfunction B(e, t) {\n  return We(e, { isSupported: t });\n}\nconst Ge = \"web_app_setup_back_button\", vo = \"back_button_pressed\", ze = \"backButton\", $t = /* @__PURE__ */ c(!1), me = /* @__PURE__ */ c(!1), Fr = N(Ge), To = J(ze, me, Ge), Gt = B(ze, Ge), Wr = To(\"hide\", () => {\n  zt(!1);\n}), Gr = Gt(\"mount\", () => {\n  me() || (zt(D() && P(ze) || !1), me.set(!0));\n});\nfunction zt(e) {\n  e !== $t() && (f(Ge, { is_visible: e }), O(ze, e), $t.set(e));\n}\nconst zr = Gt(\n  \"onClick\",\n  (e) => E(vo, e)\n), Qr = Gt(\n  \"offClick\",\n  (e) => {\n    v(vo, e);\n  }\n), Jr = To(\"show\", () => {\n  zt(!0);\n});\nfunction Yr() {\n  me.set(!1);\n}\nconst Hc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  hide: Wr,\n  isMounted: me,\n  isSupported: Fr,\n  isVisible: $t,\n  mount: Gr,\n  offClick: Qr,\n  onClick: zr,\n  show: Jr,\n  unmount: Yr\n}, Symbol.toStringTag, { value: \"Module\" }));\n// @__NO_SIDE_EFFECTS__\nfunction Re(e, t, n, o, s) {\n  const r = s === void 0 || s ? b : Promise;\n  return Object.assign((...a) => r.resolve().then(async () => {\n    if (n()) {\n      const p = t();\n      throw o.set(p), p;\n    }\n    Tt(() => {\n      n.set(\n        r.resolve(e(...a))\n      ), o.set(void 0);\n    });\n    let i;\n    try {\n      i = [!0, await n()];\n    } catch (p) {\n      i = [!1, p];\n    }\n    if (Tt(() => {\n      n.set(void 0), o.set(i[0] ? void 0 : i[1]);\n    }), !i[0])\n      throw i[1];\n    return i[1];\n  }), e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction $o(e, t, n, o, s, r) {\n  const a = /* @__PURE__ */ Re(\n    t,\n    () => new l(\n      xr,\n      `The ${e} component is already mounting`\n    ),\n    s,\n    r\n  );\n  return (i) => b.resolve().then(async () => {\n    if (!o()) {\n      const p = await a(i);\n      Tt(() => {\n        o.set(!0), n(p);\n      });\n    }\n  });\n}\nconst H = We, Qe = /* @__PURE__ */ c({ available: !1 }), Ie = /* @__PURE__ */ c(!1), De = /* @__PURE__ */ c(!1), Je = /* @__PURE__ */ c(!1), Kr = /* @__PURE__ */ _(() => !!Qt()), Ro = /* @__PURE__ */ c(), Qt = /* @__PURE__ */ c(), Zr = /* @__PURE__ */ _(() => {\n  const e = Qe();\n  return e && e.available;\n});\nfunction Jt(e) {\n  return e.available ? {\n    available: !0,\n    tokenSaved: e.token_saved,\n    deviceId: e.device_id,\n    accessRequested: e.access_requested,\n    type: e.type,\n    accessGranted: e.access_granted\n  } : {\n    available: !1\n  };\n}\nconst Nn = \"web_app_biometry_get_info\", Xr = /* @__PURE__ */ h(\n  \"requestBiometry\",\n  (e) => y(Nn, \"biometry_info_received\", e).then(Jt),\n  {\n    isSupported: Nn\n  }\n), Ye = \"web_app_biometry_request_auth\", ea = \"web_app_biometry_request_access\", ta = \"web_app_biometry_open_settings\", na = \"web_app_biometry_update_token\", Yt = \"biometry_info_received\", ee = \"biometry\", oa = N(Ye), sa = H(ee), ra = B(ee, Ye), Kt = J(ee, Je, Ye);\nfunction Oo() {\n  throw new l(Lr, \"Biometry is not available\");\n}\nconst aa = Kt(\n  \"authenticate\",\n  (e) => b.withFn(async (t) => {\n    if (Ie())\n      throw new l(q, \"Authentication is already in progress\");\n    const n = Qe();\n    (!n || !n.available) && Oo(), Ie.set(!0);\n    try {\n      const o = await y(\n        Ye,\n        \"biometry_auth_requested\",\n        {\n          abortSignal: t,\n          params: {\n            reason: ((e || {}).reason || \"\").trim()\n          }\n        }\n      ), { token: s } = o;\n      return typeof s == \"string\" && Ke({ ...n, token: s }), o;\n    } finally {\n      Ie.set(!1);\n    }\n  }, e)\n), ia = ra(\"openSettings\", () => {\n  f(ta);\n}), ca = Kt(\n  \"requestAccess\",\n  (e) => b.withFn(async (t) => {\n    if (De())\n      throw new l(q, \"Access request is already in progress\");\n    De.set(!0);\n    try {\n      const n = await y(ea, Yt, {\n        abortSignal: t,\n        params: { reason: (e || {}).reason || \"\" }\n      }).then(Jt);\n      return n.available || Oo(), Ke(n), n.accessGranted;\n    } finally {\n      De.set(!1);\n    }\n  }, e)\n), ua = sa(\"mount\", /* @__PURE__ */ $o(\n  ee,\n  (e) => {\n    const t = D() && P(ee);\n    return t || Xr(e);\n  },\n  (e) => {\n    E(Yt, Po), Ke(e);\n  },\n  Je,\n  Qt,\n  Ro\n)), Po = (e) => {\n  Ke(Jt(e));\n};\nfunction Ke(e) {\n  Qe.set(e), O(ee, e);\n}\nfunction la() {\n  v(Yt, Po), Je.set(!1);\n}\nconst pa = Kt(\n  \"updateToken\",\n  (e) => (e || (e = {}), y(na, \"biometry_token_updated\", {\n    ...e,\n    params: {\n      token: e.token || \"\",\n      reason: e.reason\n    }\n  }).then((t) => t.status))\n), Uc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  authenticate: aa,\n  isAuthenticating: Ie,\n  isAvailable: Zr,\n  isMounted: Je,\n  isMounting: Kr,\n  isRequestingAccess: De,\n  isSupported: oa,\n  mount: ua,\n  mountError: Ro,\n  mountPromise: Qt,\n  openSettings: ia,\n  requestAccess: ca,\n  state: Qe,\n  unmount: la,\n  updateToken: pa\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction Ze(e, t) {\n  return We(e, { isMounted: t });\n}\nconst Xe = \"closingBehavior\", Rt = /* @__PURE__ */ c(!1), he = /* @__PURE__ */ c(!1), Bo = Ze(Xe, he), _a = H(Xe), fa = Bo(\"disableConfirmation\", () => {\n  Zt(!1);\n}), da = Bo(\"enableConfirmation\", () => {\n  Zt(!0);\n}), ma = _a(\"mount\", () => {\n  he() || (Zt(\n    D() && P(Xe) || !1\n  ), he.set(!0));\n});\nfunction Zt(e) {\n  e !== Rt() && (f(\"web_app_setup_closing_behavior\", { need_confirmation: e }), O(Xe, e), Rt.set(e));\n}\nfunction ha() {\n  he.set(!1);\n}\nconst qc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  disableConfirmation: fa,\n  enableConfirmation: da,\n  isConfirmationEnabled: Rt,\n  isMounted: he,\n  mount: ma,\n  unmount: ha\n}, Symbol.toStringTag, { value: \"Module\" })), Mo = \"web_app_invoke_custom_method\", et = B(\"cloudStorage\", Mo), ba = N(Mo), ga = et(\"deleteItem\", (e, t) => {\n  const n = Array.isArray(e) ? e : [e];\n  return n.length ? se(\"deleteStorageValues\", { keys: n }, t).then() : b.resolve();\n});\nfunction Ea(e, t) {\n  const n = Array.isArray(e) ? e : [e];\n  return n.length ? se(\"getStorageValues\", { keys: n }, t).then((o) => {\n    const s = He(\n      Object.fromEntries(n.map((r) => [r, L()]))\n    )()(o);\n    return Array.isArray(e) ? s : s[e];\n  }) : b.resolve(typeof e == \"string\" ? \"\" : {});\n}\nconst wa = et(\"getItem\", Ea), Sa = et(\"getKeys\", (e) => se(\"getStorageKeys\", {}, e).then(js(L())())), ya = et(\"setItem\", (e, t, n) => se(\"saveStorageValue\", {\n  key: e,\n  value: t\n}, n).then()), Fc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  deleteItem: ga,\n  getItem: wa,\n  getKeys: Sa,\n  isSupported: ba,\n  setItem: ya\n}, Symbol.toStringTag, { value: \"Module\" })), Oe = \"web_app_trigger_haptic_feedback\", Xt = B(\"hapticFeedback\", Oe), Aa = N(Oe), Ca = Xt(\n  \"impactOccurred\",\n  (e) => {\n    f(Oe, {\n      type: \"impact\",\n      impact_style: e\n    });\n  }\n), va = Xt(\n  \"notificationOccurred\",\n  (e) => {\n    f(Oe, {\n      type: \"notification\",\n      notification_type: e\n    });\n  }\n), Ta = Xt(\n  \"selectionChanged\",\n  () => {\n    f(Oe, { type: \"selection_change\" });\n  }\n), Wc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  impactOccurred: Ca,\n  isSupported: Aa,\n  notificationOccurred: va,\n  selectionChanged: Ta\n}, Symbol.toStringTag, { value: \"Module\" })), en = /* @__PURE__ */ c(void 0);\nfunction k(e) {\n  return /* @__PURE__ */ _(() => {\n    const t = en();\n    return t ? t[e] : void 0;\n  });\n}\nconst Io = k(\"authDate\"), Do = k(\"canSendAfter\"), $a = /* @__PURE__ */ _(() => {\n  const e = Io(), t = Do();\n  return t && e ? new Date(e.getTime() + t * 1e3) : void 0;\n}), Ra = k(\"chat\"), Oa = k(\"chatType\"), Pa = k(\"chatInstance\"), Ba = k(\"hash\"), Ma = k(\"queryId\"), No = /* @__PURE__ */ c(), Ia = k(\"receiver\");\nfunction Da() {\n  const e = oe();\n  en.set(e.initData), No.set(e.initDataRaw);\n}\nconst Na = k(\"startParam\"), ka = k(\"user\"), Gc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  authDate: Io,\n  canSendAfter: Do,\n  canSendAfterDate: $a,\n  chat: Ra,\n  chatInstance: Pa,\n  chatType: Oa,\n  hash: Ba,\n  queryId: Ma,\n  raw: No,\n  receiver: Ia,\n  restore: Da,\n  startParam: Na,\n  state: en,\n  user: ka\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction zc(e) {\n  return ks()(e);\n}\nconst tn = \"web_app_open_invoice\", xa = B(\"invoice\", tn), Ne = /* @__PURE__ */ c(!1), Va = N(tn);\nasync function ko(e, t, n) {\n  if (Ne())\n    throw new l(Wt, \"An invoice is already opened\");\n  let o;\n  if (t === \"url\") {\n    const { hostname: s, pathname: r } = new URL(e, window.location.href);\n    if (s !== \"t.me\")\n      throw new l(Ft, `Link has unexpected hostname: ${s}`);\n    const a = r.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!a)\n      throw new l(\n        Dr,\n        'Expected to receive a link with a pathname in format \"/invoice/{slug}\" or \"/${slug}\"'\n      );\n    [, , o] = a;\n  } else\n    o = e, n = t;\n  return Ne.set(!0), y(tn, \"invoice_closed\", {\n    ...n,\n    params: { slug: o },\n    capture: (s) => o === s.slug\n  }).then((s) => s.status).finally(() => {\n    Ne.set(!1);\n  });\n}\nconst La = xa(\"open\", ko), Qc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  _open: ko,\n  isOpened: Ne,\n  isSupported: Va,\n  open: La\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction xo(e) {\n  return Object.fromEntries(\n    Object.entries(e).filter((t) => t[1] !== void 0)\n  );\n}\nfunction Vo(e) {\n  const t = Zn(e);\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce((n, o, s) => {\n      const r = parseInt(t.slice(1 + s * 2, 1 + (s + 1) * 2), 16);\n      return n + r * r * o;\n    }, 0)\n  ) < 120;\n}\nconst be = /* @__PURE__ */ c(!1), ke = /* @__PURE__ */ c(!1), U = /* @__PURE__ */ c({});\nfunction C(e) {\n  return /* @__PURE__ */ _(() => U()[e]);\n}\nconst ja = C(\"accentTextColor\"), nn = C(\"bgColor\"), on = C(\"buttonColor\"), Lo = C(\"buttonTextColor\"), jo = C(\"bottomBarBgColor\"), Ha = C(\"destructiveTextColor\"), Ua = C(\"headerBgColor\"), qa = C(\"hintColor\"), Fa = /* @__PURE__ */ _(() => {\n  const { bgColor: e } = U();\n  return !e || Vo(e);\n}), Wa = C(\"linkColor\"), Fe = C(\"secondaryBgColor\"), Ga = C(\"sectionBgColor\"), za = C(\"sectionHeaderTextColor\"), Qa = C(\"sectionSeparatorColor\"), Ja = C(\"subtitleTextColor\"), Ya = C(\"textColor\");\nfunction Y(e) {\n  return /* @__PURE__ */ _(() => sn()[e]);\n}\nconst le = /* @__PURE__ */ c({\n  hasShineEffect: !1,\n  isEnabled: !0,\n  isLoaderVisible: !1,\n  isVisible: !1,\n  text: \"Continue\"\n}), sn = /* @__PURE__ */ _(() => {\n  const e = le();\n  return {\n    ...e,\n    backgroundColor: e.backgroundColor || on() || \"#2481cc\",\n    textColor: e.textColor || Lo() || \"#ffffff\"\n  };\n}), ge = /* @__PURE__ */ c(!1), Ka = Y(\"backgroundColor\"), Za = Y(\"hasShineEffect\"), Xa = Y(\"isEnabled\"), ei = Y(\"isLoaderVisible\"), ti = Y(\"isVisible\"), ni = Y(\"text\"), oi = Y(\"textColor\"), si = \"web_app_setup_main_button\", Ho = \"main_button_pressed\", tt = \"mainButton\", rn = H(tt), ri = Ze(tt, ge), ai = rn(\"mount\", () => {\n  if (!ge()) {\n    const e = D() && P(tt);\n    e && le.set(e), ge.set(!0);\n  }\n}), ii = rn(\n  \"onClick\",\n  (e) => E(Ho, e)\n), ci = rn(\n  \"offClick\",\n  (e) => {\n    v(Ho, e);\n  }\n), ui = ri(\n  \"setParams\",\n  (e) => {\n    le.set({ ...le(), ...xo(e) }), O(tt, le());\n    const t = sn();\n    t.text && f(si, {\n      color: t.backgroundColor,\n      has_shine_effect: t.hasShineEffect,\n      is_active: t.isEnabled,\n      is_progress_visible: t.isLoaderVisible,\n      is_visible: t.isVisible,\n      text: t.text,\n      text_color: t.textColor\n    });\n  }\n);\nfunction li() {\n  ge.set(!1);\n}\nconst Jc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  backgroundColor: Ka,\n  hasShineEffect: Za,\n  isEnabled: Xa,\n  isLoaderVisible: ei,\n  isMounted: ge,\n  isVisible: ti,\n  mount: ai,\n  offClick: ci,\n  onClick: ii,\n  setParams: ui,\n  state: sn,\n  text: ni,\n  textColor: oi,\n  unmount: li\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction an() {\n  throw new l(\n    Vr,\n    \"CSS variables are already bound\"\n  );\n}\nfunction pi(e) {\n  return Ls()(e);\n}\nconst nt = \"themeParams\", Uo = \"theme_changed\", _i = H(nt), fi = Ze(nt, be), di = fi(\n  \"bindCssVars\",\n  (e) => {\n    ke() && an(), e || (e = (o) => `--tg-theme-${xt(o)}`);\n    function t(o) {\n      Object.entries(U()).forEach(([s, r]) => {\n        r && o(s, r);\n      });\n    }\n    function n() {\n      t((o, s) => {\n        Vt(e(o), s);\n      });\n    }\n    return n(), U.sub(n), ke.set(!0), () => {\n      t(Lt), U.unsub(n), ke.set(!1);\n    };\n  }\n), qo = _i(\"mount\", () => {\n  be() || (E(Uo, Fo), U.set(\n    D() && P(nt) || oe().themeParams\n  ), be.set(!0));\n}), Fo = (e) => {\n  const t = pi(e.theme_params);\n  U.set(t), O(nt, t);\n};\nfunction mi() {\n  v(Uo, Fo), be.set(!1);\n}\n// @__NO_SIDE_EFFECTS__\nfunction Wo(e) {\n  return /* @__PURE__ */ _(() => {\n    const t = e();\n    return fe(t) ? t : t === \"bg_color\" ? nn() : Fe();\n  });\n}\nconst Ee = /* @__PURE__ */ c(\"bg_color\"), cn = /* @__PURE__ */ Wo(Ee), we = /* @__PURE__ */ c(\"bottom_bar_bg_color\"), un = /* @__PURE__ */ _(() => {\n  const e = we();\n  return fe(e) ? e : e === \"bottom_bar_bg_color\" ? jo() || Fe() : e === \"secondary_bg_color\" ? Fe() : nn();\n}), Se = /* @__PURE__ */ c(\"bg_color\"), Go = /* @__PURE__ */ Wo(Se), ye = /* @__PURE__ */ c(!1), xe = /* @__PURE__ */ c(!1), hi = /* @__PURE__ */ _(() => {\n  const e = cn();\n  return e ? Vo(e) : !1;\n}), ot = /* @__PURE__ */ c(!0), zo = /* @__PURE__ */ _(() => ({\n  backgroundColor: Ee(),\n  bottomBarColor: we(),\n  headerColor: Se(),\n  isActive: ot()\n})), Ot = \"web_app_set_background_color\", Pt = \"web_app_set_bottom_bar_color\", Ve = \"web_app_set_header_color\", Qo = \"visibility_changed\", Pe = \"miniApp\", ln = {\n  any: [\n    Ot,\n    Pt,\n    Ve\n  ]\n}, bi = /* @__PURE__ */ _(() => ln.any.some((e) => Q(e, V()))), Jo = H(Pe), gi = B(Pe, ln), st = J(Pe, ye, ln), Ei = st(\n  \"bindCssVars\",\n  (e) => {\n    xe() && an();\n    const [t, n] = te();\n    function o(s, r) {\n      function a() {\n        Vt(s, r() || null);\n      }\n      a(), t(r.sub(a), Lt.bind(null, s));\n    }\n    return e || (e = (s) => `--tg-${xt(s)}`), o(e(\"bgColor\"), cn), o(e(\"bottomBarColor\"), un), o(e(\"headerColor\"), Go), t(() => {\n      xe.set(!1);\n    }), xe.set(!0), n;\n  }\n), wi = Jo(\"close\", (e) => {\n  f(\"web_app_close\", { return_back: e });\n}), Yo = (e) => {\n  ot.set(e.is_visible), rt();\n}, Si = gi(\n  \"mount\",\n  () => {\n    if (!ye()) {\n      const e = D() && P(Pe);\n      qo(), Ko.ifAvailable(e ? e.backgroundColor : \"bg_color\"), Zo.ifAvailable(e ? e.bottomBarColor : \"bottom_bar_bg_color\"), Xo.ifAvailable(e ? e.headerColor : \"bg_color\"), ot.set(e ? e.isActive : !0), E(Qo, Yo), ye.set(!0);\n    }\n  }\n), yi = Jo(\"ready\", () => {\n  f(\"web_app_ready\");\n});\nfunction rt() {\n  O(Pe, zo());\n}\nconst Ko = st(\n  \"setBackgroundColor\",\n  (e) => {\n    e !== Ee() && (f(Ot, { color: e }), Ee.set(e), rt());\n  },\n  Ot\n), Zo = st(\n  \"setBottomBarColor\",\n  (e) => {\n    e !== we() && (f(Pt, { color: e }), we.set(e), rt());\n  },\n  Pt\n), Xo = st(\n  \"setHeaderColor\",\n  (e) => {\n    e !== Se() && (f(Ve, fe(e) ? { color: e } : { color_key: e }), Se.set(e), rt());\n  },\n  Ve,\n  {\n    rgb: [Ve, \"color\", fe]\n  }\n);\nfunction Ai() {\n  v(Qo, Yo), ye.set(!1);\n}\nconst Yc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  backgroundColor: Ee,\n  backgroundColorRGB: cn,\n  bindCssVars: Ei,\n  bottomBarColor: we,\n  bottomBarColorRGB: un,\n  close: wi,\n  headerColor: Se,\n  headerColorRGB: Go,\n  isActive: ot,\n  isCssVarsBound: xe,\n  isDark: hi,\n  isMounted: ye,\n  isSupported: bi,\n  mount: Si,\n  ready: yi,\n  setBackgroundColor: Ko,\n  setBottomBarColor: Zo,\n  setHeaderColor: Xo,\n  state: zo,\n  unmount: Ai\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction Ci(e) {\n  const t = e.message.trim(), n = (e.title || \"\").trim(), o = e.buttons || [];\n  if (n.length > 64)\n    throw new l(ce, `Invalid title: ${n}`);\n  if (!t || t.length > 256)\n    throw new l(ce, `Invalid message: ${t}`);\n  if (o.length > 3)\n    throw new l(ce, `Invalid buttons count: ${o.length}`);\n  return {\n    title: n,\n    message: t,\n    buttons: o.length ? o.map((s, r) => {\n      const a = s.id || \"\";\n      if (a.length > 64)\n        throw new l(ce, `Button with index ${r} has invalid id: ${a}`);\n      if (!s.type || s.type === \"default\" || s.type === \"destructive\") {\n        const i = s.text.trim();\n        if (!i || i.length > 64)\n          throw new l(ce, `Button with index ${r} has invalid text: ${i}`);\n        return { type: s.type, text: i, id: a };\n      }\n      return { type: s.type, id: a };\n    }) : [{ type: \"close\", id: \"\" }]\n  };\n}\nconst pn = \"web_app_open_popup\", vi = B(\"popup\", pn), Le = /* @__PURE__ */ c(!1), Ti = N(pn), $i = vi(\n  \"open\",\n  async (e) => {\n    if (Le())\n      throw new l(Wt, \"A popup is already opened\");\n    Le.set(!0);\n    try {\n      const { button_id: t = null } = await y(pn, \"popup_closed\", {\n        ...e,\n        params: Ci(e)\n      });\n      return t;\n    } finally {\n      Le.set(!1);\n    }\n  }\n), Kc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  isOpened: Le,\n  isSupported: Ti,\n  open: $i\n}, Symbol.toStringTag, { value: \"Module\" })), Ri = \"web_app_close_scan_qr_popup\", _n = \"web_app_open_scan_qr_popup\", Oi = \"scan_qr_popup_closed\", Pi = \"qr_text_received\", es = B(\"qrScanner\", _n), Bt = es(\"close\", () => {\n  X.set(!1), f(Ri);\n}), X = /* @__PURE__ */ c(!1), Bi = N(_n);\nfunction Mi(e) {\n  return b.withFn((t) => {\n    if (X())\n      throw new l(Wt, \"The QR Scanner is already opened\");\n    X.set(!0), e || (e = {});\n    const { onCaptured: n, text: o, capture: s } = e, [, r] = te(\n      // Whenever the scanner was closed for some reason (by a developer or a\n      // user), we should resolve the promise with undefined.\n      X.sub(() => {\n        a.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      E(Oi, () => {\n        X.set(!1);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      E(Pi, (i) => {\n        n ? n(i.data) : (!s || s(i.data)) && (a.resolve(i.data), Bt());\n      })\n    ), a = new rr({ abortSignal: t }).catch(Bt).finally(r);\n    return (e.postEvent || f)(_n, { text: o }), a;\n  }, e);\n}\nconst Ii = es(\"open\", Mi), Zc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  close: Bt,\n  isOpened: X,\n  isSupported: Bi,\n  open: Ii\n}, Symbol.toStringTag, { value: \"Module\" }));\nfunction F(e) {\n  return /* @__PURE__ */ _(() => fn()[e]);\n}\nconst pe = /* @__PURE__ */ c({\n  hasShineEffect: !1,\n  isEnabled: !0,\n  isLoaderVisible: !1,\n  isVisible: !1,\n  position: \"left\",\n  text: \"Cancel\"\n}), fn = /* @__PURE__ */ _(() => {\n  const e = pe();\n  return {\n    ...e,\n    backgroundColor: e.backgroundColor || un() || \"#000000\",\n    textColor: e.textColor || on() || \"#2481cc\"\n  };\n}), Ae = /* @__PURE__ */ c(!1), Di = F(\"backgroundColor\"), Ni = F(\"hasShineEffect\"), ki = F(\"isEnabled\"), xi = F(\"isLoaderVisible\"), Vi = F(\"isVisible\"), Li = F(\"position\"), ji = F(\"text\"), Hi = F(\"textColor\"), at = \"web_app_setup_secondary_button\", ts = \"secondary_button_pressed\", it = \"secondaryButton\", dn = B(it, at), Ui = J(it, Ae, at), qi = N(at), Fi = dn(\"mount\", () => {\n  if (!Ae()) {\n    const e = D() && P(it);\n    e && pe.set(e), Ae.set(!0);\n  }\n}), Wi = dn(\n  \"onClick\",\n  (e) => E(ts, e)\n), Gi = dn(\n  \"offClick\",\n  (e) => {\n    v(ts, e);\n  }\n), zi = Ui(\n  \"setParams\",\n  (e) => {\n    pe.set({\n      ...pe(),\n      ...Object.fromEntries(\n        Object.entries(e).filter(([, n]) => n !== void 0)\n      )\n    }), O(it, pe());\n    const t = fn();\n    t.text && f(at, {\n      color: t.backgroundColor,\n      has_shine_effect: t.hasShineEffect,\n      is_active: t.isEnabled,\n      is_progress_visible: t.isLoaderVisible,\n      is_visible: t.isVisible,\n      position: t.position,\n      text: t.text,\n      text_color: t.textColor\n    });\n  }\n);\nfunction Qi() {\n  Ae.set(!1);\n}\nconst Xc = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  backgroundColor: Di,\n  hasShineEffect: Ni,\n  isEnabled: ki,\n  isLoaderVisible: xi,\n  isMounted: Ae,\n  isSupported: qi,\n  isVisible: Vi,\n  mount: Fi,\n  offClick: Gi,\n  onClick: Wi,\n  position: Li,\n  setParams: zi,\n  state: fn,\n  text: ji,\n  textColor: Hi,\n  unmount: Qi\n}, Symbol.toStringTag, { value: \"Module\" })), ct = \"web_app_setup_settings_button\", ns = \"settings_button_pressed\", ut = \"settingsButton\", Mt = /* @__PURE__ */ c(!1), Ce = /* @__PURE__ */ c(!1), Ji = N(ct), mn = B(ut, ct), os = J(ut, Ce, ct), Yi = os(\"hide\", () => {\n  hn(!1);\n}), Ki = mn(\"mount\", () => {\n  Ce() || (hn(D() && P(ut) || !1), Ce.set(!0));\n});\nfunction hn(e) {\n  e !== Mt() && (f(ct, { is_visible: e }), O(ut, e), Mt.set(e));\n}\nconst Zi = mn(\n  \"onClick\",\n  (e) => E(ns, e)\n), Xi = mn(\n  \"offClick\",\n  (e) => {\n    v(ns, e);\n  }\n), ec = os(\"show\", () => {\n  hn(!0);\n});\nfunction tc() {\n  Ce.set(!1);\n}\nconst eu = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  hide: Yi,\n  isMounted: Ce,\n  isSupported: Ji,\n  isVisible: Mt,\n  mount: Ki,\n  offClick: Xi,\n  onClick: Zi,\n  show: ec,\n  unmount: tc\n}, Symbol.toStringTag, { value: \"Module\" })), lt = \"web_app_setup_swipe_behavior\", pt = \"swipeBehavior\", ve = /* @__PURE__ */ c(!1), nc = N(lt), It = /* @__PURE__ */ c(!0), oc = B(pt, lt), ss = J(pt, ve, lt), sc = ss(\"disableVertical\", () => {\n  bn(!1);\n}), rc = ss(\"enableVertical\", () => {\n  bn(!0);\n}), ac = oc(\"mount\", () => {\n  ve() || (bn(\n    D() && P(pt) || !1,\n    !0\n  ), ve.set(!0));\n});\nfunction bn(e, t) {\n  (e !== It() || t) && (f(lt, { allow_vertical_swipe: e }), O(pt, e), It.set(e));\n}\nfunction ic() {\n  ve.set(!1);\n}\nconst tu = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  disableVertical: sc,\n  enableVertical: rc,\n  isMounted: ve,\n  isSupported: nc,\n  isVerticalEnabled: It,\n  mount: ac,\n  unmount: ic\n}, Symbol.toStringTag, { value: \"Module\" })), nu = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  accentTextColor: ja,\n  backgroundColor: nn,\n  bindCssVars: di,\n  bottomBarBgColor: jo,\n  buttonColor: on,\n  buttonTextColor: Lo,\n  destructiveTextColor: Ha,\n  headerBackgroundColor: Ua,\n  hintColor: qa,\n  isCssVarsBound: ke,\n  isDark: Fa,\n  isMounted: be,\n  linkColor: Wa,\n  mount: qo,\n  secondaryBackgroundColor: Fe,\n  sectionBackgroundColor: Ga,\n  sectionHeaderTextColor: za,\n  sectionSeparatorColor: Qa,\n  state: U,\n  subtitleTextColor: Ja,\n  textColor: Ya,\n  unmount: mi\n}, Symbol.toStringTag, { value: \"Module\" })), re = \"viewport\", rs = \"web_app_request_fullscreen\", cc = \"fullscreen_failed\", gn = \"fullscreen_changed\", as = \"safe_area_changed\", is = \"content_safe_area_changed\", cs = \"viewport_changed\", kn = \"web_app_request_safe_area\", xn = \"web_app_request_content_safe_area\", Vn = {\n  left: 0,\n  top: 0,\n  bottom: 0,\n  right: 0\n};\nfunction Et(e) {\n  return Math.max(e, 0);\n}\nconst _e = /* @__PURE__ */ c({\n  contentSafeAreaInsets: Vn,\n  height: 0,\n  isExpanded: !1,\n  isFullscreen: !1,\n  safeAreaInsets: Vn,\n  stableHeight: 0,\n  width: 0\n});\nfunction K(e) {\n  return /* @__PURE__ */ _(() => _e()[e]);\n}\nfunction ae(e) {\n  const { height: t, stableHeight: n, width: o } = e;\n  _e.set({\n    ..._e(),\n    ...xo({\n      ...e,\n      height: t ? Et(t) : void 0,\n      width: o ? Et(o) : void 0,\n      stableHeight: n ? Et(n) : void 0\n    })\n  }), O(re, _e());\n}\nfunction uc() {\n  return P(re);\n}\nconst us = K(\"isFullscreen\"), En = /* @__PURE__ */ c(), lc = /* @__PURE__ */ _(() => !!En()), ls = /* @__PURE__ */ c(), Be = /* @__PURE__ */ c(!1), pc = /* @__PURE__ */ _(() => !!_t()), ps = /* @__PURE__ */ c(void 0), _t = /* @__PURE__ */ c(), _c = J(re, Be, rs);\nfunction _s(e, t) {\n  return _c(e, /* @__PURE__ */ Re(\n    (n) => y(t, [gn, cc], n).then((o) => {\n      if (\"error\" in o) {\n        if (o.error === \"ALREADY_FULLSCREEN\")\n          return !0;\n        throw new l(Ur, \"Fullscreen request failed\", o.error);\n      }\n      return o.is_fullscreen;\n    }).then((o) => {\n      o !== us() && ae({ isFullscreen: o });\n    }),\n    () => new l(q, \"Fullscreen mode change is already being requested\"),\n    En,\n    ls\n  ));\n}\nconst fc = _s(\"requestFullscreen\", rs), dc = _s(\"exitFullscreen\", \"web_app_exit_fullscreen\"), fs = H(re), mc = Ze(re, Be);\nfunction ft(e) {\n  return /* @__PURE__ */ _(() => wn()[e]);\n}\nconst wn = K(\"safeAreaInsets\"), ds = ft(\"bottom\"), ms = ft(\"left\"), hs = ft(\"right\"), bs = ft(\"top\");\nfunction dt(e) {\n  return /* @__PURE__ */ _(() => Sn()[e]);\n}\nconst Sn = K(\"contentSafeAreaInsets\"), gs = dt(\"bottom\"), Es = dt(\"left\"), ws = dt(\"right\"), Ss = dt(\"top\"), hc = /* @__PURE__ */ h(\n  \"requestContentSafeAreaInsets\",\n  (e) => y(xn, \"content_safe_area_changed\", e),\n  { isSupported: xn }\n), bc = /* @__PURE__ */ h(\n  \"requestSafeAreaInsets\",\n  (e) => y(kn, \"safe_area_changed\", e),\n  { isSupported: kn }\n);\nfunction gc(e) {\n  return y(\"web_app_request_viewport\", \"viewport_changed\", e).then((t) => ({\n    height: t.height,\n    width: t.width,\n    isExpanded: t.is_expanded,\n    isStable: t.is_state_stable\n  }));\n}\nconst ys = (e) => {\n  const { height: t } = e;\n  ae({\n    isExpanded: e.is_expanded,\n    height: t,\n    width: e.width,\n    stableHeight: e.is_state_stable ? t : void 0\n  });\n}, As = (e) => {\n  ae({ isFullscreen: e.is_fullscreen });\n}, Cs = (e) => {\n  ae({ safeAreaInsets: e });\n}, vs = (e) => {\n  ae({ contentSafeAreaInsets: e });\n}, Ec = fs(\"mount\", /* @__PURE__ */ $o(\n  re,\n  (e) => b.resolve().then(async () => {\n    const t = D() && uc();\n    if (t)\n      return t;\n    const [\n      n,\n      o\n    ] = await b.all([\n      bc.ifAvailable(e) || wn(),\n      hc.ifAvailable(e) || Sn()\n    ]), s = oe(), r = {\n      contentSafeAreaInsets: o,\n      isFullscreen: !!s.fullscreen,\n      safeAreaInsets: n\n    };\n    if ([\"macos\", \"tdesktop\", \"unigram\", \"webk\", \"weba\", \"web\"].includes(s.platform)) {\n      const a = window;\n      return {\n        ...r,\n        height: a.innerHeight,\n        isExpanded: !0,\n        stableHeight: a.innerHeight,\n        width: a.innerWidth\n      };\n    }\n    return gc(e).then((a) => ({\n      ...r,\n      height: a.height,\n      isExpanded: a.isExpanded,\n      stableHeight: a.isStable ? a.height : 0,\n      width: a.width\n    }));\n  }),\n  (e) => {\n    E(cs, ys), E(gn, As), E(as, Cs), E(is, vs), ae(e);\n  },\n  Be,\n  _t,\n  ps\n));\nfunction wc() {\n  const e = _t();\n  e && e.cancel(), v(cs, ys), v(gn, As), v(as, Cs), v(is, vs), Be.set(!1);\n}\nconst je = /* @__PURE__ */ c(!1), yn = K(\"height\"), An = K(\"stableHeight\"), Ts = K(\"width\"), Sc = mc(\n  \"bindCssVars\",\n  (e) => {\n    je() && an(), e || (e = (n) => `--tg-viewport-${xt(n)}`);\n    const t = [\n      [\"height\", yn],\n      [\"stableHeight\", An],\n      [\"width\", Ts],\n      [\"safeAreaInsetTop\", bs],\n      [\"safeAreaInsetBottom\", ds],\n      [\"safeAreaInsetLeft\", ms],\n      [\"safeAreaInsetRight\", hs],\n      [\"contentSafeAreaInsetTop\", Ss],\n      [\"contentSafeAreaInsetBottom\", gs],\n      [\"contentSafeAreaInsetLeft\", Es],\n      [\"contentSafeAreaInsetRight\", ws]\n    ].reduce((n, [o, s]) => {\n      const r = e(o);\n      if (r) {\n        const a = () => {\n          Vt(r, `${s()}px`);\n        };\n        n.push([a, s.sub(a), r]);\n      }\n      return n;\n    }, []);\n    return t.forEach((n) => {\n      n[0]();\n    }), je.set(!0), () => {\n      t.forEach((n) => {\n        n[1](), Lt(n[2]);\n      }), je.set(!1);\n    };\n  }\n), yc = fs(\"expand\", () => {\n  f(\"web_app_expand\");\n}), Ac = K(\"isExpanded\"), Cc = /* @__PURE__ */ _(() => yn() === An()), ou = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  bindCssVars: Sc,\n  changeFullscreenError: ls,\n  changeFullscreenPromise: En,\n  contentSafeAreaInsetBottom: gs,\n  contentSafeAreaInsetLeft: Es,\n  contentSafeAreaInsetRight: ws,\n  contentSafeAreaInsetTop: Ss,\n  contentSafeAreaInsets: Sn,\n  exitFullscreen: dc,\n  expand: yc,\n  height: yn,\n  isChangingFullscreen: lc,\n  isCssVarsBound: je,\n  isExpanded: Ac,\n  isFullscreen: us,\n  isMounted: Be,\n  isMounting: pc,\n  isStable: Cc,\n  mount: Ec,\n  mountError: ps,\n  mountPromise: _t,\n  requestFullscreen: fc,\n  safeAreaInsetBottom: ds,\n  safeAreaInsetLeft: ms,\n  safeAreaInsetRight: hs,\n  safeAreaInsetTop: bs,\n  safeAreaInsets: wn,\n  stableHeight: An,\n  state: _e,\n  unmount: wc,\n  width: Ts\n}, Symbol.toStringTag, { value: \"Module\" })), Ln = \"web_app_request_emoji_status_access\", $s = /* @__PURE__ */ c(), vc = /* @__PURE__ */ c(), su = /* @__PURE__ */ _(() => !!$s()), ru = /* @__PURE__ */ h(\n  \"requestEmojiStatusAccess\",\n  /* @__PURE__ */ Re(\n    () => y(Ln, \"emoji_status_access_requested\").then((e) => e.status),\n    () => new l(\n      q,\n      \"Emoji status access request is currently in progress\"\n    ),\n    $s,\n    vc,\n    !1\n  ),\n  { isSupported: Ln }\n), jn = \"web_app_set_emoji_status\", Rs = /* @__PURE__ */ c(), Tc = /* @__PURE__ */ c(), au = /* @__PURE__ */ _(() => !!Rs()), iu = /* @__PURE__ */ h(\n  \"setEmojiStatus\",\n  /* @__PURE__ */ Re(\n    async (e, t) => {\n      const n = await y(jn, [\"emoji_status_set\", \"emoji_status_failed\"], {\n        params: {\n          custom_emoji_id: e,\n          duration: t\n        }\n      });\n      if (n && \"error\" in n)\n        throw new l(qr, \"Failed to set emoji status\", n.error);\n    },\n    () => new l(\n      q,\n      \"Emoji status set request is currently in progress\"\n    ),\n    Rs,\n    Tc,\n    !1\n  ),\n  { isSupported: jn }\n), Os = \"web_app_add_to_home_screen\", ie = { isSupported: Os }, Ps = /* @__PURE__ */ c(), $c = /* @__PURE__ */ c(), cu = /* @__PURE__ */ _(() => !!Ps()), uu = /* @__PURE__ */ h(\n  \"addToHomeScreen\",\n  () => {\n    f(Os);\n  },\n  ie\n), lu = /* @__PURE__ */ h(\n  \"checkHomeScreenStatus\",\n  /* @__PURE__ */ Re(\n    (e) => y(\"web_app_check_home_screen\", \"home_screen_checked\", e).then((t) => t.status || \"unknown\"),\n    () => new l(\n      q,\n      \"Check home screen status request is currently in progress\"\n    ),\n    Ps,\n    $c\n  ),\n  ie\n), pu = /* @__PURE__ */ h(\n  \"onAddedToHomeScreen\",\n  (e, t) => E(\"home_screen_added\", e, t),\n  ie\n), _u = /* @__PURE__ */ h(\n  \"onAddToHomeScreenFailed\",\n  (e, t) => E(\"home_screen_failed\", e, t),\n  ie\n), fu = /* @__PURE__ */ h(\n  \"offAddedToHomeScreen\",\n  (e) => {\n    v(\"home_screen_added\", e);\n  },\n  ie\n), du = /* @__PURE__ */ h(\n  \"offAddToHomeScreenFailed\",\n  (e) => {\n    v(\"home_screen_failed\", e);\n  },\n  ie\n), Rc = H(), mu = Rc(\n  \"openLink\",\n  (e, t) => {\n    if (typeof e == \"string\")\n      try {\n        e = new URL(e);\n      } catch (n) {\n        throw new l(Ft, `\"${e.toString()}\" is invalid URL`, n);\n      }\n    t || (t = {}), f(\"web_app_open_link\", {\n      url: e.toString(),\n      try_browser: t.tryBrowser,\n      try_instant_view: t.tryInstantView\n    });\n  }\n), Hn = \"web_app_open_tg_link\", Oc = H(), Pc = Oc(\n  \"openTelegramLink\",\n  (e) => {\n    const t = e.toString();\n    if (!t.match(/^https:\\/\\/t.me\\/.+/))\n      throw new l(Ft, `\"${t}\" is invalid URL`);\n    if (!Q(Hn, V())) {\n      window.location.href = t;\n      return;\n    }\n    e = new URL(e), f(Hn, { path_full: e.pathname + e.search });\n  }\n), Bc = H(), hu = Bc(\n  \"shareURL\",\n  (e, t) => {\n    Pc(\n      \"https://t.me/share/url?\" + new URLSearchParams({ url: e, text: t || \"\" }).toString().replace(/\\+/g, \"%20\")\n    );\n  }\n), Dt = \"web_app_request_phone\", wt = /* @__PURE__ */ c(!1), Mc = /* @__PURE__ */ h(\n  \"requestPhoneAccess\",\n  (e) => {\n    if (wt())\n      throw new l(q, \"Phone access request is currently in progress\");\n    return wt.set(!0), y(Dt, \"phone_requested\", e).then((t) => t.status).finally(() => {\n      wt.set(!1);\n    });\n  },\n  {\n    isSupported: Dt\n  }\n);\nfunction Un(e) {\n  return e || (e = {}), se(\"getRequestedContact\", {}, {\n    ...e,\n    timeout: e.timeout || 5e3\n  }).then(\n    Kn({\n      contact: He({\n        userId: [\"user_id\", Ue()],\n        phoneNumber: [\"phone_number\", L()],\n        firstName: [\"first_name\", L()],\n        lastName: [\"last_name\", L(!0)]\n      })(),\n      authDate: [\"auth_date\", Nt()],\n      hash: L()\n    })()\n  );\n}\nconst bu = /* @__PURE__ */ h(\n  \"requestContact\",\n  (e) => b.withFn(\n    async (t) => {\n      const n = { abortSignal: t };\n      try {\n        return await Un(n);\n      } catch {\n      }\n      if (await Mc(n) !== \"sent\")\n        throw new l(kr, \"User denied access\");\n      let s = 50;\n      for (; !t.aborted; ) {\n        try {\n          return await Un(n);\n        } catch {\n        }\n        await ar(s), s += 50;\n      }\n      return null;\n    },\n    e\n  ),\n  {\n    isSupported: Dt\n  }\n), qn = \"web_app_request_write_access\", St = /* @__PURE__ */ c(!1), gu = /* @__PURE__ */ h(\n  \"requestWriteAccess\",\n  (e) => {\n    if (St())\n      throw new l(q, \"Write access request is currently in progress\");\n    return St.set(!0), y(qn, \"write_access_requested\", e).then((t) => t.status).finally(() => {\n      St.set(!1);\n    });\n  },\n  {\n    isSupported: qn\n  }\n), Eu = /* @__PURE__ */ h(\n  \"getCurrentTime\",\n  (e) => se(\"getCurrentTime\", {}, e).then(Nt()),\n  {\n    isSupported: \"web_app_invoke_custom_method\"\n  }\n), Fn = \"web_app_read_text_from_clipboard\", wu = /* @__PURE__ */ h(\n  \"readTextFromClipboard\",\n  (e) => {\n    const t = Co();\n    return y(Fn, \"clipboard_text_received\", {\n      ...e,\n      params: { req_id: t },\n      capture: yo(t)\n    }).then(({ data: n = null }) => n);\n  },\n  {\n    isSupported: Fn\n  }\n), Su = /* @__PURE__ */ h(\n  \"sendData\",\n  (e) => {\n    const { size: t } = new Blob([e]);\n    if (!t || t > 4096)\n      throw new l(Nr, t ? \"Maximum size of data to send is 4096 bytes\" : \"Attempted to send empty data\");\n    f(\"web_app_data_send\", { data: e });\n  }\n), Wn = \"web_app_share_to_story\", yu = /* @__PURE__ */ h(\n  \"shareStory\",\n  (e, t) => {\n    t || (t = {}), f(Wn, {\n      text: t.text,\n      media_url: e,\n      widget_link: t.widgetLink\n    });\n  },\n  { isSupported: Wn }\n), Gn = \"web_app_switch_inline_query\", Au = /* @__PURE__ */ h(\n  \"switchInlineQuery\",\n  (e, t) => {\n    f(Gn, {\n      query: e,\n      chat_types: t || []\n    });\n  },\n  {\n    isSupported: [Gn, {\n      fn: () => !!oe().botInline,\n      error: \"Mini App should be ran in Bot inline mode\"\n    }]\n  }\n);\nfunction Cu(e) {\n  try {\n    return { result: e() };\n  } catch (t) {\n    return { error: t };\n  }\n}\nfunction vu(e) {\n  Ir(e), Cr();\n  const [t, n] = te(\n    E(\"reload_iframe\", () => {\n      f(\"iframe_will_reload\"), window.location.reload();\n    }),\n    vr\n  ), { acceptCustomStyles: o = !0 } = e || {};\n  if (o) {\n    const s = document.createElement(\"style\");\n    s.id = \"telegram-custom-styles\", document.head.appendChild(s), t(\n      E(\"set_custom_style\", (r) => {\n        s.innerHTML = r;\n      }),\n      () => {\n        document.head.removeChild(s);\n      }\n    );\n  }\n  return f(\"iframe_ready\", { reload_supported: !0 }), n;\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvc2RrL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGdCQUFnQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsdUJBQXVCLEVBQUUsbUJBQW1CLG1DQUFtQyxFQUFFLEdBQUc7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTix3QkFBd0IsVUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EseUJBQXlCLEVBQUU7QUFDM0I7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBLEtBQUssVUFBVSxnQkFBZ0I7QUFDL0IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0EsNkJBQTZCLFNBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsT0FBTyw2QkFBNkI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNCQUFzQjtBQUNuRDtBQWdURTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGFwdG9zLWxhYnMvd2FsbGV0LWFkYXB0ZXItbmV4dGpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvc2RrL2Rpc3QvaW5kZXguanM/OWFjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBHIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCBuLCBvKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5tZXNzYWdlIDogbiB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIG4gPT0gXCJvYmplY3RcIiA/IG4uY2F1c2UgOiBvXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgdGhpcy5uYW1lID0gXCJUeXBlZEVycm9yXCIsIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBHLnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHpuKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiBCcyhlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbmNvbnN0IE1zID0gXCJFUlJfSU5WQUxJRF9WQUxVRVwiLCBJcyA9IFwiRVJSX1VORVhQRUNURURfVkFMVUVcIiwgRHMgPSBcIkVSUl9VTkVYUEVDVEVEX1RZUEVcIiwgUW4gPSBcIkVSUl9QQVJTRVwiO1xuZnVuY3Rpb24gSm4oZSwgdCkge1xuICBjb25zdCBuID0ge307XG4gIGZvciAoY29uc3QgbyBpbiBlKSB7XG4gICAgY29uc3QgcyA9IGVbb107XG4gICAgaWYgKCFzKVxuICAgICAgY29udGludWU7XG4gICAgbGV0IHIsIGE7XG4gICAgdHlwZW9mIHMgPT0gXCJmdW5jdGlvblwiID8gKHIgPSBvLCBhID0gcykgOiBbciwgYV0gPSBzO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpID0gYSh0KHIpKTtcbiAgICAgIGkgIT09IHZvaWQgMCAmJiAobltvXSA9IGkpO1xuICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgIHRocm93IG5ldyBHKFxuICAgICAgICBRbixcbiAgICAgICAgYFBhcnNlciBmb3IgXCIke299XCIgcHJvcGVydHkgZmFpbGVkJHtyID09PSBvID8gXCJcIiA6IGAuIFNvdXJjZSBmaWVsZDogXCIke3J9XCJgfWAsXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gWW4oZSkge1xuICBsZXQgdCA9IGU7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgIHRyeSB7XG4gICAgICB0ID0gSlNPTi5wYXJzZSh0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICB0aHJvdyBuZXcgRyhNcywgeyBjYXVzZTogbiB9KTtcbiAgICB9XG4gIGlmICh0eXBlb2YgdCAhPSBcIm9iamVjdFwiIHx8ICF0IHx8IEFycmF5LmlzQXJyYXkodCkpXG4gICAgdGhyb3cgbmV3IEcoSXMpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIGooZSwgdCkge1xuICByZXR1cm4gKG4pID0+IHtcbiAgICBjb25zdCBvID0gKHMpID0+IHtcbiAgICAgIGlmICghKG4gJiYgcyA9PT0gdm9pZCAwKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdChzKTtcbiAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgIHRocm93IG5ldyBHKFFuLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgXCIke2V9XCIgdHJhbnNmb3JtZXIgZmFpbGVkIHRvIHBhcnNlIHRoZSB2YWx1ZWAsXG4gICAgICAgICAgICBjYXVzZTogclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIE9iamVjdC5hc3NpZ24oXG4gICAgICBvLFxuICAgICAge1xuICAgICAgICBpc1ZhbGlkKHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG8ocyksICEwO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG59XG5mdW5jdGlvbiBIZShlLCB0KSB7XG4gIHJldHVybiBqKHQgfHwgXCJvYmplY3RcIiwgKG4pID0+IHtcbiAgICBjb25zdCBvID0gWW4obik7XG4gICAgcmV0dXJuIEpuKGUsIChzKSA9PiBvW3NdKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBUZShlKSB7XG4gIHRocm93IG5ldyBHKERzLCBgVW5leHBlY3RlZCB2YWx1ZSByZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbn1cbmNvbnN0IE5zID0gaihcImJvb2xlYW5cIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwiYm9vbGVhblwiKVxuICAgIHJldHVybiBlO1xuICBjb25zdCB0ID0gU3RyaW5nKGUpO1xuICBpZiAodCA9PT0gXCIxXCIgfHwgdCA9PT0gXCJ0cnVlXCIpXG4gICAgcmV0dXJuICEwO1xuICBpZiAodCA9PT0gXCIwXCIgfHwgdCA9PT0gXCJmYWxzZVwiKVxuICAgIHJldHVybiAhMTtcbiAgVGUoZSk7XG59KSwgTCA9IGooXCJzdHJpbmdcIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZS50b1N0cmluZygpO1xuICBUZShlKTtcbn0pLCBVZSA9IGooXCJudW1iZXJcIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIGU7XG4gIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgdCA9IE51bWJlcihlKTtcbiAgICBpZiAoIU51bWJlci5pc05hTih0KSlcbiAgICAgIHJldHVybiB0O1xuICB9XG4gIFRlKGUpO1xufSksIE50ID0gaihcImRhdGVcIiwgKGUpID0+IGUgaW5zdGFuY2VvZiBEYXRlID8gZSA6IG5ldyBEYXRlKFVlKCkoZSkgKiAxZTMpKTtcbmZ1bmN0aW9uIEtuKGUsIHQpIHtcbiAgcmV0dXJuIGoodCB8fCBcInNlYXJjaFBhcmFtc1wiLCAobikgPT4ge1xuICAgIHR5cGVvZiBuICE9IFwic3RyaW5nXCIgJiYgIShuIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zKSAmJiBUZShuKTtcbiAgICBjb25zdCBvID0gdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiA/IG5ldyBVUkxTZWFyY2hQYXJhbXMobikgOiBuO1xuICAgIHJldHVybiBKbihlLCAocykgPT4ge1xuICAgICAgY29uc3QgciA9IG8uZ2V0KHMpO1xuICAgICAgcmV0dXJuIHIgPT09IG51bGwgPyB2b2lkIDAgOiByO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIG10KGUpIHtcbiAgZm9yIChjb25zdCB0IGluIGUpXG4gICAgZVt0XSA9IFt6bih0KSwgZVt0XV07XG4gIHJldHVybiBlO1xufVxuY29uc3Qga3MgPSAoZSkgPT4ge1xuICBjb25zdCB0ID0gVWUoKSwgbiA9IFVlKCEwKSwgbyA9IEwoKSwgcyA9IEwoITApLCByID0gTnMoITApLCBhID0gSGUobXQoe1xuICAgIGFkZGVkVG9BdHRhY2htZW50TWVudTogcixcbiAgICBhbGxvd3NXcml0ZVRvUG06IHIsXG4gICAgZmlyc3ROYW1lOiBvLFxuICAgIGlkOiB0LFxuICAgIGlzQm90OiByLFxuICAgIGlzUHJlbWl1bTogcixcbiAgICBsYW5ndWFnZUNvZGU6IHMsXG4gICAgbGFzdE5hbWU6IHMsXG4gICAgcGhvdG9Vcmw6IHMsXG4gICAgdXNlcm5hbWU6IHNcbiAgfSksIFwiVXNlclwiKSghMCk7XG4gIHJldHVybiBLbihcbiAgICBtdCh7XG4gICAgICBhdXRoRGF0ZTogTnQoKSxcbiAgICAgIGNhblNlbmRBZnRlcjogbixcbiAgICAgIGNoYXQ6IEhlKFxuICAgICAgICBtdCh7XG4gICAgICAgICAgaWQ6IHQsXG4gICAgICAgICAgdHlwZTogbyxcbiAgICAgICAgICB0aXRsZTogbyxcbiAgICAgICAgICBwaG90b1VybDogcyxcbiAgICAgICAgICB1c2VybmFtZTogc1xuICAgICAgICB9KSxcbiAgICAgICAgXCJDaGF0XCJcbiAgICAgICkoITApLFxuICAgICAgY2hhdEluc3RhbmNlOiBzLFxuICAgICAgY2hhdFR5cGU6IHMsXG4gICAgICBoYXNoOiBvLFxuICAgICAgcXVlcnlJZDogcyxcbiAgICAgIHJlY2VpdmVyOiBhLFxuICAgICAgc3RhcnRQYXJhbTogcyxcbiAgICAgIHNpZ25hdHVyZTogbyxcbiAgICAgIHVzZXI6IGFcbiAgICB9KSxcbiAgICBcImluaXREYXRhXCJcbiAgKShlKTtcbn07XG5mdW5jdGlvbiBmZShlKSB7XG4gIHJldHVybiAvXiNbXFxkYS1mXXs2fSQvaS50ZXN0KGUpO1xufVxuZnVuY3Rpb24geHMoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17M30kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFpuKGUpIHtcbiAgY29uc3QgdCA9IGUucmVwbGFjZSgvXFxzL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChmZSh0KSlcbiAgICByZXR1cm4gdDtcbiAgaWYgKHhzKHQpKSB7XG4gICAgbGV0IG8gPSBcIiNcIjtcbiAgICBmb3IgKGxldCBzID0gMDsgcyA8IDM7IHMgKz0gMSlcbiAgICAgIG8gKz0gdFsxICsgc10ucmVwZWF0KDIpO1xuICAgIHJldHVybiBvO1xuICB9XG4gIGNvbnN0IG4gPSB0Lm1hdGNoKC9ecmdiXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSlcXCkkLykgfHwgdC5tYXRjaCgvXnJnYmFcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KSxcXGR7MSwzfVxcKSQvKTtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgXCIke2V9XCIgZG9lcyBub3Qgc2F0aXNmeSBhbnkgb2Yga25vd24gUkdCIGZvcm1hdHMuYCk7XG4gIHJldHVybiBuLnNsaWNlKDEpLnJlZHVjZSgobywgcykgPT4ge1xuICAgIGNvbnN0IHIgPSBwYXJzZUludChzLCAxMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBvICsgKHIubGVuZ3RoID09PSAxID8gXCIwXCIgOiBcIlwiKSArIHI7XG4gIH0sIFwiI1wiKTtcbn1cbmNvbnN0IFZzID0gaihcInJnYlwiLCAoZSkgPT4gWm4oTCgpKGUpKSksIExzID0gaihcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBWcyghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFluKGUpKS5yZWR1Y2UoKG4sIFtvLCBzXSkgPT4gKG5bQnMobyldID0gdChzKSwgbiksIHt9KTtcbiAgfVxuKTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiB2bihlKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhlKS5tYXAoKFt0LCBuXSkgPT4gW3puKHQpLCBuXSlcbiAgICApXG4gICk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gSWMoZSkge1xuICBjb25zdCB7XG4gICAgaW5pdERhdGFSYXc6IHQsXG4gICAgc3RhcnRQYXJhbTogbixcbiAgICBzaG93U2V0dGluZ3M6IG8sXG4gICAgYm90SW5saW5lOiBzLFxuICAgIGZ1bGxzY3JlZW46IHIsXG4gICAgZGVmYXVsdENvbG9yczogYVxuICB9ID0gZSwgaSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgcmV0dXJuIGkuc2V0KFwidGdXZWJBcHBQbGF0Zm9ybVwiLCBlLnBsYXRmb3JtKSwgaS5zZXQoXCJ0Z1dlYkFwcFRoZW1lUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyB2bihlLnRoZW1lUGFyYW1zKSksIGkuc2V0KFwidGdXZWJBcHBWZXJzaW9uXCIsIGUudmVyc2lvbiksIHQgJiYgaS5zZXQoXCJ0Z1dlYkFwcERhdGFcIiwgdCksIG4gJiYgaS5zZXQoXCJ0Z1dlYkFwcFN0YXJ0UGFyYW1cIiwgbiksIHR5cGVvZiBvID09IFwiYm9vbGVhblwiICYmIGkuc2V0KFwidGdXZWJBcHBTaG93U2V0dGluZ3NcIiwgbyA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgcyA9PSBcImJvb2xlYW5cIiAmJiBpLnNldChcInRnV2ViQXBwQm90SW5saW5lXCIsIHMgPyBcIjFcIiA6IFwiMFwiKSwgdHlwZW9mIHIgPT0gXCJib29sZWFuXCIgJiYgaS5zZXQoXCJ0Z1dlYkFwcEZ1bGxzY3JlZW5cIiwgciA/IFwiMVwiIDogXCIwXCIpLCBhICYmIGkuc2V0KFwidGdXZWJBcHBEZWZhdWx0Q29sb3JzXCIsIC8qIEBfX1BVUkVfXyAqLyB2bihhKSksIGkudG9TdHJpbmcoKTtcbn1cbmZ1bmN0aW9uIGpzKGUsIHQpIHtcbiAgcmV0dXJuIGooXCJhcnJheVwiLCAobikgPT4ge1xuICAgIGxldCBvO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG4pKVxuICAgICAgbyA9IG47XG4gICAgZWxzZSBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIilcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHMgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBBcnJheS5pc0FycmF5KHMpICYmIChvID0gcyk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICByZXR1cm4gbyB8fCBUZShuKSwgby5tYXAoZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gWG4oZSkge1xuICByZXR1cm4gISFlICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZSk7XG59XG5mdW5jdGlvbiB5dCguLi5lKSB7XG4gIHJldHVybiBlLm1hcCgodCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIHQ7XG4gICAgaWYgKFhuKHQpKVxuICAgICAgcmV0dXJuIHl0KE9iamVjdC5lbnRyaWVzKHQpLm1hcCgobikgPT4gblsxXSAmJiBuWzBdKSk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodCkpXG4gICAgICByZXR1cm4geXQoLi4udCk7XG4gIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKTtcbn1cbmZ1bmN0aW9uIERjKC4uLmUpIHtcbiAgcmV0dXJuIGUucmVkdWNlKCh0LCBuKSA9PiAoWG4obikgJiYgT2JqZWN0LmVudHJpZXMobikuZm9yRWFjaCgoW28sIHNdKSA9PiB7XG4gICAgY29uc3QgciA9IHl0KHRbb10sIHMpO1xuICAgIHIgJiYgKHRbb10gPSByKTtcbiAgfSksIHQpLCB7fSk7XG59XG5jbGFzcyB6IGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCBuLCBvKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5tZXNzYWdlIDogbiB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIG4gPT0gXCJvYmplY3RcIiA/IG4uY2F1c2UgOiBvXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgdGhpcy5uYW1lID0gXCJUeXBlZEVycm9yXCIsIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCB6LnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGVvKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiBIcyhlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbmNvbnN0IFVzID0gXCJFUlJfSU5WQUxJRF9WQUxVRVwiLCBxcyA9IFwiRVJSX1VORVhQRUNURURfVkFMVUVcIiwgRnMgPSBcIkVSUl9VTkVYUEVDVEVEX1RZUEVcIiwgdG8gPSBcIkVSUl9QQVJTRVwiO1xuZnVuY3Rpb24gbm8oZSwgdCkge1xuICBjb25zdCBuID0ge307XG4gIGZvciAoY29uc3QgbyBpbiBlKSB7XG4gICAgY29uc3QgcyA9IGVbb107XG4gICAgaWYgKCFzKVxuICAgICAgY29udGludWU7XG4gICAgbGV0IHIsIGE7XG4gICAgdHlwZW9mIHMgPT0gXCJmdW5jdGlvblwiID8gKHIgPSBvLCBhID0gcykgOiBbciwgYV0gPSBzO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpID0gYSh0KHIpKTtcbiAgICAgIGkgIT09IHZvaWQgMCAmJiAobltvXSA9IGkpO1xuICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgIHRocm93IG5ldyB6KFxuICAgICAgICB0byxcbiAgICAgICAgYFBhcnNlciBmb3IgXCIke299XCIgcHJvcGVydHkgZmFpbGVkJHtyID09PSBvID8gXCJcIiA6IGAuIFNvdXJjZSBmaWVsZDogXCIke3J9XCJgfWAsXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gb28oZSkge1xuICBsZXQgdCA9IGU7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgIHRyeSB7XG4gICAgICB0ID0gSlNPTi5wYXJzZSh0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICB0aHJvdyBuZXcgeihVcywgeyBjYXVzZTogbiB9KTtcbiAgICB9XG4gIGlmICh0eXBlb2YgdCAhPSBcIm9iamVjdFwiIHx8ICF0IHx8IEFycmF5LmlzQXJyYXkodCkpXG4gICAgdGhyb3cgbmV3IHoocXMpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIEkoZSwgdCkge1xuICByZXR1cm4gKG4pID0+IHtcbiAgICBjb25zdCBvID0gKHMpID0+IHtcbiAgICAgIGlmICghKG4gJiYgcyA9PT0gdm9pZCAwKSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdChzKTtcbiAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgIHRocm93IG5ldyB6KHRvLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgXCIke2V9XCIgdHJhbnNmb3JtZXIgZmFpbGVkIHRvIHBhcnNlIHRoZSB2YWx1ZWAsXG4gICAgICAgICAgICBjYXVzZTogclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIE9iamVjdC5hc3NpZ24oXG4gICAgICBvLFxuICAgICAge1xuICAgICAgICBpc1ZhbGlkKHMpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG8ocyksICEwO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG59XG5mdW5jdGlvbiBNKGUsIHQpIHtcbiAgcmV0dXJuIEkodCB8fCBcIm9iamVjdFwiLCAobikgPT4ge1xuICAgIGNvbnN0IG8gPSBvbyhuKTtcbiAgICByZXR1cm4gbm8oZSwgKHMpID0+IG9bc10pO1xuICB9KTtcbn1cbmZ1bmN0aW9uICRlKGUpIHtcbiAgdGhyb3cgbmV3IHooRnMsIGBVbmV4cGVjdGVkIHZhbHVlIHJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KGUpfWApO1xufVxuY29uc3QgcWUgPSBJKFwiYm9vbGVhblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJib29sZWFuXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSBTdHJpbmcoZSk7XG4gIGlmICh0ID09PSBcIjFcIiB8fCB0ID09PSBcInRydWVcIilcbiAgICByZXR1cm4gITA7XG4gIGlmICh0ID09PSBcIjBcIiB8fCB0ID09PSBcImZhbHNlXCIpXG4gICAgcmV0dXJuICExO1xuICAkZShlKTtcbn0pLCBSID0gSShcInN0cmluZ1wiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBlLnRvU3RyaW5nKCk7XG4gICRlKGUpO1xufSksIGRlID0gSShcIm51bWJlclwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZTtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCB0ID0gTnVtYmVyKGUpO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgJGUoZSk7XG59KSwgV3MgPSBJKFwiZGF0ZVwiLCAoZSkgPT4gZSBpbnN0YW5jZW9mIERhdGUgPyBlIDogbmV3IERhdGUoZGUoKShlKSAqIDFlMykpO1xuZnVuY3Rpb24gc28oZSwgdCkge1xuICByZXR1cm4gSSh0IHx8IFwic2VhcmNoUGFyYW1zXCIsIChuKSA9PiB7XG4gICAgdHlwZW9mIG4gIT0gXCJzdHJpbmdcIiAmJiAhKG4gaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpICYmICRlKG4pO1xuICAgIGNvbnN0IG8gPSB0eXBlb2YgbiA9PSBcInN0cmluZ1wiID8gbmV3IFVSTFNlYXJjaFBhcmFtcyhuKSA6IG47XG4gICAgcmV0dXJuIG5vKGUsIChzKSA9PiB7XG4gICAgICBjb25zdCByID0gby5nZXQocyk7XG4gICAgICByZXR1cm4gciA9PT0gbnVsbCA/IHZvaWQgMCA6IHI7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaHQoZSkge1xuICBmb3IgKGNvbnN0IHQgaW4gZSlcbiAgICBlW3RdID0gW2VvKHQpLCBlW3RdXTtcbiAgcmV0dXJuIGU7XG59XG5jb25zdCBHcyA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBkZSgpLCBuID0gZGUoITApLCBvID0gUigpLCBzID0gUighMCksIHIgPSBxZSghMCksIGEgPSBNKGh0KHtcbiAgICBhZGRlZFRvQXR0YWNobWVudE1lbnU6IHIsXG4gICAgYWxsb3dzV3JpdGVUb1BtOiByLFxuICAgIGZpcnN0TmFtZTogbyxcbiAgICBpZDogdCxcbiAgICBpc0JvdDogcixcbiAgICBpc1ByZW1pdW06IHIsXG4gICAgbGFuZ3VhZ2VDb2RlOiBzLFxuICAgIGxhc3ROYW1lOiBzLFxuICAgIHBob3RvVXJsOiBzLFxuICAgIHVzZXJuYW1lOiBzXG4gIH0pLCBcIlVzZXJcIikoITApO1xuICByZXR1cm4gc28oXG4gICAgaHQoe1xuICAgICAgYXV0aERhdGU6IFdzKCksXG4gICAgICBjYW5TZW5kQWZ0ZXI6IG4sXG4gICAgICBjaGF0OiBNKFxuICAgICAgICBodCh7XG4gICAgICAgICAgaWQ6IHQsXG4gICAgICAgICAgdHlwZTogbyxcbiAgICAgICAgICB0aXRsZTogbyxcbiAgICAgICAgICBwaG90b1VybDogcyxcbiAgICAgICAgICB1c2VybmFtZTogc1xuICAgICAgICB9KSxcbiAgICAgICAgXCJDaGF0XCJcbiAgICAgICkoITApLFxuICAgICAgY2hhdEluc3RhbmNlOiBzLFxuICAgICAgY2hhdFR5cGU6IHMsXG4gICAgICBoYXNoOiBvLFxuICAgICAgcXVlcnlJZDogcyxcbiAgICAgIHJlY2VpdmVyOiBhLFxuICAgICAgc3RhcnRQYXJhbTogcyxcbiAgICAgIHNpZ25hdHVyZTogbyxcbiAgICAgIHVzZXI6IGFcbiAgICB9KSxcbiAgICBcImluaXREYXRhXCJcbiAgKShlKTtcbn07XG5mdW5jdGlvbiB6cyhlKSB7XG4gIHJldHVybiAvXiNbXFxkYS1mXXs2fSQvaS50ZXN0KGUpO1xufVxuZnVuY3Rpb24gUXMoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17M30kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIEpzKGUpIHtcbiAgY29uc3QgdCA9IGUucmVwbGFjZSgvXFxzL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh6cyh0KSlcbiAgICByZXR1cm4gdDtcbiAgaWYgKFFzKHQpKSB7XG4gICAgbGV0IG8gPSBcIiNcIjtcbiAgICBmb3IgKGxldCBzID0gMDsgcyA8IDM7IHMgKz0gMSlcbiAgICAgIG8gKz0gdFsxICsgc10ucmVwZWF0KDIpO1xuICAgIHJldHVybiBvO1xuICB9XG4gIGNvbnN0IG4gPSB0Lm1hdGNoKC9ecmdiXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSlcXCkkLykgfHwgdC5tYXRjaCgvXnJnYmFcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KSxcXGR7MSwzfVxcKSQvKTtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgXCIke2V9XCIgZG9lcyBub3Qgc2F0aXNmeSBhbnkgb2Yga25vd24gUkdCIGZvcm1hdHMuYCk7XG4gIHJldHVybiBuLnNsaWNlKDEpLnJlZHVjZSgobywgcykgPT4ge1xuICAgIGNvbnN0IHIgPSBwYXJzZUludChzLCAxMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBvICsgKHIubGVuZ3RoID09PSAxID8gXCIwXCIgOiBcIlwiKSArIHI7XG4gIH0sIFwiI1wiKTtcbn1cbmNvbnN0IFlzID0gSShcInJnYlwiLCAoZSkgPT4gSnMoUigpKGUpKSksIFRuID0gSShcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBZcyghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9vKGUpKS5yZWR1Y2UoKG4sIFtvLCBzXSkgPT4gKG5bSHMobyldID0gdChzKSwgbiksIHt9KTtcbiAgfVxuKTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBBdChlKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhlKS5tYXAoKFt0LCBuXSkgPT4gW2VvKHQpLCBuXSlcbiAgICApXG4gICk7XG59XG5jb25zdCBLcyA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBSKCksIG4gPSBSKCEwKSwgbyA9IHFlKCEwKTtcbiAgcmV0dXJuIHNvKHtcbiAgICBib3RJbmxpbmU6IFtcInRnV2ViQXBwQm90SW5saW5lXCIsIG9dLFxuICAgIGRlZmF1bHRDb2xvcnM6IFtcInRnV2ViQXBwRGVmYXVsdENvbG9yc1wiLCBUbighMCldLFxuICAgIGZ1bGxzY3JlZW46IFtcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBvXSxcbiAgICBpbml0RGF0YTogW1widGdXZWJBcHBEYXRhXCIsIEdzKCEwKV0sXG4gICAgaW5pdERhdGFSYXc6IFtcInRnV2ViQXBwRGF0YVwiLCBuXSxcbiAgICBwbGF0Zm9ybTogW1widGdXZWJBcHBQbGF0Zm9ybVwiLCB0XSxcbiAgICBzaG93U2V0dGluZ3M6IFtcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIG9dLFxuICAgIHN0YXJ0UGFyYW06IFtcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCBuXSxcbiAgICB0aGVtZVBhcmFtczogW1widGdXZWJBcHBUaGVtZVBhcmFtc1wiLCBUbigpXSxcbiAgICB2ZXJzaW9uOiBbXCJ0Z1dlYkFwcFZlcnNpb25cIiwgdF1cbiAgfSwgXCJsYXVuY2hQYXJhbXNcIikoZSk7XG59O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIFpzKGUpIHtcbiAgY29uc3Qge1xuICAgIGluaXREYXRhUmF3OiB0LFxuICAgIHN0YXJ0UGFyYW06IG4sXG4gICAgc2hvd1NldHRpbmdzOiBvLFxuICAgIGJvdElubGluZTogcyxcbiAgICBmdWxsc2NyZWVuOiByLFxuICAgIGRlZmF1bHRDb2xvcnM6IGFcbiAgfSA9IGUsIGkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIHJldHVybiBpLnNldChcInRnV2ViQXBwUGxhdGZvcm1cIiwgZS5wbGF0Zm9ybSksIGkuc2V0KFwidGdXZWJBcHBUaGVtZVBhcmFtc1wiLCAvKiBAX19QVVJFX18gKi8gQXQoZS50aGVtZVBhcmFtcykpLCBpLnNldChcInRnV2ViQXBwVmVyc2lvblwiLCBlLnZlcnNpb24pLCB0ICYmIGkuc2V0KFwidGdXZWJBcHBEYXRhXCIsIHQpLCBuICYmIGkuc2V0KFwidGdXZWJBcHBTdGFydFBhcmFtXCIsIG4pLCB0eXBlb2YgbyA9PSBcImJvb2xlYW5cIiAmJiBpLnNldChcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIG8gPyBcIjFcIiA6IFwiMFwiKSwgdHlwZW9mIHMgPT0gXCJib29sZWFuXCIgJiYgaS5zZXQoXCJ0Z1dlYkFwcEJvdElubGluZVwiLCBzID8gXCIxXCIgOiBcIjBcIiksIHR5cGVvZiByID09IFwiYm9vbGVhblwiICYmIGkuc2V0KFwidGdXZWJBcHBGdWxsc2NyZWVuXCIsIHIgPyBcIjFcIiA6IFwiMFwiKSwgYSAmJiBpLnNldChcInRnV2ViQXBwRGVmYXVsdENvbG9yc1wiLCAvKiBAX19QVVJFX18gKi8gQXQoYSkpLCBpLnRvU3RyaW5nKCk7XG59XG5jb25zdCBybyA9IE0oe1xuICBldmVudFR5cGU6IFIoKSxcbiAgZXZlbnREYXRhOiAoZSkgPT4gZVxufSwgXCJtaW5pQXBwc01lc3NhZ2VcIiksIGFvID0gSShcImZuXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcImZ1bmN0aW9uXCIpXG4gICAgcmV0dXJuIGU7XG4gICRlKGUpO1xufSk7XG5mdW5jdGlvbiBYcyhlKSB7XG4gIHJldHVybiAhIWUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShlKTtcbn1cbmNvbnN0IGVyID0gTSh7XG4gIFRlbGVncmFtV2Vidmlld1Byb3h5OiBNKHsgcG9zdEV2ZW50OiBhbygpIH0pKClcbn0pO1xuZnVuY3Rpb24gaW8oZSkge1xuICByZXR1cm4gZXIoKS5pc1ZhbGlkKGUpO1xufVxuZnVuY3Rpb24gdHIoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gITA7XG4gIH1cbn1cbnZhciBuciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgb3IgPSAoZSwgdCwgbikgPT4gdCBpbiBlID8gbnIoZSwgdCwgeyBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogbiB9KSA6IGVbdF0gPSBuLCBjbyA9IChlLCB0LCBuKSA9PiBvcihlLCB0eXBlb2YgdCAhPSBcInN5bWJvbFwiID8gdCArIFwiXCIgOiB0LCBuKTtcbmxldCBsID0gY2xhc3MgdW8gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHQsIG4sIG8pIHtcbiAgICBzdXBlcihcbiAgICAgIHR5cGVvZiBuID09IFwib2JqZWN0XCIgPyBuLm1lc3NhZ2UgOiBuIHx8IHQsXG4gICAgICB7XG4gICAgICAgIGNhdXNlOiB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5jYXVzZSA6IG9cbiAgICAgIH1cbiAgICApLCB0aGlzLnR5cGUgPSB0LCB0aGlzLm5hbWUgPSBcIlR5cGVkRXJyb3JcIiwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIHVvLnByb3RvdHlwZSk7XG4gIH1cbn07XG5mdW5jdGlvbiBsbyhlLCB0LCBuKSB7XG4gIHJldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIodCwgbiksICgpID0+IGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LCBuKTtcbn1cbmZ1bmN0aW9uIHRlKC4uLmUpIHtcbiAgY29uc3QgdCA9IGUuZmxhdCgxKTtcbiAgcmV0dXJuIFtcbiAgICB0LnB1c2guYmluZCh0KSxcbiAgICAoKSA9PiB7XG4gICAgICB0LmZvckVhY2goKG4pID0+IHtcbiAgICAgICAgbigpO1xuICAgICAgfSk7XG4gICAgfVxuICBdO1xufVxuZnVuY3Rpb24gc3IoZSwgdCkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIGwgJiYgZS50eXBlID09PSB0O1xufVxuZnVuY3Rpb24ga3QoZSkge1xuICByZXR1cm4gKHQpID0+IHNyKHQsIGUpO1xufVxuY29uc3QgcG8gPSBcIkVSUl9BQk9SVEVEXCIsIF9vID0gXCJFUlJfQ0FOQ0VMRURcIiwgZm8gPSBcIkVSUl9USU1FRF9PVVRcIjtcbmZ1bmN0aW9uICRuKGUpIHtcbiAgcmV0dXJuIG5ldyBsKHBvLCB7IGNhdXNlOiBlIH0pO1xufVxuY29uc3QgTmMgPSBrdChmbyksIGtjID0ga3QocG8pLCB4YyA9IGt0KF9vKTtcbmZ1bmN0aW9uIFJuKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVqZWN0ID0gdC5yZWplY3QsIGU7XG59XG5jbGFzcyBiIGV4dGVuZHMgUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKHQsIG4pIHtcbiAgICBsZXQgbywgcztcbiAgICB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyAobyA9IHQsIHMgPSBuKSA6IHMgPSB0O1xuICAgIGxldCByLCBhO1xuICAgIHN1cGVyKChpLCBwKSA9PiB7XG4gICAgICBzIHx8IChzID0ge30pO1xuICAgICAgY29uc3QgeyBhYm9ydFNpZ25hbDogdSB9ID0gcztcbiAgICAgIGlmICh1ICYmIHUuYWJvcnRlZClcbiAgICAgICAgcmV0dXJuIHAoJG4odS5yZWFzb24pKTtcbiAgICAgIGNvbnN0IFtkLCB3XSA9IHRlKCksIEEgPSAobSkgPT4gKC4uLlcpID0+ICh3KCksIG0oLi4uVykpLCB4ID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCB7IHNpZ25hbDogVCB9ID0geDtcbiAgICAgIGEgPSBBKChtKSA9PiB7XG4gICAgICAgIHguYWJvcnQobSksIHAobSk7XG4gICAgICB9KSwgciA9IEEoaSksIHUgJiYgZChcbiAgICAgICAgbG8odSwgXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgYSgkbih1LnJlYXNvbikpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgdGltZW91dDogZyB9ID0gcztcbiAgICAgIGlmIChnKSB7XG4gICAgICAgIGNvbnN0IG0gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBhKG5ldyBsKGZvLCBgVGltZW91dCByZWFjaGVkOiAke2d9bXNgKSk7XG4gICAgICAgIH0sIGcpO1xuICAgICAgICBkKCgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQobSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbyAmJiBvKHIsIGEsIFQpO1xuICAgIH0pLCBjbyh0aGlzLCBcInJlamVjdFwiKSwgdGhpcy5yZWplY3QgPSBhO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEJldHRlclByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBiKChvLCBzLCByKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhID0gdChyKTtcbiAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBQcm9taXNlID8gYS50aGVuKG8sIHMpIDogbyhhKTtcbiAgICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgICAgcyhhKTtcbiAgICAgIH1cbiAgICB9LCBuKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICByZXR1cm4gbmV3IGIoKG4pID0+IHtcbiAgICAgIG4odCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgYigobiwgbykgPT4ge1xuICAgICAgbyh0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcHJvbWlzZSBleGVjdXRpb24uXG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5yZWplY3QobmV3IGwoX28pKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmNhdGNoXG4gICAqL1xuICBjYXRjaCh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHQpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuZmluYWxseVxuICAgKi9cbiAgZmluYWxseSh0KSB7XG4gICAgcmV0dXJuIFJuKHN1cGVyLmZpbmFsbHkodCksIHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UudGhlblxuICAgKi9cbiAgdGhlbih0LCBuKSB7XG4gICAgcmV0dXJuIFJuKHN1cGVyLnRoZW4odCwgbiksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBPbihlLCB0KSB7XG4gIHJldHVybiBlLnJlc29sdmUgPSB0LnJlc29sdmUsIGU7XG59XG5sZXQgcnIgPSBjbGFzcyBNZSBleHRlbmRzIGIge1xuICBjb25zdHJ1Y3Rvcih0LCBuKSB7XG4gICAgbGV0IG8sIHM7XG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gKG8gPSB0LCBzID0gbikgOiBzID0gdDtcbiAgICBsZXQgcjtcbiAgICBzdXBlcigoYSwgaSwgcCkgPT4ge1xuICAgICAgciA9IGEsIG8gJiYgbyhhLCBpLCBwKTtcbiAgICB9LCBzKSwgY28odGhpcywgXCJyZXNvbHZlXCIpLCB0aGlzLnJlc29sdmUgPSByO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEVuaGFuY2VkUHJvbWlzZSBpbnN0YW5jZSB1c2luZyBleGVjdXRvciwgcmVzb2x2aW5nIHByb21pc2Ugd2hlbiBhIHJlc3VsdFxuICAgKiB3YXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSBmbiAtIGZ1bmN0aW9uIHJldHVybmluZyBwcm9taXNlIHJlc3VsdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICBzdGF0aWMgd2l0aEZuKHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IE1lKFxuICAgICAgKG8sIHMsIHIpID0+IGIud2l0aEZuKHQsIHsgYWJvcnRTaWduYWw6IHIgfSkudGhlbihvLCBzKSxcbiAgICAgIG5cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgTWUoKG4pID0+IHtcbiAgICAgIG4odCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgTWUoKG4sIG8pID0+IHtcbiAgICAgIG8odCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5jYXRjaFxuICAgKi9cbiAgY2F0Y2godCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCB0KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmZpbmFsbHlcbiAgICovXG4gIGZpbmFsbHkodCkge1xuICAgIHJldHVybiBPbihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgbikge1xuICAgIHJldHVybiBPbihzdXBlci50aGVuKHQsIG4pLCB0aGlzKTtcbiAgfVxufTtcbmZ1bmN0aW9uIGFyKGUsIHQpIHtcbiAgcmV0dXJuIG5ldyBiKChuKSA9PiB7XG4gICAgc2V0VGltZW91dChuLCBlKTtcbiAgfSwgeyBhYm9ydFNpZ25hbDogdCB9KTtcbn1cbmZ1bmN0aW9uIG1vKGUpIHtcbiAgcmV0dXJuIGB0YXBwcy8ke2V9YDtcbn1cbmZ1bmN0aW9uIE8oZSwgdCkge1xuICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG1vKGUpLCBKU09OLnN0cmluZ2lmeSh0KSk7XG59XG5mdW5jdGlvbiBQKGUpIHtcbiAgY29uc3QgdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0obW8oZSkpO1xuICB0cnkge1xuICAgIHJldHVybiB0ID8gSlNPTi5wYXJzZSh0KSA6IHZvaWQgMDtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIHh0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGAtJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gaXIoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCB7XG4gICAgdGV4dENvbG9yOiBuLFxuICAgIGJnQ29sb3I6IG8sXG4gICAgc2hvdWxkTG9nOiBzID0gITBcbiAgfSA9IHQ7XG4gIGZ1bmN0aW9uIHIoYSwgLi4uaSkge1xuICAgIGlmICghcyB8fCB0eXBlb2YgcyA9PSBcImZ1bmN0aW9uXCIgJiYgIXMoKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBwID0gXCJmb250LXdlaWdodDpib2xkO3BhZGRpbmc6MCA1cHg7Ym9yZGVyLXJhZGl1czo1cHhcIjtcbiAgICBjb25zb2xlW2FdKFxuICAgICAgYCVjJHtJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tR0JcIiwge1xuICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogMyxcbiAgICAgICAgdGltZVpvbmU6IFwiVVRDXCJcbiAgICAgIH0pLmZvcm1hdCgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSl9JWMgLyAlYyR7ZX1gLFxuICAgICAgYCR7cH07YmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlO2NvbG9yOmJsYWNrYCxcbiAgICAgIFwiXCIsXG4gICAgICBgJHtwfTske24gPyBgY29sb3I6JHtufTtgIDogXCJcIn0ke28gPyBgYmFja2dyb3VuZC1jb2xvcjoke299YCA6IFwiXCJ9YCxcbiAgICAgIC4uLmlcbiAgICApO1xuICB9XG4gIHJldHVybiBbXG4gICAgZnVuY3Rpb24oLi4uYSkge1xuICAgICAgcihcImxvZ1wiLCAuLi5hKTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHIoXCJlcnJvclwiLCAuLi5hKTtcbiAgICB9XG4gIF07XG59XG5mdW5jdGlvbiBWdChlLCB0KSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShlLCB0KTtcbn1cbmZ1bmN0aW9uIEx0KGUpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGUpO1xufVxuZnVuY3Rpb24gY3IoZSwgdCkge1xuICB0KCk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gbmUoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCBuID0gdC5lcXVhbHMgfHwgT2JqZWN0LmlzO1xuICBsZXQgbyA9IFtdLCBzID0gZTtcbiAgY29uc3QgciA9ICh1KSA9PiB7XG4gICAgaWYgKCFuKHMsIHUpKSB7XG4gICAgICBjb25zdCBkID0gcztcbiAgICAgIHMgPSB1LCBjcihwLCAoKSA9PiB7XG4gICAgICAgIFsuLi5vXS5mb3JFYWNoKChbdywgQV0pID0+IHtcbiAgICAgICAgICB3KHUsIGQpLCBBICYmIGkodywgITApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gYSh1KSB7XG4gICAgY29uc3QgZCA9IHR5cGVvZiB1ICE9IFwib2JqZWN0XCIgPyB7IG9uY2U6IHUgfSA6IHU7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uY2U6IGQub25jZSB8fCAhMSxcbiAgICAgIHNpZ25hbDogZC5zaWduYWwgfHwgITFcbiAgICB9O1xuICB9XG4gIGNvbnN0IGkgPSAodSwgZCkgPT4ge1xuICAgIGNvbnN0IHcgPSBhKGQpLCBBID0gby5maW5kSW5kZXgoKFt4LCBUXSkgPT4geCA9PT0gdSAmJiBULm9uY2UgPT09IHcub25jZSAmJiBULnNpZ25hbCA9PT0gdy5zaWduYWwpO1xuICAgIEEgPj0gMCAmJiBvLnNwbGljZShBLCAxKTtcbiAgfSwgcCA9IE9iamVjdC5hc3NpZ24oXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdXIocCksIHM7XG4gICAgfSxcbiAgICB7XG4gICAgICBkZXN0cm95KCkge1xuICAgICAgICBvID0gW107XG4gICAgICB9LFxuICAgICAgc2V0OiByLFxuICAgICAgcmVzZXQoKSB7XG4gICAgICAgIHIoZSk7XG4gICAgICB9LFxuICAgICAgc3ViKHUsIGQpIHtcbiAgICAgICAgcmV0dXJuIG8ucHVzaChbdSwgYShkKV0pLCAoKSA9PiBpKHUsIGQpO1xuICAgICAgfSxcbiAgICAgIHVuc3ViOiBpLFxuICAgICAgdW5zdWJBbGwoKSB7XG4gICAgICAgIG8gPSBvLmZpbHRlcigodSkgPT4gdVsxXS5zaWduYWwpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIHA7XG59XG5jb25zdCBidCA9IFtdO1xuZnVuY3Rpb24gdXIoZSkge1xuICBidC5sZW5ndGggJiYgYnRbYnQubGVuZ3RoIC0gMV0uYWRkKGUpO1xufVxuY29uc3QgbHIgPSAvKiBAX19QVVJFX18gKi8gbmUoITEpLCBbanQsIHByXSA9IC8qIEBfX1BVUkVfXyAqLyBpcihcIkJyaWRnZVwiLCB7XG4gIGJnQ29sb3I6IFwiIzkxNDdmZlwiLFxuICB0ZXh0Q29sb3I6IFwid2hpdGVcIixcbiAgc2hvdWxkTG9nOiBsclxufSksIF9yID0ge1xuICBjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZDogTSh7XG4gICAgcmVxX2lkOiBSKCksXG4gICAgZGF0YTogKGUpID0+IGUgPT09IG51bGwgPyBlIDogUighMCkoZSlcbiAgfSwgXCJjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZFwiKSxcbiAgY3VzdG9tX21ldGhvZF9pbnZva2VkOiBNKHtcbiAgICByZXFfaWQ6IFIoKSxcbiAgICByZXN1bHQ6IChlKSA9PiBlLFxuICAgIGVycm9yOiBSKCEwKVxuICB9LCBcImN1c3RvbV9tZXRob2RfaW52b2tlZFwiKSxcbiAgcG9wdXBfY2xvc2VkOiBJKFwicG9wdXBfY2xvc2VkXCIsIChlKSA9PiBlID8gTSh7XG4gICAgYnV0dG9uX2lkOiAodCkgPT4gdCA9PSBudWxsID8gdm9pZCAwIDogUigpKHQpXG4gIH0pKCkoZSkgOiB7fSksXG4gIHZpZXdwb3J0X2NoYW5nZWQ6IE0oe1xuICAgIGhlaWdodDogZGUoKSxcbiAgICB3aWR0aDogKGUpID0+IGUgPT0gbnVsbCA/IHdpbmRvdy5pbm5lcldpZHRoIDogZGUoKShlKSxcbiAgICBpc19zdGF0ZV9zdGFibGU6IHFlKCksXG4gICAgaXNfZXhwYW5kZWQ6IHFlKClcbiAgfSwgXCJ2aWV3cG9ydF9jaGFuZ2VkXCIpXG59O1xuZnVuY3Rpb24gZnIoZSkge1xuICBjb25zdCB0ID0gd2luZG93LCBbLCBuXSA9IHRlKFxuICAgIC8vIEFkZCBsaXN0ZW5lciwgd2hpY2ggaGFuZGxlcyBldmVudHMgc2VudCBmcm9tIHRoZSBUZWxlZ3JhbSB3ZWIgYXBwbGljYXRpb24gYW5kIGFsc28gZXZlbnRzXG4gICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBsb2NhbCBlbWl0RXZlbnQgZnVuY3Rpb24uXG4gICAgbG8odCwgXCJtZXNzYWdlXCIsIChvKSA9PiB7XG4gICAgICBpZiAoby5zb3VyY2UgIT09IHQucGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgcztcbiAgICAgIHRyeSB7XG4gICAgICAgIHMgPSBybygpKG8uZGF0YSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBldmVudFR5cGU6IHIsIGV2ZW50RGF0YTogYSB9ID0gcywgaSA9IF9yW3JdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcCA9IGkgPyBpKCkoYSkgOiBhO1xuICAgICAgICBqdChcIkV2ZW50IHJlY2VpdmVkOlwiLCBwID8geyBldmVudFR5cGU6IHIsIGV2ZW50RGF0YTogcCB9IDogeyBldmVudFR5cGU6IHIgfSksIGUoW3IsIHBdKTtcbiAgICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgICAgcHIoXG4gICAgICAgICAgW1xuICAgICAgICAgICAgYEFuIGVycm9yIG9jY3VycmVkIHByb2Nlc3NpbmcgdGhlIFwiJHtyfVwiIGV2ZW50IGZyb20gdGhlIFRlbGVncmFtIGFwcGxpY2F0aW9uLmAsXG4gICAgICAgICAgICBcIlBsZWFzZSwgZmlsZSBhbiBpc3N1ZSBoZXJlOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL2dpdGh1Yi5jb20vVGVsZWdyYW0tTWluaS1BcHBzL3RlbGVncmFtLWFwcHMvaXNzdWVzL25ldy9jaG9vc2VcIlxuICAgICAgICAgIF0uam9pbihgXG5gKSxcbiAgICAgICAgICBzLFxuICAgICAgICAgIHBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KVxuICApO1xuICByZXR1cm4gbjtcbn1cbmNvbnN0IEN0ID0gLyogQF9fUFVSRV9fICovIG5lKCksIFBuID0gLyogQF9fUFVSRV9fICovIG5lKCk7XG5mdW5jdGlvbiBobygpIHtcbiAgcmV0dXJuIFBuKCkgfHwgUG4uc2V0KGZyKEN0LnNldCkpLCBDdDtcbn1cbmNvbnN0IGd0ID0gLyogQF9fUFVSRV9fICovIG5lKHt9KTtcbmZ1bmN0aW9uIGJvKGUpIHtcbiAgbGV0IHQgPSBndCgpW2VdO1xuICByZXR1cm4gdCB8fCAodCA9IC8qIEBfX1BVUkVfXyAqLyBuZSh2b2lkIDAsIHtcbiAgICBlcXVhbHMoKSB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9KSwgaG8oKS5zdWIoKG4pID0+IHtcbiAgICBuICYmIG5bMF0gPT09IGUgJiYgdC5zZXQoblsxXSk7XG4gIH0pLCBndC5zZXQoeyAuLi5ndCgpLCBbZV06IHQgfSkpLCB0O1xufVxuZnVuY3Rpb24gRShlLCB0LCBuKSB7XG4gIHJldHVybiBibyhlKS5zdWIodCwgbik7XG59XG5jb25zdCBkciA9IFwiRVJSX01FVEhPRF9VTlNVUFBPUlRFRFwiLCBtciA9IFwiRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRFwiLCBociA9IFwiRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURURcIiwgZ28gPSBcIkVSUl9VTktOT1dOX0VOVlwiLCBiciA9IFwiRVJSX0lOVk9LRV9DVVNUT01fTUVUSE9EX1JFU1BPTlNFXCIsIGdyID0gLyogQF9fUFVSRV9fICovIG5lKFwiaHR0cHM6Ly93ZWIudGVsZWdyYW0ub3JnXCIpO1xuZnVuY3Rpb24gSHQoZSwgdCkge1xuICBqdChcIlBvc3RpbmcgZXZlbnQ6XCIsIHQgPyB7IGV2ZW50VHlwZTogZSwgZXZlbnREYXRhOiB0IH0gOiB7IGV2ZW50VHlwZTogZSB9KTtcbiAgY29uc3QgbiA9IHdpbmRvdztcbiAgaWYgKGlvKG4pKSB7XG4gICAgbi5UZWxlZ3JhbVdlYnZpZXdQcm94eS5wb3N0RXZlbnQoZSwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvID0gSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9KTtcbiAgaWYgKHRyKCkpXG4gICAgcmV0dXJuIG4ucGFyZW50LnBvc3RNZXNzYWdlKG8sIGdyKCkpO1xuICBjb25zdCB7IGV4dGVybmFsOiBzIH0gPSBuO1xuICBpZiAoTSh7IG5vdGlmeTogYW8oKSB9KSgpLmlzVmFsaWQocykpIHtcbiAgICBzLm5vdGlmeShvKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IGwoZ28pO1xufVxuZnVuY3Rpb24gVXQoZSwgdCwgbikge1xuICBuIHx8IChuID0ge30pO1xuICBjb25zdCB7IGNhcHR1cmU6IG8gfSA9IG4sIFtzLCByXSA9IHRlKCk7XG4gIHJldHVybiBuZXcgYigoYSkgPT4ge1xuICAgIChBcnJheS5pc0FycmF5KHQpID8gdCA6IFt0XSkuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgcyhcbiAgICAgICAgRShpLCAocCkgPT4ge1xuICAgICAgICAgICghbyB8fCAoQXJyYXkuaXNBcnJheSh0KSA/IG8oe1xuICAgICAgICAgICAgZXZlbnQ6IGksXG4gICAgICAgICAgICBwYXlsb2FkOiBwXG4gICAgICAgICAgfSkgOiBvKHApKSkgJiYgYShwKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksIChuLnBvc3RFdmVudCB8fCBIdCkoZSwgbi5wYXJhbXMpO1xuICB9LCBuKS5maW5hbGx5KHIpO1xufVxuZnVuY3Rpb24gcXQoZSkge1xuICByZXR1cm4gS3MoKShlKTtcbn1cbmZ1bmN0aW9uIEVvKGUpIHtcbiAgcmV0dXJuIHF0KFxuICAgIGUucmVwbGFjZSgvXltePyNdKls/I10vLCBcIlwiKS5yZXBsYWNlKC9bPyNdL2csIFwiJlwiKVxuICApO1xufVxuZnVuY3Rpb24gRXIoKSB7XG4gIHJldHVybiBFbyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG59XG5mdW5jdGlvbiB3cigpIHtcbiAgY29uc3QgZSA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpWzBdO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBmaXJzdCBuYXZpZ2F0aW9uIGVudHJ5LlwiKTtcbiAgcmV0dXJuIEVvKGUubmFtZSk7XG59XG5jb25zdCBTciA9IFwibGF1bmNoUGFyYW1zXCI7XG5mdW5jdGlvbiB5cigpIHtcbiAgcmV0dXJuIHF0KFAoU3IpIHx8IFwiXCIpO1xufVxuZnVuY3Rpb24gd28oZSkge1xuICBPKFwibGF1bmNoUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyBacyhlKSk7XG59XG5mdW5jdGlvbiBTbyhlKSB7XG4gIHJldHVybiBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgKyAoZS5jYXVzZSA/IGBcbiAgJHtTbyhlLmNhdXNlKX1gIDogXCJcIikgOiBKU09OLnN0cmluZ2lmeShlKTtcbn1cbmZ1bmN0aW9uIG9lKCkge1xuICBjb25zdCBlID0gW107XG4gIGZvciAoY29uc3QgdCBvZiBbXG4gICAgLy8gVHJ5IHRvIHJldHJpZXZlIGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gdGhlIGN1cnJlbnQgbG9jYXRpb24uIFRoaXMgbWV0aG9kIGNhbiByZXR1cm5cbiAgICAvLyBub3RoaW5nIGluIGNhc2UsIGxvY2F0aW9uIHdhcyBjaGFuZ2VkLCBhbmQgdGhlbiB0aGUgcGFnZSB3YXMgcmVsb2FkZWQuXG4gICAgRXIsXG4gICAgLy8gVGhlbiwgdHJ5IHVzaW5nIHRoZSBsb3dlciBsZXZlbCBBUEkgLSB3aW5kb3cucGVyZm9ybWFuY2UuXG4gICAgd3IsXG4gICAgLy8gRmluYWxseSwgdHJ5IHRvIGV4dHJhY3QgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSB0aGUgc2Vzc2lvbiBzdG9yYWdlLlxuICAgIHlyXG4gIF0pXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG4gPSB0KCk7XG4gICAgICByZXR1cm4gd28obiksIG47XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgZS5wdXNoKG4pO1xuICAgIH1cbiAgdGhyb3cgbmV3IGwobXIsIFtcbiAgICBcIlVuYWJsZSB0byByZXRyaWV2ZSBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIGFueSBrbm93biBzb3VyY2UuIFBlcmhhcHMsIHlvdSBoYXZlIG9wZW5lZCB5b3VyIGFwcCBvdXRzaWRlIFRlbGVncmFtP1wiLFxuICAgIFwi8J+TliBSZWZlciB0byBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uOlwiLFxuICAgIFwiaHR0cHM6Ly9kb2NzLnRlbGVncmFtLW1pbmktYXBwcy5jb20vcGFja2FnZXMvdGVsZWdyYW0tYXBwcy1icmlkZ2UvZW52aXJvbm1lbnRcIixcbiAgICBcIkNvbGxlY3RlZCBlcnJvcnM6XCIsXG4gICAgLi4uZS5tYXAoKHQpID0+IGDigJQgJHtTbyh0KX1gKVxuICBdLmpvaW4oYFxuYCkpO1xufVxuZnVuY3Rpb24gQm4oZSkge1xuICBpZiAoZSA9PT0gXCJzaW1wbGVcIilcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG9lKCksICEwO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgcmV0dXJuIGIud2l0aEZuKGFzeW5jICgpID0+IHtcbiAgICBpZiAoaW8od2luZG93KSlcbiAgICAgIHJldHVybiAhMDtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IFV0KFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsIFwidGhlbWVfY2hhbmdlZFwiLCB7IHRpbWVvdXQ6IDEwMCB9KSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9LCBlKTtcbn1cbmZ1bmN0aW9uIHZ0KGUsIHQpIHtcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IE1lc3NhZ2VFdmVudChcIm1lc3NhZ2VcIiwge1xuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSksXG4gICAgLy8gV2Ugc3BlY2lmeSB3aW5kb3cucGFyZW50IHRvIGltaXRhdGUgdGhlIGNhc2UsIHRoZSBwYXJlbnQgaWZyYW1lIHNlbnQgdXMgdGhpcyBldmVudC5cbiAgICBzb3VyY2U6IHdpbmRvdy5wYXJlbnRcbiAgfSkpO1xufVxuZnVuY3Rpb24gQXIoZSwgdCkge1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBldmVudFR5cGU6IG4gfSA9IHJvKCkodCk7XG4gICAgICBuID09PSBcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiICYmIHZ0KFwidGhlbWVfY2hhbmdlZFwiLCB7XG4gICAgICAgIHRoZW1lX3BhcmFtczogSlNPTi5wYXJzZSgvKiBAX19QVVJFX18gKi8gQXQoZSkpXG4gICAgICB9KSwgbiA9PT0gXCJ3ZWJfYXBwX3JlcXVlc3Rfdmlld3BvcnRcIiAmJiB2dChcInZpZXdwb3J0X2NoYW5nZWRcIiwge1xuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICBpc19zdGF0ZV9zdGFibGU6ICEwLFxuICAgICAgICBpc19leHBhbmRlZDogITBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbn1cbmZ1bmN0aW9uIFZjKGUpIHtcbiAgdmFyIHQ7XG4gIGNvbnN0IG4gPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gcXQoZSkgOiBlO1xuICB3byhuKTtcbiAgY29uc3QgbyA9ICh0ID0gd2luZG93LlRlbGVncmFtV2Vidmlld1Byb3h5KSA9PSBudWxsID8gdm9pZCAwIDogdC5wb3N0RXZlbnQ7XG4gIHdpbmRvdy5UZWxlZ3JhbVdlYnZpZXdQcm94eSA9IHtcbiAgICBwb3N0RXZlbnQocywgcikge1xuICAgICAgQXIobi50aGVtZVBhcmFtcywgSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IHMsIGV2ZW50RGF0YTogciB9KSksIG8gPT0gbnVsbCB8fCBvKHMsIHIpO1xuICAgIH1cbiAgfSwganQoXCJFbnZpcm9ubWVudCB3YXMgbW9ja2VkIGJ5IHRoZSBtb2NrVGVsZWdyYW1FbnYgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBDcigpIHtcbiAgW1xuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5X3JlY2VpdmVFdmVudFwiXSxcbiAgICAvLyBXaW5kb3dzIFBob25lLlxuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5XCIsIFwicmVjZWl2ZUV2ZW50XCJdLFxuICAgIC8vIERlc2t0b3AuXG4gICAgW1wiVGVsZWdyYW1cIiwgXCJXZWJWaWV3XCIsIFwicmVjZWl2ZUV2ZW50XCJdXG4gICAgLy8gQW5kcm9pZCBhbmQgaU9TLlxuICBdLmZvckVhY2goKGUpID0+IHtcbiAgICBsZXQgdCA9IHdpbmRvdztcbiAgICBlLmZvckVhY2goKG4sIG8sIHMpID0+IHtcbiAgICAgIGlmIChvID09PSBzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdFtuXSA9IHZ0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBuIGluIHQgfHwgKHRbbl0gPSB7fSksIHQgPSB0W25dO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHZyKCkge1xuICBbXCJUZWxlZ3JhbUdhbWVQcm94eV9yZWNlaXZlRXZlbnRcIiwgXCJUZWxlZ3JhbUdhbWVQcm94eVwiLCBcIlRlbGVncmFtXCJdLmZvckVhY2goKGUpID0+IHtcbiAgICBkZWxldGUgd2luZG93W2VdO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHYoZSwgdCwgbikge1xuICBibyhlKS51bnN1Yih0LCBuKTtcbn1cbmZ1bmN0aW9uIExjKGUsIHQpIHtcbiAgcmV0dXJuIGhvKCkuc3ViKGUsIHQpO1xufVxuZnVuY3Rpb24gamMoZSwgdCkge1xuICBDdC51bnN1YihlLCB0KTtcbn1cbmZ1bmN0aW9uIHlvKGUpIHtcbiAgcmV0dXJuICh7IHJlcV9pZDogdCB9KSA9PiB0ID09PSBlO1xufVxuZnVuY3Rpb24gTW4oZSkge1xuICByZXR1cm4gZS5zcGxpdChcIi5cIikubWFwKE51bWJlcik7XG59XG5mdW5jdGlvbiBUcihlLCB0KSB7XG4gIGNvbnN0IG4gPSBNbihlKSwgbyA9IE1uKHQpLCBzID0gTWF0aC5tYXgobi5sZW5ndGgsIG8ubGVuZ3RoKTtcbiAgZm9yIChsZXQgciA9IDA7IHIgPCBzOyByICs9IDEpIHtcbiAgICBjb25zdCBhID0gbltyXSB8fCAwLCBpID0gb1tyXSB8fCAwO1xuICAgIGlmIChhICE9PSBpKVxuICAgICAgcmV0dXJuIGEgPiBpID8gMSA6IC0xO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gUyhlLCB0KSB7XG4gIHJldHVybiBUcihlLCB0KSA8PSAwO1xufVxuZnVuY3Rpb24gUShlLCB0LCBuKSB7XG4gIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9vcGVuX2xpbmtcIikge1xuICAgICAgaWYgKHQgPT09IFwidHJ5X2luc3RhbnRfdmlld1wiKVxuICAgICAgICByZXR1cm4gUyhcIjYuNFwiLCBuKTtcbiAgICAgIGlmICh0ID09PSBcInRyeV9icm93c2VyXCIpXG4gICAgICAgIHJldHVybiBTKFwiNy42XCIsIG4pO1xuICAgIH1cbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiAmJiB0ID09PSBcImNvbG9yXCIpXG4gICAgICByZXR1cm4gUyhcIjYuOVwiLCBuKTtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX2Nsb3NlXCIgJiYgdCA9PT0gXCJyZXR1cm5fYmFja1wiKVxuICAgICAgcmV0dXJuIFMoXCI3LjZcIiwgbik7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiICYmIHQgPT09IFwiaGFzX3NoaW5lX2VmZmVjdFwiKVxuICAgICAgcmV0dXJuIFMoXCI3LjEwXCIsIG4pO1xuICB9XG4gIHN3aXRjaCAoZSkge1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fdGdfbGlua1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5faW52b2ljZVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX2JhY2tfYnV0dG9uXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2JhY2tncm91bmRfY29sb3JcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfdHJpZ2dlcl9oYXB0aWNfZmVlZGJhY2tcIjpcbiAgICAgIHJldHVybiBTKFwiNi4xXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fcG9wdXBcIjpcbiAgICAgIHJldHVybiBTKFwiNi4yXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2Nsb3NlX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZWFkX3RleHRfZnJvbV9jbGlwYm9hcmRcIjpcbiAgICAgIHJldHVybiBTKFwiNi40XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3N3aXRjaF9pbmxpbmVfcXVlcnlcIjpcbiAgICAgIHJldHVybiBTKFwiNi43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF93cml0ZV9hY2Nlc3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3Bob25lXCI6XG4gICAgICByZXR1cm4gUyhcIjYuOVwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zZXR0aW5nc19idXR0b25cIjpcbiAgICAgIHJldHVybiBTKFwiNi4xMFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9nZXRfaW5mb1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X29wZW5fc2V0dGluZ3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9yZXF1ZXN0X2FjY2Vzc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYXV0aFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3VwZGF0ZV90b2tlblwiOlxuICAgICAgcmV0dXJuIFMoXCI3LjJcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc3dpcGVfYmVoYXZpb3JcIjpcbiAgICAgIHJldHVybiBTKFwiNy43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NoYXJlX3RvX3N0b3J5XCI6XG4gICAgICByZXR1cm4gUyhcIjcuOFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zZWNvbmRhcnlfYnV0dG9uXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2JvdHRvbV9iYXJfY29sb3JcIjpcbiAgICAgIHJldHVybiBTKFwiNy4xMFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3NhZmVfYXJlYVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfY29udGVudF9zYWZlX2FyZWFcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X2Z1bGxzY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9leGl0X2Z1bGxzY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfZW1vamlfc3RhdHVzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYWRkX3RvX2hvbWVfc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfY2hlY2tfaG9tZV9zY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X2Vtb2ppX3N0YXR1c19hY2Nlc3NcIjpcbiAgICAgIHJldHVybiBTKFwiOC4wXCIsIHQpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gW1xuICAgICAgICBcImlmcmFtZV9yZWFkeVwiLFxuICAgICAgICBcImlmcmFtZV93aWxsX3JlbG9hZFwiLFxuICAgICAgICBcIndlYl9hcHBfY2xvc2VcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2RhdGFfc2VuZFwiLFxuICAgICAgICBcIndlYl9hcHBfZXhwYW5kXCIsXG4gICAgICAgIFwid2ViX2FwcF9vcGVuX2xpbmtcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlYWR5XCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIsXG4gICAgICAgIFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiLFxuICAgICAgICBcIndlYl9hcHBfc2V0dXBfY2xvc2luZ19iZWhhdmlvclwiXG4gICAgICBdLmluY2x1ZGVzKGUpO1xuICB9XG59XG5mdW5jdGlvbiAkcihlLCB0KSB7XG4gIHQgfHwgKHQgPSBcInN0cmljdFwiKTtcbiAgY29uc3QgbiA9IHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IHQgOiAobykgPT4ge1xuICAgIGNvbnN0IHsgbWV0aG9kOiBzLCB2ZXJzaW9uOiByIH0gPSBvO1xuICAgIGxldCBhLCBpO1xuICAgIGlmIChcInBhcmFtXCIgaW4gbyA/IChhID0gYFBhcmFtZXRlciBcIiR7by5wYXJhbX1cIiBvZiBcIiR7c31cIiBtZXRob2QgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtyfWAsIGkgPSBocikgOiAoYSA9IGBNZXRob2QgXCIke3N9XCIgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtyfWAsIGkgPSBkciksIHQgPT09IFwic3RyaWN0XCIpXG4gICAgICB0aHJvdyBuZXcgbChpLCBhKTtcbiAgICByZXR1cm4gY29uc29sZS53YXJuKGEpO1xuICB9O1xuICByZXR1cm4gKG8sIHMpID0+IFEobywgZSkgPyBYcyhzKSAmJiBvID09PSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiICYmIFwiY29sb3JcIiBpbiBzICYmICFRKG8sIFwiY29sb3JcIiwgZSkgPyBuKHsgdmVyc2lvbjogZSwgbWV0aG9kOiBvLCBwYXJhbTogXCJjb2xvclwiIH0pIDogSHQobywgcykgOiBuKHsgdmVyc2lvbjogZSwgbWV0aG9kOiBvIH0pO1xufVxuZnVuY3Rpb24gUnIoZSwgdCwgbiwgbykge1xuICByZXR1cm4gVXQoXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCIsIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIsIHtcbiAgICAuLi5vIHx8IHt9LFxuICAgIHBhcmFtczogeyBtZXRob2Q6IGUsIHBhcmFtczogdCwgcmVxX2lkOiBuIH0sXG4gICAgY2FwdHVyZTogeW8obilcbiAgfSkudGhlbigoeyByZXN1bHQ6IHMsIGVycm9yOiByIH0pID0+IHtcbiAgICBpZiAocilcbiAgICAgIHRocm93IG5ldyBsKGJyLCByKTtcbiAgICByZXR1cm4gcztcbiAgfSk7XG59XG5mdW5jdGlvbiBPcigpIHtcbiAgcmV0dXJuIHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpWzBdO1xufVxuZnVuY3Rpb24gRCgpIHtcbiAgY29uc3QgZSA9IE9yKCk7XG4gIHJldHVybiAhIWUgJiYgZS50eXBlID09PSBcInJlbG9hZFwiO1xufVxubGV0IFo7XG5mdW5jdGlvbiBQcihlLCB0KSB7XG4gIFogJiYgWi5zZXQoZSwgdCkgfHwgdCgpO1xufVxuZnVuY3Rpb24gVHQoZSkge1xuICBpZiAoWilcbiAgICByZXR1cm4gZSgpO1xuICBaID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgdHJ5IHtcbiAgICBlKCk7XG4gIH0gZmluYWxseSB7XG4gICAgWi5mb3JFYWNoKCh0KSA9PiB0KCkpLCBaID0gdm9pZCAwO1xuICB9XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gYyhlLCB0KSB7XG4gIHQgfHwgKHQgPSB7fSk7XG4gIGNvbnN0IG4gPSB0LmVxdWFscyB8fCBPYmplY3QuaXM7XG4gIGxldCBvID0gW10sIHMgPSBlO1xuICBjb25zdCByID0gKHUpID0+IHtcbiAgICBpZiAoIW4ocywgdSkpIHtcbiAgICAgIGNvbnN0IGQgPSBzO1xuICAgICAgcyA9IHUsIFByKHAsICgpID0+IHtcbiAgICAgICAgWy4uLm9dLmZvckVhY2goKFt3LCBBXSkgPT4ge1xuICAgICAgICAgIHcodSwgZCksIEEgJiYgaSh3LCAhMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICBjb25zdCBkID0gdHlwZW9mIHUgIT0gXCJvYmplY3RcIiA/IHsgb25jZTogdSB9IDogdTtcbiAgICByZXR1cm4ge1xuICAgICAgb25jZTogZC5vbmNlIHx8ICExLFxuICAgICAgc2lnbmFsOiBkLnNpZ25hbCB8fCAhMVxuICAgIH07XG4gIH1cbiAgY29uc3QgaSA9ICh1LCBkKSA9PiB7XG4gICAgY29uc3QgdyA9IGEoZCksIEEgPSBvLmZpbmRJbmRleCgoW3gsIFRdKSA9PiB4ID09PSB1ICYmIFQub25jZSA9PT0gdy5vbmNlICYmIFQuc2lnbmFsID09PSB3LnNpZ25hbCk7XG4gICAgQSA+PSAwICYmIG8uc3BsaWNlKEEsIDEpO1xuICB9LCBwID0gT2JqZWN0LmFzc2lnbihcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCcihwKSwgcztcbiAgICB9LFxuICAgIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIG8gPSBbXTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IHIsXG4gICAgICByZXNldCgpIHtcbiAgICAgICAgcihlKTtcbiAgICAgIH0sXG4gICAgICBzdWIodSwgZCkge1xuICAgICAgICByZXR1cm4gby5wdXNoKFt1LCBhKGQpXSksICgpID0+IGkodSwgZCk7XG4gICAgICB9LFxuICAgICAgdW5zdWI6IGksXG4gICAgICB1bnN1YkFsbCgpIHtcbiAgICAgICAgbyA9IG8uZmlsdGVyKCh1KSA9PiB1WzFdLnNpZ25hbCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gcDtcbn1cbmNvbnN0IHVlID0gW107XG5mdW5jdGlvbiBCcihlKSB7XG4gIHVlLmxlbmd0aCAmJiB1ZVt1ZS5sZW5ndGggLSAxXS5hZGQoZSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gXyhlLCB0KSB7XG4gIGxldCBuID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSwgbztcbiAgZnVuY3Rpb24gcygpIHtcbiAgICByZXR1cm4gbyB8fCAobyA9IC8qIEBfX1BVUkVfXyAqLyBjKGEoKSwgdCkpO1xuICB9XG4gIGZ1bmN0aW9uIHIoKSB7XG4gICAgcygpLnNldChhKCkpO1xuICB9XG4gIGZ1bmN0aW9uIGEoKSB7XG4gICAgbi5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICB1LnVuc3ViKHIsIHsgc2lnbmFsOiAhMCB9KTtcbiAgICB9KTtcbiAgICBjb25zdCBpID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBsZXQgcDtcbiAgICB1ZS5wdXNoKGkpO1xuICAgIHRyeSB7XG4gICAgICBwID0gZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB1ZS5wb3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIGkuZm9yRWFjaCgodSkgPT4ge1xuICAgICAgdS5zdWIociwgeyBzaWduYWw6ICEwIH0pO1xuICAgIH0pLCBuID0gaSwgcDtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcygpKCk7XG4gIH0sIHtcbiAgICBkZXN0cm95KCkge1xuICAgICAgcygpLmRlc3Ryb3koKTtcbiAgICB9LFxuICAgIHN1YiguLi5pKSB7XG4gICAgICByZXR1cm4gcygpLnN1YiguLi5pKTtcbiAgICB9LFxuICAgIHVuc3ViKC4uLmkpIHtcbiAgICAgIHMoKS51bnN1YiguLi5pKTtcbiAgICB9LFxuICAgIHVuc3ViQWxsKC4uLmkpIHtcbiAgICAgIHMoKS51bnN1YkFsbCguLi5pKTtcbiAgICB9XG4gIH0pO1xufVxuY29uc3QgTXIgPSAvKiBAX19QVVJFX18gKi8gYygvKiBAX19QVVJFX18gKi8gKCgpID0+IHtcbiAgbGV0IGUgPSAwO1xuICByZXR1cm4gKCkgPT4gKGUgKz0gMSkudG9TdHJpbmcoKTtcbn0pKCkpLCBBbyA9IC8qIEBfX1BVUkVfXyAqLyBjKEh0KSwgViA9IC8qIEBfX1BVUkVfXyAqLyBjKFwiMC4wXCIpO1xuZnVuY3Rpb24gSXIoZSkge1xuICBlIHx8IChlID0ge30pO1xuICBjb25zdCB7IHBvc3RFdmVudDogdCB9ID0gZSwgbiA9IGUudmVyc2lvbiB8fCBvZSgpLnZlcnNpb247XG4gIFYuc2V0KG4pLCBBby5zZXQoXG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gdCA6ICRyKG4pXG4gICk7XG59XG5mdW5jdGlvbiBDbygpIHtcbiAgcmV0dXJuIE1yKCkoKTtcbn1cbmZ1bmN0aW9uIHNlKGUsIHQsIG4pIHtcbiAgcmV0dXJuIFJyKGUsIHQsIENvKCksIHtcbiAgICAuLi5uIHx8IHt9LFxuICAgIHBvc3RFdmVudDogZlxuICB9KTtcbn1cbmNvbnN0IHkgPSAoZSwgdCwgbikgPT4gKG4gfHwgKG4gPSB7fSksIG4ucG9zdEV2ZW50IHx8IChuLnBvc3RFdmVudCA9IGYpLCBVdChlLCB0LCBuKSksIGYgPSAoZSwgdCkgPT4gQW8oKShlLCB0KTtcbmZ1bmN0aW9uIE4oZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gUShlLCBWKCkpKTtcbn1cbmNvbnN0IGNlID0gXCJFUlJfUE9QVVBfSU5WQUxJRF9QQVJBTVNcIiwgRnQgPSBcIkVSUl9JTlZBTElEX1VSTFwiLCBEciA9IFwiRVJSX0lOVkFMSURfU0xVR1wiLCBOciA9IFwiRVJSX0RBVEFfSU5WQUxJRF9TSVpFXCIsIGtyID0gXCJFUlJfQUNDRVNTX0RFTklFRFwiLCBxID0gXCJFUlJfQUxSRUFEWV9SRVFVRVNUSU5HXCIsIFd0ID0gXCJFUlJfQUxSRUFEWV9PUEVORURcIiwgeHIgPSBcIkVSUl9BTFJFQURZX01PVU5USU5HXCIsIFZyID0gXCJFUlJfVkFSU19BTFJFQURZX0JPVU5EXCIsIExyID0gXCJFUlJfTk9UX0FWQUlMQUJMRVwiLCBqciA9IFwiRVJSX05PVF9JTklUSUFMSVpFRFwiLCBJbiA9IFwiRVJSX05PVF9TVVBQT1JURURcIiwgSHIgPSBcIkVSUl9OT1RfTU9VTlRFRFwiLCBVciA9IFwiRVJSX0ZVTExTQ1JFRU5fRkFJTEVEXCIsIHFyID0gXCJFUlJfRU1PSklfU1RBVFVTX1NFVF9GQUlMRURcIjtcbmZ1bmN0aW9uIERuKCkge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdyA+IFwidVwiO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGgoZSwgdCwgeyBpc1N1cHBvcnRlZDogbiwgaXNNb3VudGVkOiBvLCBjb21wb25lbnQ6IHMsIHN1cHBvcnRzOiByIH0gPSB7fSkge1xuICBjb25zdCBhID0gYCR7cyA/IGAke3N9LmAgOiBcIlwifSR7ZX0oKWA7XG4gIG4gPSBuID8gQXJyYXkuaXNBcnJheShuKSB8fCB0eXBlb2YgbiA9PSBcIm9iamVjdFwiICYmIFwiYW55XCIgaW4gbiA/IG4gOiBbbl0gOiB2b2lkIDA7XG4gIGZ1bmN0aW9uIGkoZykge1xuICAgIGlmIChyKSB7XG4gICAgICBjb25zdCBtID0gcltnXTtcbiAgICAgIHJldHVybiBRKG1bMF0sIG1bMV0sIFYoKSk7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbiAgfVxuICBjb25zdCBwID0gKCkgPT4ge1xuICAgIGlmICghbilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBnID0gYGl0IGlzIHVuc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7VigpfWA7XG4gICAgZnVuY3Rpb24gbSgkKSB7XG4gICAgICByZXR1cm4gdHlwZW9mICQgPT0gXCJzdHJpbmdcIiA/IFEoJCwgVigpKSA/IHZvaWQgMCA6IGcgOiAkLmZuKCkgPyB2b2lkIDAgOiAkLmVycm9yO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuKSkge1xuICAgICAgZm9yIChjb25zdCAkIG9mIG4pIHtcbiAgICAgICAgY29uc3QgQ24gPSBtKCQpO1xuICAgICAgICBpZiAoQ24pXG4gICAgICAgICAgcmV0dXJuIENuO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgVztcbiAgICBmb3IgKGNvbnN0ICQgb2Ygbi5hbnkpXG4gICAgICBpZiAoVyA9IG0oJCksICFXKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIGc7XG4gIH0sIHUgPSAoLi4uZykgPT4ge1xuICAgIGlmIChyKSB7XG4gICAgICBmb3IgKGNvbnN0IG0gaW4gcilcbiAgICAgICAgaWYgKHJbbV1bMl0oLi4uZykgJiYgIWkobSkpXG4gICAgICAgICAgcmV0dXJuIGBvcHRpb24gJHttfSBpcyBub3Qgc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7VigpfWA7XG4gICAgfVxuICB9LCBkID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gIXAoKSksIHcgPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiBWKCkgIT09IFwiMC4wXCIpLCBBID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gIW8gfHwgbygpKSwgeCA9IC8qIEBfX1BVUkVfXyAqLyBfKFxuICAgICgpID0+IEJuKFwic2ltcGxlXCIpICYmICFEbigpICYmIHcoKSAmJiBkKCkgJiYgQSgpXG4gICk7XG4gIGxldCBUO1xuICBpZiAocikge1xuICAgIFQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgaW4gcilcbiAgICAgIFRbZ10gPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiBpKGcpKTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICAoLi4uZykgPT4ge1xuICAgICAgY29uc3QgbSA9IGBVbmFibGUgdG8gY2FsbCB0aGUgJHthfSAke3MgPyBcIm1ldGhvZFwiIDogXCJmdW5jdGlvblwifTpgO1xuICAgICAgaWYgKERuKCkgfHwgIUJuKFwic2ltcGxlXCIpKVxuICAgICAgICB0aHJvdyBuZXcgbChcbiAgICAgICAgICBnbyxcbiAgICAgICAgICBgJHttfSBpdCBjYW4ndCBiZSBjYWxsZWQgb3V0c2lkZSBNaW5pIEFwcHNgXG4gICAgICAgICk7XG4gICAgICBpZiAoIXcoKSlcbiAgICAgICAgdGhyb3cgbmV3IGwoXG4gICAgICAgICAganIsXG4gICAgICAgICAgYCR7bX0gdGhlIFNESyB3YXMgbm90IGluaXRpYWxpemVkLiBVc2UgdGhlIFNESyBpbml0KCkgZnVuY3Rpb25gXG4gICAgICAgICk7XG4gICAgICBjb25zdCBXID0gcCgpO1xuICAgICAgaWYgKFcpXG4gICAgICAgIHRocm93IG5ldyBsKEluLCBgJHttfSAke1d9YCk7XG4gICAgICBjb25zdCAkID0gdSguLi5nKTtcbiAgICAgIGlmICgkKVxuICAgICAgICB0aHJvdyBuZXcgbChJbiwgYCR7bX0gJHskfWApO1xuICAgICAgaWYgKCFBKCkpXG4gICAgICAgIHRocm93IG5ldyBsKFxuICAgICAgICAgIEhyLFxuICAgICAgICAgIGAke219IHRoZSBjb21wb25lbnQgaXMgbm90IG1vdW50ZWQuIFVzZSB0aGUgJHtzfS5tb3VudCgpIG1ldGhvZGBcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiB0KC4uLmcpO1xuICAgIH0sXG4gICAgdCxcbiAgICB7XG4gICAgICBpc0F2YWlsYWJsZTogeCxcbiAgICAgIGlmQXZhaWxhYmxlKC4uLmcpIHtcbiAgICAgICAgcmV0dXJuIHgoKSA/IHQoLi4uZykgOiB2b2lkIDA7XG4gICAgICB9XG4gICAgfSxcbiAgICBuID8ge1xuICAgICAgaXNTdXBwb3J0ZWQ6IGRcbiAgICB9IDoge30sXG4gICAgVCA/IHtcbiAgICAgIHN1cHBvcnRzOiBUXG4gICAgfSA6IHt9XG4gICk7XG59XG5mdW5jdGlvbiBXZShlLCB0KSB7XG4gIHJldHVybiB0IHx8ICh0ID0ge30pLCAobiwgbywgcywgcikgPT4gLyogQF9fUFVSRV9fICovIGgobiwgbywge1xuICAgIC4uLnQsXG4gICAgaXNTdXBwb3J0ZWQ6IHMgfHwgdC5pc1N1cHBvcnRlZCxcbiAgICBzdXBwb3J0czogcixcbiAgICBjb21wb25lbnQ6IGVcbiAgfSk7XG59XG5mdW5jdGlvbiBKKGUsIHQsIG4pIHtcbiAgcmV0dXJuIFdlKGUsIHsgaXNTdXBwb3J0ZWQ6IG4sIGlzTW91bnRlZDogdCB9KTtcbn1cbmZ1bmN0aW9uIEIoZSwgdCkge1xuICByZXR1cm4gV2UoZSwgeyBpc1N1cHBvcnRlZDogdCB9KTtcbn1cbmNvbnN0IEdlID0gXCJ3ZWJfYXBwX3NldHVwX2JhY2tfYnV0dG9uXCIsIHZvID0gXCJiYWNrX2J1dHRvbl9wcmVzc2VkXCIsIHplID0gXCJiYWNrQnV0dG9uXCIsICR0ID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBtZSA9IC8qIEBfX1BVUkVfXyAqLyBjKCExKSwgRnIgPSBOKEdlKSwgVG8gPSBKKHplLCBtZSwgR2UpLCBHdCA9IEIoemUsIEdlKSwgV3IgPSBUbyhcImhpZGVcIiwgKCkgPT4ge1xuICB6dCghMSk7XG59KSwgR3IgPSBHdChcIm1vdW50XCIsICgpID0+IHtcbiAgbWUoKSB8fCAoenQoRCgpICYmIFAoemUpIHx8ICExKSwgbWUuc2V0KCEwKSk7XG59KTtcbmZ1bmN0aW9uIHp0KGUpIHtcbiAgZSAhPT0gJHQoKSAmJiAoZihHZSwgeyBpc192aXNpYmxlOiBlIH0pLCBPKHplLCBlKSwgJHQuc2V0KGUpKTtcbn1cbmNvbnN0IHpyID0gR3QoXG4gIFwib25DbGlja1wiLFxuICAoZSkgPT4gRSh2bywgZSlcbiksIFFyID0gR3QoXG4gIFwib2ZmQ2xpY2tcIixcbiAgKGUpID0+IHtcbiAgICB2KHZvLCBlKTtcbiAgfVxuKSwgSnIgPSBUbyhcInNob3dcIiwgKCkgPT4ge1xuICB6dCghMCk7XG59KTtcbmZ1bmN0aW9uIFlyKCkge1xuICBtZS5zZXQoITEpO1xufVxuY29uc3QgSGMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHtcbiAgX19wcm90b19fOiBudWxsLFxuICBoaWRlOiBXcixcbiAgaXNNb3VudGVkOiBtZSxcbiAgaXNTdXBwb3J0ZWQ6IEZyLFxuICBpc1Zpc2libGU6ICR0LFxuICBtb3VudDogR3IsXG4gIG9mZkNsaWNrOiBRcixcbiAgb25DbGljazogenIsXG4gIHNob3c6IEpyLFxuICB1bm1vdW50OiBZclxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKTtcbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBSZShlLCB0LCBuLCBvLCBzKSB7XG4gIGNvbnN0IHIgPSBzID09PSB2b2lkIDAgfHwgcyA/IGIgOiBQcm9taXNlO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbigoLi4uYSkgPT4gci5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgaWYgKG4oKSkge1xuICAgICAgY29uc3QgcCA9IHQoKTtcbiAgICAgIHRocm93IG8uc2V0KHApLCBwO1xuICAgIH1cbiAgICBUdCgoKSA9PiB7XG4gICAgICBuLnNldChcbiAgICAgICAgci5yZXNvbHZlKGUoLi4uYSkpXG4gICAgICApLCBvLnNldCh2b2lkIDApO1xuICAgIH0pO1xuICAgIGxldCBpO1xuICAgIHRyeSB7XG4gICAgICBpID0gWyEwLCBhd2FpdCBuKCldO1xuICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgIGkgPSBbITEsIHBdO1xuICAgIH1cbiAgICBpZiAoVHQoKCkgPT4ge1xuICAgICAgbi5zZXQodm9pZCAwKSwgby5zZXQoaVswXSA/IHZvaWQgMCA6IGlbMV0pO1xuICAgIH0pLCAhaVswXSlcbiAgICAgIHRocm93IGlbMV07XG4gICAgcmV0dXJuIGlbMV07XG4gIH0pLCBlKTtcbn1cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiAkbyhlLCB0LCBuLCBvLCBzLCByKSB7XG4gIGNvbnN0IGEgPSAvKiBAX19QVVJFX18gKi8gUmUoXG4gICAgdCxcbiAgICAoKSA9PiBuZXcgbChcbiAgICAgIHhyLFxuICAgICAgYFRoZSAke2V9IGNvbXBvbmVudCBpcyBhbHJlYWR5IG1vdW50aW5nYFxuICAgICksXG4gICAgcyxcbiAgICByXG4gICk7XG4gIHJldHVybiAoaSkgPT4gYi5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFvKCkpIHtcbiAgICAgIGNvbnN0IHAgPSBhd2FpdCBhKGkpO1xuICAgICAgVHQoKCkgPT4ge1xuICAgICAgICBvLnNldCghMCksIG4ocCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuY29uc3QgSCA9IFdlLCBRZSA9IC8qIEBfX1BVUkVfXyAqLyBjKHsgYXZhaWxhYmxlOiAhMSB9KSwgSWUgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIERlID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBKZSA9IC8qIEBfX1BVUkVfXyAqLyBjKCExKSwgS3IgPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiAhIVF0KCkpLCBSbyA9IC8qIEBfX1BVUkVfXyAqLyBjKCksIFF0ID0gLyogQF9fUFVSRV9fICovIGMoKSwgWnIgPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiB7XG4gIGNvbnN0IGUgPSBRZSgpO1xuICByZXR1cm4gZSAmJiBlLmF2YWlsYWJsZTtcbn0pO1xuZnVuY3Rpb24gSnQoZSkge1xuICByZXR1cm4gZS5hdmFpbGFibGUgPyB7XG4gICAgYXZhaWxhYmxlOiAhMCxcbiAgICB0b2tlblNhdmVkOiBlLnRva2VuX3NhdmVkLFxuICAgIGRldmljZUlkOiBlLmRldmljZV9pZCxcbiAgICBhY2Nlc3NSZXF1ZXN0ZWQ6IGUuYWNjZXNzX3JlcXVlc3RlZCxcbiAgICB0eXBlOiBlLnR5cGUsXG4gICAgYWNjZXNzR3JhbnRlZDogZS5hY2Nlc3NfZ3JhbnRlZFxuICB9IDoge1xuICAgIGF2YWlsYWJsZTogITFcbiAgfTtcbn1cbmNvbnN0IE5uID0gXCJ3ZWJfYXBwX2Jpb21ldHJ5X2dldF9pbmZvXCIsIFhyID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwicmVxdWVzdEJpb21ldHJ5XCIsXG4gIChlKSA9PiB5KE5uLCBcImJpb21ldHJ5X2luZm9fcmVjZWl2ZWRcIiwgZSkudGhlbihKdCksXG4gIHtcbiAgICBpc1N1cHBvcnRlZDogTm5cbiAgfVxuKSwgWWUgPSBcIndlYl9hcHBfYmlvbWV0cnlfcmVxdWVzdF9hdXRoXCIsIGVhID0gXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYWNjZXNzXCIsIHRhID0gXCJ3ZWJfYXBwX2Jpb21ldHJ5X29wZW5fc2V0dGluZ3NcIiwgbmEgPSBcIndlYl9hcHBfYmlvbWV0cnlfdXBkYXRlX3Rva2VuXCIsIFl0ID0gXCJiaW9tZXRyeV9pbmZvX3JlY2VpdmVkXCIsIGVlID0gXCJiaW9tZXRyeVwiLCBvYSA9IE4oWWUpLCBzYSA9IEgoZWUpLCByYSA9IEIoZWUsIFllKSwgS3QgPSBKKGVlLCBKZSwgWWUpO1xuZnVuY3Rpb24gT28oKSB7XG4gIHRocm93IG5ldyBsKExyLCBcIkJpb21ldHJ5IGlzIG5vdCBhdmFpbGFibGVcIik7XG59XG5jb25zdCBhYSA9IEt0KFxuICBcImF1dGhlbnRpY2F0ZVwiLFxuICAoZSkgPT4gYi53aXRoRm4oYXN5bmMgKHQpID0+IHtcbiAgICBpZiAoSWUoKSlcbiAgICAgIHRocm93IG5ldyBsKHEsIFwiQXV0aGVudGljYXRpb24gaXMgYWxyZWFkeSBpbiBwcm9ncmVzc1wiKTtcbiAgICBjb25zdCBuID0gUWUoKTtcbiAgICAoIW4gfHwgIW4uYXZhaWxhYmxlKSAmJiBPbygpLCBJZS5zZXQoITApO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvID0gYXdhaXQgeShcbiAgICAgICAgWWUsXG4gICAgICAgIFwiYmlvbWV0cnlfYXV0aF9yZXF1ZXN0ZWRcIixcbiAgICAgICAge1xuICAgICAgICAgIGFib3J0U2lnbmFsOiB0LFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgcmVhc29uOiAoKGUgfHwge30pLnJlYXNvbiB8fCBcIlwiKS50cmltKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksIHsgdG9rZW46IHMgfSA9IG87XG4gICAgICByZXR1cm4gdHlwZW9mIHMgPT0gXCJzdHJpbmdcIiAmJiBLZSh7IC4uLm4sIHRva2VuOiBzIH0pLCBvO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBJZS5zZXQoITEpO1xuICAgIH1cbiAgfSwgZSlcbiksIGlhID0gcmEoXCJvcGVuU2V0dGluZ3NcIiwgKCkgPT4ge1xuICBmKHRhKTtcbn0pLCBjYSA9IEt0KFxuICBcInJlcXVlc3RBY2Nlc3NcIixcbiAgKGUpID0+IGIud2l0aEZuKGFzeW5jICh0KSA9PiB7XG4gICAgaWYgKERlKCkpXG4gICAgICB0aHJvdyBuZXcgbChxLCBcIkFjY2VzcyByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcIik7XG4gICAgRGUuc2V0KCEwKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbiA9IGF3YWl0IHkoZWEsIFl0LCB7XG4gICAgICAgIGFib3J0U2lnbmFsOiB0LFxuICAgICAgICBwYXJhbXM6IHsgcmVhc29uOiAoZSB8fCB7fSkucmVhc29uIHx8IFwiXCIgfVxuICAgICAgfSkudGhlbihKdCk7XG4gICAgICByZXR1cm4gbi5hdmFpbGFibGUgfHwgT28oKSwgS2UobiksIG4uYWNjZXNzR3JhbnRlZDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgRGUuc2V0KCExKTtcbiAgICB9XG4gIH0sIGUpXG4pLCB1YSA9IHNhKFwibW91bnRcIiwgLyogQF9fUFVSRV9fICovICRvKFxuICBlZSxcbiAgKGUpID0+IHtcbiAgICBjb25zdCB0ID0gRCgpICYmIFAoZWUpO1xuICAgIHJldHVybiB0IHx8IFhyKGUpO1xuICB9LFxuICAoZSkgPT4ge1xuICAgIEUoWXQsIFBvKSwgS2UoZSk7XG4gIH0sXG4gIEplLFxuICBRdCxcbiAgUm9cbikpLCBQbyA9IChlKSA9PiB7XG4gIEtlKEp0KGUpKTtcbn07XG5mdW5jdGlvbiBLZShlKSB7XG4gIFFlLnNldChlKSwgTyhlZSwgZSk7XG59XG5mdW5jdGlvbiBsYSgpIHtcbiAgdihZdCwgUG8pLCBKZS5zZXQoITEpO1xufVxuY29uc3QgcGEgPSBLdChcbiAgXCJ1cGRhdGVUb2tlblwiLFxuICAoZSkgPT4gKGUgfHwgKGUgPSB7fSksIHkobmEsIFwiYmlvbWV0cnlfdG9rZW5fdXBkYXRlZFwiLCB7XG4gICAgLi4uZSxcbiAgICBwYXJhbXM6IHtcbiAgICAgIHRva2VuOiBlLnRva2VuIHx8IFwiXCIsXG4gICAgICByZWFzb246IGUucmVhc29uXG4gICAgfVxuICB9KS50aGVuKCh0KSA9PiB0LnN0YXR1cykpXG4pLCBVYyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGF1dGhlbnRpY2F0ZTogYWEsXG4gIGlzQXV0aGVudGljYXRpbmc6IEllLFxuICBpc0F2YWlsYWJsZTogWnIsXG4gIGlzTW91bnRlZDogSmUsXG4gIGlzTW91bnRpbmc6IEtyLFxuICBpc1JlcXVlc3RpbmdBY2Nlc3M6IERlLFxuICBpc1N1cHBvcnRlZDogb2EsXG4gIG1vdW50OiB1YSxcbiAgbW91bnRFcnJvcjogUm8sXG4gIG1vdW50UHJvbWlzZTogUXQsXG4gIG9wZW5TZXR0aW5nczogaWEsXG4gIHJlcXVlc3RBY2Nlc3M6IGNhLFxuICBzdGF0ZTogUWUsXG4gIHVubW91bnQ6IGxhLFxuICB1cGRhdGVUb2tlbjogcGFcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KSk7XG5mdW5jdGlvbiBaZShlLCB0KSB7XG4gIHJldHVybiBXZShlLCB7IGlzTW91bnRlZDogdCB9KTtcbn1cbmNvbnN0IFhlID0gXCJjbG9zaW5nQmVoYXZpb3JcIiwgUnQgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIGhlID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBCbyA9IFplKFhlLCBoZSksIF9hID0gSChYZSksIGZhID0gQm8oXCJkaXNhYmxlQ29uZmlybWF0aW9uXCIsICgpID0+IHtcbiAgWnQoITEpO1xufSksIGRhID0gQm8oXCJlbmFibGVDb25maXJtYXRpb25cIiwgKCkgPT4ge1xuICBadCghMCk7XG59KSwgbWEgPSBfYShcIm1vdW50XCIsICgpID0+IHtcbiAgaGUoKSB8fCAoWnQoXG4gICAgRCgpICYmIFAoWGUpIHx8ICExXG4gICksIGhlLnNldCghMCkpO1xufSk7XG5mdW5jdGlvbiBadChlKSB7XG4gIGUgIT09IFJ0KCkgJiYgKGYoXCJ3ZWJfYXBwX3NldHVwX2Nsb3NpbmdfYmVoYXZpb3JcIiwgeyBuZWVkX2NvbmZpcm1hdGlvbjogZSB9KSwgTyhYZSwgZSksIFJ0LnNldChlKSk7XG59XG5mdW5jdGlvbiBoYSgpIHtcbiAgaGUuc2V0KCExKTtcbn1cbmNvbnN0IHFjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgZGlzYWJsZUNvbmZpcm1hdGlvbjogZmEsXG4gIGVuYWJsZUNvbmZpcm1hdGlvbjogZGEsXG4gIGlzQ29uZmlybWF0aW9uRW5hYmxlZDogUnQsXG4gIGlzTW91bnRlZDogaGUsXG4gIG1vdW50OiBtYSxcbiAgdW5tb3VudDogaGFcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KSksIE1vID0gXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCIsIGV0ID0gQihcImNsb3VkU3RvcmFnZVwiLCBNbyksIGJhID0gTihNbyksIGdhID0gZXQoXCJkZWxldGVJdGVtXCIsIChlLCB0KSA9PiB7XG4gIGNvbnN0IG4gPSBBcnJheS5pc0FycmF5KGUpID8gZSA6IFtlXTtcbiAgcmV0dXJuIG4ubGVuZ3RoID8gc2UoXCJkZWxldGVTdG9yYWdlVmFsdWVzXCIsIHsga2V5czogbiB9LCB0KS50aGVuKCkgOiBiLnJlc29sdmUoKTtcbn0pO1xuZnVuY3Rpb24gRWEoZSwgdCkge1xuICBjb25zdCBuID0gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07XG4gIHJldHVybiBuLmxlbmd0aCA/IHNlKFwiZ2V0U3RvcmFnZVZhbHVlc1wiLCB7IGtleXM6IG4gfSwgdCkudGhlbigobykgPT4ge1xuICAgIGNvbnN0IHMgPSBIZShcbiAgICAgIE9iamVjdC5mcm9tRW50cmllcyhuLm1hcCgocikgPT4gW3IsIEwoKV0pKVxuICAgICkoKShvKTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSA/IHMgOiBzW2VdO1xuICB9KSA6IGIucmVzb2x2ZSh0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gXCJcIiA6IHt9KTtcbn1cbmNvbnN0IHdhID0gZXQoXCJnZXRJdGVtXCIsIEVhKSwgU2EgPSBldChcImdldEtleXNcIiwgKGUpID0+IHNlKFwiZ2V0U3RvcmFnZUtleXNcIiwge30sIGUpLnRoZW4oanMoTCgpKSgpKSksIHlhID0gZXQoXCJzZXRJdGVtXCIsIChlLCB0LCBuKSA9PiBzZShcInNhdmVTdG9yYWdlVmFsdWVcIiwge1xuICBrZXk6IGUsXG4gIHZhbHVlOiB0XG59LCBuKS50aGVuKCkpLCBGYyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGRlbGV0ZUl0ZW06IGdhLFxuICBnZXRJdGVtOiB3YSxcbiAgZ2V0S2V5czogU2EsXG4gIGlzU3VwcG9ydGVkOiBiYSxcbiAgc2V0SXRlbTogeWFcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KSksIE9lID0gXCJ3ZWJfYXBwX3RyaWdnZXJfaGFwdGljX2ZlZWRiYWNrXCIsIFh0ID0gQihcImhhcHRpY0ZlZWRiYWNrXCIsIE9lKSwgQWEgPSBOKE9lKSwgQ2EgPSBYdChcbiAgXCJpbXBhY3RPY2N1cnJlZFwiLFxuICAoZSkgPT4ge1xuICAgIGYoT2UsIHtcbiAgICAgIHR5cGU6IFwiaW1wYWN0XCIsXG4gICAgICBpbXBhY3Rfc3R5bGU6IGVcbiAgICB9KTtcbiAgfVxuKSwgdmEgPSBYdChcbiAgXCJub3RpZmljYXRpb25PY2N1cnJlZFwiLFxuICAoZSkgPT4ge1xuICAgIGYoT2UsIHtcbiAgICAgIHR5cGU6IFwibm90aWZpY2F0aW9uXCIsXG4gICAgICBub3RpZmljYXRpb25fdHlwZTogZVxuICAgIH0pO1xuICB9XG4pLCBUYSA9IFh0KFxuICBcInNlbGVjdGlvbkNoYW5nZWRcIixcbiAgKCkgPT4ge1xuICAgIGYoT2UsIHsgdHlwZTogXCJzZWxlY3Rpb25fY2hhbmdlXCIgfSk7XG4gIH1cbiksIFdjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgaW1wYWN0T2NjdXJyZWQ6IENhLFxuICBpc1N1cHBvcnRlZDogQWEsXG4gIG5vdGlmaWNhdGlvbk9jY3VycmVkOiB2YSxcbiAgc2VsZWN0aW9uQ2hhbmdlZDogVGFcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KSksIGVuID0gLyogQF9fUFVSRV9fICovIGModm9pZCAwKTtcbmZ1bmN0aW9uIGsoZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4ge1xuICAgIGNvbnN0IHQgPSBlbigpO1xuICAgIHJldHVybiB0ID8gdFtlXSA6IHZvaWQgMDtcbiAgfSk7XG59XG5jb25zdCBJbyA9IGsoXCJhdXRoRGF0ZVwiKSwgRG8gPSBrKFwiY2FuU2VuZEFmdGVyXCIpLCAkYSA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+IHtcbiAgY29uc3QgZSA9IElvKCksIHQgPSBEbygpO1xuICByZXR1cm4gdCAmJiBlID8gbmV3IERhdGUoZS5nZXRUaW1lKCkgKyB0ICogMWUzKSA6IHZvaWQgMDtcbn0pLCBSYSA9IGsoXCJjaGF0XCIpLCBPYSA9IGsoXCJjaGF0VHlwZVwiKSwgUGEgPSBrKFwiY2hhdEluc3RhbmNlXCIpLCBCYSA9IGsoXCJoYXNoXCIpLCBNYSA9IGsoXCJxdWVyeUlkXCIpLCBObyA9IC8qIEBfX1BVUkVfXyAqLyBjKCksIElhID0gayhcInJlY2VpdmVyXCIpO1xuZnVuY3Rpb24gRGEoKSB7XG4gIGNvbnN0IGUgPSBvZSgpO1xuICBlbi5zZXQoZS5pbml0RGF0YSksIE5vLnNldChlLmluaXREYXRhUmF3KTtcbn1cbmNvbnN0IE5hID0gayhcInN0YXJ0UGFyYW1cIiksIGthID0gayhcInVzZXJcIiksIEdjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYXV0aERhdGU6IElvLFxuICBjYW5TZW5kQWZ0ZXI6IERvLFxuICBjYW5TZW5kQWZ0ZXJEYXRlOiAkYSxcbiAgY2hhdDogUmEsXG4gIGNoYXRJbnN0YW5jZTogUGEsXG4gIGNoYXRUeXBlOiBPYSxcbiAgaGFzaDogQmEsXG4gIHF1ZXJ5SWQ6IE1hLFxuICByYXc6IE5vLFxuICByZWNlaXZlcjogSWEsXG4gIHJlc3RvcmU6IERhLFxuICBzdGFydFBhcmFtOiBOYSxcbiAgc3RhdGU6IGVuLFxuICB1c2VyOiBrYVxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKTtcbmZ1bmN0aW9uIHpjKGUpIHtcbiAgcmV0dXJuIGtzKCkoZSk7XG59XG5jb25zdCB0biA9IFwid2ViX2FwcF9vcGVuX2ludm9pY2VcIiwgeGEgPSBCKFwiaW52b2ljZVwiLCB0biksIE5lID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBWYSA9IE4odG4pO1xuYXN5bmMgZnVuY3Rpb24ga28oZSwgdCwgbikge1xuICBpZiAoTmUoKSlcbiAgICB0aHJvdyBuZXcgbChXdCwgXCJBbiBpbnZvaWNlIGlzIGFscmVhZHkgb3BlbmVkXCIpO1xuICBsZXQgbztcbiAgaWYgKHQgPT09IFwidXJsXCIpIHtcbiAgICBjb25zdCB7IGhvc3RuYW1lOiBzLCBwYXRobmFtZTogciB9ID0gbmV3IFVSTChlLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgaWYgKHMgIT09IFwidC5tZVwiKVxuICAgICAgdGhyb3cgbmV3IGwoRnQsIGBMaW5rIGhhcyB1bmV4cGVjdGVkIGhvc3RuYW1lOiAke3N9YCk7XG4gICAgY29uc3QgYSA9IHIubWF0Y2goL15cXC8oXFwkfGludm9pY2VcXC8pKFtBLVphLXowLTlcXC1fPV0rKSQvKTtcbiAgICBpZiAoIWEpXG4gICAgICB0aHJvdyBuZXcgbChcbiAgICAgICAgRHIsXG4gICAgICAgICdFeHBlY3RlZCB0byByZWNlaXZlIGEgbGluayB3aXRoIGEgcGF0aG5hbWUgaW4gZm9ybWF0IFwiL2ludm9pY2Uve3NsdWd9XCIgb3IgXCIvJHtzbHVnfVwiJ1xuICAgICAgKTtcbiAgICBbLCAsIG9dID0gYTtcbiAgfSBlbHNlXG4gICAgbyA9IGUsIG4gPSB0O1xuICByZXR1cm4gTmUuc2V0KCEwKSwgeSh0biwgXCJpbnZvaWNlX2Nsb3NlZFwiLCB7XG4gICAgLi4ubixcbiAgICBwYXJhbXM6IHsgc2x1ZzogbyB9LFxuICAgIGNhcHR1cmU6IChzKSA9PiBvID09PSBzLnNsdWdcbiAgfSkudGhlbigocykgPT4gcy5zdGF0dXMpLmZpbmFsbHkoKCkgPT4ge1xuICAgIE5lLnNldCghMSk7XG4gIH0pO1xufVxuY29uc3QgTGEgPSB4YShcIm9wZW5cIiwga28pLCBRYyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIF9vcGVuOiBrbyxcbiAgaXNPcGVuZWQ6IE5lLFxuICBpc1N1cHBvcnRlZDogVmEsXG4gIG9wZW46IExhXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpO1xuZnVuY3Rpb24geG8oZSkge1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKGUpLmZpbHRlcigodCkgPT4gdFsxXSAhPT0gdm9pZCAwKVxuICApO1xufVxuZnVuY3Rpb24gVm8oZSkge1xuICBjb25zdCB0ID0gWm4oZSk7XG4gIHJldHVybiBNYXRoLnNxcnQoXG4gICAgWzAuMjk5LCAwLjU4NywgMC4xMTRdLnJlZHVjZSgobiwgbywgcykgPT4ge1xuICAgICAgY29uc3QgciA9IHBhcnNlSW50KHQuc2xpY2UoMSArIHMgKiAyLCAxICsgKHMgKyAxKSAqIDIpLCAxNik7XG4gICAgICByZXR1cm4gbiArIHIgKiByICogbztcbiAgICB9LCAwKVxuICApIDwgMTIwO1xufVxuY29uc3QgYmUgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIGtlID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBVID0gLyogQF9fUFVSRV9fICovIGMoe30pO1xuZnVuY3Rpb24gQyhlKSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gXygoKSA9PiBVKClbZV0pO1xufVxuY29uc3QgamEgPSBDKFwiYWNjZW50VGV4dENvbG9yXCIpLCBubiA9IEMoXCJiZ0NvbG9yXCIpLCBvbiA9IEMoXCJidXR0b25Db2xvclwiKSwgTG8gPSBDKFwiYnV0dG9uVGV4dENvbG9yXCIpLCBqbyA9IEMoXCJib3R0b21CYXJCZ0NvbG9yXCIpLCBIYSA9IEMoXCJkZXN0cnVjdGl2ZVRleHRDb2xvclwiKSwgVWEgPSBDKFwiaGVhZGVyQmdDb2xvclwiKSwgcWEgPSBDKFwiaGludENvbG9yXCIpLCBGYSA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+IHtcbiAgY29uc3QgeyBiZ0NvbG9yOiBlIH0gPSBVKCk7XG4gIHJldHVybiAhZSB8fCBWbyhlKTtcbn0pLCBXYSA9IEMoXCJsaW5rQ29sb3JcIiksIEZlID0gQyhcInNlY29uZGFyeUJnQ29sb3JcIiksIEdhID0gQyhcInNlY3Rpb25CZ0NvbG9yXCIpLCB6YSA9IEMoXCJzZWN0aW9uSGVhZGVyVGV4dENvbG9yXCIpLCBRYSA9IEMoXCJzZWN0aW9uU2VwYXJhdG9yQ29sb3JcIiksIEphID0gQyhcInN1YnRpdGxlVGV4dENvbG9yXCIpLCBZYSA9IEMoXCJ0ZXh0Q29sb3JcIik7XG5mdW5jdGlvbiBZKGUpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+IHNuKClbZV0pO1xufVxuY29uc3QgbGUgPSAvKiBAX19QVVJFX18gKi8gYyh7XG4gIGhhc1NoaW5lRWZmZWN0OiAhMSxcbiAgaXNFbmFibGVkOiAhMCxcbiAgaXNMb2FkZXJWaXNpYmxlOiAhMSxcbiAgaXNWaXNpYmxlOiAhMSxcbiAgdGV4dDogXCJDb250aW51ZVwiXG59KSwgc24gPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiB7XG4gIGNvbnN0IGUgPSBsZSgpO1xuICByZXR1cm4ge1xuICAgIC4uLmUsXG4gICAgYmFja2dyb3VuZENvbG9yOiBlLmJhY2tncm91bmRDb2xvciB8fCBvbigpIHx8IFwiIzI0ODFjY1wiLFxuICAgIHRleHRDb2xvcjogZS50ZXh0Q29sb3IgfHwgTG8oKSB8fCBcIiNmZmZmZmZcIlxuICB9O1xufSksIGdlID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBLYSA9IFkoXCJiYWNrZ3JvdW5kQ29sb3JcIiksIFphID0gWShcImhhc1NoaW5lRWZmZWN0XCIpLCBYYSA9IFkoXCJpc0VuYWJsZWRcIiksIGVpID0gWShcImlzTG9hZGVyVmlzaWJsZVwiKSwgdGkgPSBZKFwiaXNWaXNpYmxlXCIpLCBuaSA9IFkoXCJ0ZXh0XCIpLCBvaSA9IFkoXCJ0ZXh0Q29sb3JcIiksIHNpID0gXCJ3ZWJfYXBwX3NldHVwX21haW5fYnV0dG9uXCIsIEhvID0gXCJtYWluX2J1dHRvbl9wcmVzc2VkXCIsIHR0ID0gXCJtYWluQnV0dG9uXCIsIHJuID0gSCh0dCksIHJpID0gWmUodHQsIGdlKSwgYWkgPSBybihcIm1vdW50XCIsICgpID0+IHtcbiAgaWYgKCFnZSgpKSB7XG4gICAgY29uc3QgZSA9IEQoKSAmJiBQKHR0KTtcbiAgICBlICYmIGxlLnNldChlKSwgZ2Uuc2V0KCEwKTtcbiAgfVxufSksIGlpID0gcm4oXG4gIFwib25DbGlja1wiLFxuICAoZSkgPT4gRShIbywgZSlcbiksIGNpID0gcm4oXG4gIFwib2ZmQ2xpY2tcIixcbiAgKGUpID0+IHtcbiAgICB2KEhvLCBlKTtcbiAgfVxuKSwgdWkgPSByaShcbiAgXCJzZXRQYXJhbXNcIixcbiAgKGUpID0+IHtcbiAgICBsZS5zZXQoeyAuLi5sZSgpLCAuLi54byhlKSB9KSwgTyh0dCwgbGUoKSk7XG4gICAgY29uc3QgdCA9IHNuKCk7XG4gICAgdC50ZXh0ICYmIGYoc2ksIHtcbiAgICAgIGNvbG9yOiB0LmJhY2tncm91bmRDb2xvcixcbiAgICAgIGhhc19zaGluZV9lZmZlY3Q6IHQuaGFzU2hpbmVFZmZlY3QsXG4gICAgICBpc19hY3RpdmU6IHQuaXNFbmFibGVkLFxuICAgICAgaXNfcHJvZ3Jlc3NfdmlzaWJsZTogdC5pc0xvYWRlclZpc2libGUsXG4gICAgICBpc192aXNpYmxlOiB0LmlzVmlzaWJsZSxcbiAgICAgIHRleHQ6IHQudGV4dCxcbiAgICAgIHRleHRfY29sb3I6IHQudGV4dENvbG9yXG4gICAgfSk7XG4gIH1cbik7XG5mdW5jdGlvbiBsaSgpIHtcbiAgZ2Uuc2V0KCExKTtcbn1cbmNvbnN0IEpjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYmFja2dyb3VuZENvbG9yOiBLYSxcbiAgaGFzU2hpbmVFZmZlY3Q6IFphLFxuICBpc0VuYWJsZWQ6IFhhLFxuICBpc0xvYWRlclZpc2libGU6IGVpLFxuICBpc01vdW50ZWQ6IGdlLFxuICBpc1Zpc2libGU6IHRpLFxuICBtb3VudDogYWksXG4gIG9mZkNsaWNrOiBjaSxcbiAgb25DbGljazogaWksXG4gIHNldFBhcmFtczogdWksXG4gIHN0YXRlOiBzbixcbiAgdGV4dDogbmksXG4gIHRleHRDb2xvcjogb2ksXG4gIHVubW91bnQ6IGxpXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpO1xuZnVuY3Rpb24gYW4oKSB7XG4gIHRocm93IG5ldyBsKFxuICAgIFZyLFxuICAgIFwiQ1NTIHZhcmlhYmxlcyBhcmUgYWxyZWFkeSBib3VuZFwiXG4gICk7XG59XG5mdW5jdGlvbiBwaShlKSB7XG4gIHJldHVybiBMcygpKGUpO1xufVxuY29uc3QgbnQgPSBcInRoZW1lUGFyYW1zXCIsIFVvID0gXCJ0aGVtZV9jaGFuZ2VkXCIsIF9pID0gSChudCksIGZpID0gWmUobnQsIGJlKSwgZGkgPSBmaShcbiAgXCJiaW5kQ3NzVmFyc1wiLFxuICAoZSkgPT4ge1xuICAgIGtlKCkgJiYgYW4oKSwgZSB8fCAoZSA9IChvKSA9PiBgLS10Zy10aGVtZS0ke3h0KG8pfWApO1xuICAgIGZ1bmN0aW9uIHQobykge1xuICAgICAgT2JqZWN0LmVudHJpZXMoVSgpKS5mb3JFYWNoKChbcywgcl0pID0+IHtcbiAgICAgICAgciAmJiBvKHMsIHIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG4oKSB7XG4gICAgICB0KChvLCBzKSA9PiB7XG4gICAgICAgIFZ0KGUobyksIHMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBuKCksIFUuc3ViKG4pLCBrZS5zZXQoITApLCAoKSA9PiB7XG4gICAgICB0KEx0KSwgVS51bnN1YihuKSwga2Uuc2V0KCExKTtcbiAgICB9O1xuICB9XG4pLCBxbyA9IF9pKFwibW91bnRcIiwgKCkgPT4ge1xuICBiZSgpIHx8IChFKFVvLCBGbyksIFUuc2V0KFxuICAgIEQoKSAmJiBQKG50KSB8fCBvZSgpLnRoZW1lUGFyYW1zXG4gICksIGJlLnNldCghMCkpO1xufSksIEZvID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IHBpKGUudGhlbWVfcGFyYW1zKTtcbiAgVS5zZXQodCksIE8obnQsIHQpO1xufTtcbmZ1bmN0aW9uIG1pKCkge1xuICB2KFVvLCBGbyksIGJlLnNldCghMSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gV28oZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4ge1xuICAgIGNvbnN0IHQgPSBlKCk7XG4gICAgcmV0dXJuIGZlKHQpID8gdCA6IHQgPT09IFwiYmdfY29sb3JcIiA/IG5uKCkgOiBGZSgpO1xuICB9KTtcbn1cbmNvbnN0IEVlID0gLyogQF9fUFVSRV9fICovIGMoXCJiZ19jb2xvclwiKSwgY24gPSAvKiBAX19QVVJFX18gKi8gV28oRWUpLCB3ZSA9IC8qIEBfX1BVUkVfXyAqLyBjKFwiYm90dG9tX2Jhcl9iZ19jb2xvclwiKSwgdW4gPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiB7XG4gIGNvbnN0IGUgPSB3ZSgpO1xuICByZXR1cm4gZmUoZSkgPyBlIDogZSA9PT0gXCJib3R0b21fYmFyX2JnX2NvbG9yXCIgPyBqbygpIHx8IEZlKCkgOiBlID09PSBcInNlY29uZGFyeV9iZ19jb2xvclwiID8gRmUoKSA6IG5uKCk7XG59KSwgU2UgPSAvKiBAX19QVVJFX18gKi8gYyhcImJnX2NvbG9yXCIpLCBHbyA9IC8qIEBfX1BVUkVfXyAqLyBXbyhTZSksIHllID0gLyogQF9fUFVSRV9fICovIGMoITEpLCB4ZSA9IC8qIEBfX1BVUkVfXyAqLyBjKCExKSwgaGkgPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiB7XG4gIGNvbnN0IGUgPSBjbigpO1xuICByZXR1cm4gZSA/IFZvKGUpIDogITE7XG59KSwgb3QgPSAvKiBAX19QVVJFX18gKi8gYyghMCksIHpvID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gKHtcbiAgYmFja2dyb3VuZENvbG9yOiBFZSgpLFxuICBib3R0b21CYXJDb2xvcjogd2UoKSxcbiAgaGVhZGVyQ29sb3I6IFNlKCksXG4gIGlzQWN0aXZlOiBvdCgpXG59KSksIE90ID0gXCJ3ZWJfYXBwX3NldF9iYWNrZ3JvdW5kX2NvbG9yXCIsIFB0ID0gXCJ3ZWJfYXBwX3NldF9ib3R0b21fYmFyX2NvbG9yXCIsIFZlID0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiwgUW8gPSBcInZpc2liaWxpdHlfY2hhbmdlZFwiLCBQZSA9IFwibWluaUFwcFwiLCBsbiA9IHtcbiAgYW55OiBbXG4gICAgT3QsXG4gICAgUHQsXG4gICAgVmVcbiAgXVxufSwgYmkgPSAvKiBAX19QVVJFX18gKi8gXygoKSA9PiBsbi5hbnkuc29tZSgoZSkgPT4gUShlLCBWKCkpKSksIEpvID0gSChQZSksIGdpID0gQihQZSwgbG4pLCBzdCA9IEooUGUsIHllLCBsbiksIEVpID0gc3QoXG4gIFwiYmluZENzc1ZhcnNcIixcbiAgKGUpID0+IHtcbiAgICB4ZSgpICYmIGFuKCk7XG4gICAgY29uc3QgW3QsIG5dID0gdGUoKTtcbiAgICBmdW5jdGlvbiBvKHMsIHIpIHtcbiAgICAgIGZ1bmN0aW9uIGEoKSB7XG4gICAgICAgIFZ0KHMsIHIoKSB8fCBudWxsKTtcbiAgICAgIH1cbiAgICAgIGEoKSwgdChyLnN1YihhKSwgTHQuYmluZChudWxsLCBzKSk7XG4gICAgfVxuICAgIHJldHVybiBlIHx8IChlID0gKHMpID0+IGAtLXRnLSR7eHQocyl9YCksIG8oZShcImJnQ29sb3JcIiksIGNuKSwgbyhlKFwiYm90dG9tQmFyQ29sb3JcIiksIHVuKSwgbyhlKFwiaGVhZGVyQ29sb3JcIiksIEdvKSwgdCgoKSA9PiB7XG4gICAgICB4ZS5zZXQoITEpO1xuICAgIH0pLCB4ZS5zZXQoITApLCBuO1xuICB9XG4pLCB3aSA9IEpvKFwiY2xvc2VcIiwgKGUpID0+IHtcbiAgZihcIndlYl9hcHBfY2xvc2VcIiwgeyByZXR1cm5fYmFjazogZSB9KTtcbn0pLCBZbyA9IChlKSA9PiB7XG4gIG90LnNldChlLmlzX3Zpc2libGUpLCBydCgpO1xufSwgU2kgPSBnaShcbiAgXCJtb3VudFwiLFxuICAoKSA9PiB7XG4gICAgaWYgKCF5ZSgpKSB7XG4gICAgICBjb25zdCBlID0gRCgpICYmIFAoUGUpO1xuICAgICAgcW8oKSwgS28uaWZBdmFpbGFibGUoZSA/IGUuYmFja2dyb3VuZENvbG9yIDogXCJiZ19jb2xvclwiKSwgWm8uaWZBdmFpbGFibGUoZSA/IGUuYm90dG9tQmFyQ29sb3IgOiBcImJvdHRvbV9iYXJfYmdfY29sb3JcIiksIFhvLmlmQXZhaWxhYmxlKGUgPyBlLmhlYWRlckNvbG9yIDogXCJiZ19jb2xvclwiKSwgb3Quc2V0KGUgPyBlLmlzQWN0aXZlIDogITApLCBFKFFvLCBZbyksIHllLnNldCghMCk7XG4gICAgfVxuICB9XG4pLCB5aSA9IEpvKFwicmVhZHlcIiwgKCkgPT4ge1xuICBmKFwid2ViX2FwcF9yZWFkeVwiKTtcbn0pO1xuZnVuY3Rpb24gcnQoKSB7XG4gIE8oUGUsIHpvKCkpO1xufVxuY29uc3QgS28gPSBzdChcbiAgXCJzZXRCYWNrZ3JvdW5kQ29sb3JcIixcbiAgKGUpID0+IHtcbiAgICBlICE9PSBFZSgpICYmIChmKE90LCB7IGNvbG9yOiBlIH0pLCBFZS5zZXQoZSksIHJ0KCkpO1xuICB9LFxuICBPdFxuKSwgWm8gPSBzdChcbiAgXCJzZXRCb3R0b21CYXJDb2xvclwiLFxuICAoZSkgPT4ge1xuICAgIGUgIT09IHdlKCkgJiYgKGYoUHQsIHsgY29sb3I6IGUgfSksIHdlLnNldChlKSwgcnQoKSk7XG4gIH0sXG4gIFB0XG4pLCBYbyA9IHN0KFxuICBcInNldEhlYWRlckNvbG9yXCIsXG4gIChlKSA9PiB7XG4gICAgZSAhPT0gU2UoKSAmJiAoZihWZSwgZmUoZSkgPyB7IGNvbG9yOiBlIH0gOiB7IGNvbG9yX2tleTogZSB9KSwgU2Uuc2V0KGUpLCBydCgpKTtcbiAgfSxcbiAgVmUsXG4gIHtcbiAgICByZ2I6IFtWZSwgXCJjb2xvclwiLCBmZV1cbiAgfVxuKTtcbmZ1bmN0aW9uIEFpKCkge1xuICB2KFFvLCBZbyksIHllLnNldCghMSk7XG59XG5jb25zdCBZYyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGJhY2tncm91bmRDb2xvcjogRWUsXG4gIGJhY2tncm91bmRDb2xvclJHQjogY24sXG4gIGJpbmRDc3NWYXJzOiBFaSxcbiAgYm90dG9tQmFyQ29sb3I6IHdlLFxuICBib3R0b21CYXJDb2xvclJHQjogdW4sXG4gIGNsb3NlOiB3aSxcbiAgaGVhZGVyQ29sb3I6IFNlLFxuICBoZWFkZXJDb2xvclJHQjogR28sXG4gIGlzQWN0aXZlOiBvdCxcbiAgaXNDc3NWYXJzQm91bmQ6IHhlLFxuICBpc0Rhcms6IGhpLFxuICBpc01vdW50ZWQ6IHllLFxuICBpc1N1cHBvcnRlZDogYmksXG4gIG1vdW50OiBTaSxcbiAgcmVhZHk6IHlpLFxuICBzZXRCYWNrZ3JvdW5kQ29sb3I6IEtvLFxuICBzZXRCb3R0b21CYXJDb2xvcjogWm8sXG4gIHNldEhlYWRlckNvbG9yOiBYbyxcbiAgc3RhdGU6IHpvLFxuICB1bm1vdW50OiBBaVxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKTtcbmZ1bmN0aW9uIENpKGUpIHtcbiAgY29uc3QgdCA9IGUubWVzc2FnZS50cmltKCksIG4gPSAoZS50aXRsZSB8fCBcIlwiKS50cmltKCksIG8gPSBlLmJ1dHRvbnMgfHwgW107XG4gIGlmIChuLmxlbmd0aCA+IDY0KVxuICAgIHRocm93IG5ldyBsKGNlLCBgSW52YWxpZCB0aXRsZTogJHtufWApO1xuICBpZiAoIXQgfHwgdC5sZW5ndGggPiAyNTYpXG4gICAgdGhyb3cgbmV3IGwoY2UsIGBJbnZhbGlkIG1lc3NhZ2U6ICR7dH1gKTtcbiAgaWYgKG8ubGVuZ3RoID4gMylcbiAgICB0aHJvdyBuZXcgbChjZSwgYEludmFsaWQgYnV0dG9ucyBjb3VudDogJHtvLmxlbmd0aH1gKTtcbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogbixcbiAgICBtZXNzYWdlOiB0LFxuICAgIGJ1dHRvbnM6IG8ubGVuZ3RoID8gby5tYXAoKHMsIHIpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBzLmlkIHx8IFwiXCI7XG4gICAgICBpZiAoYS5sZW5ndGggPiA2NClcbiAgICAgICAgdGhyb3cgbmV3IGwoY2UsIGBCdXR0b24gd2l0aCBpbmRleCAke3J9IGhhcyBpbnZhbGlkIGlkOiAke2F9YCk7XG4gICAgICBpZiAoIXMudHlwZSB8fCBzLnR5cGUgPT09IFwiZGVmYXVsdFwiIHx8IHMudHlwZSA9PT0gXCJkZXN0cnVjdGl2ZVwiKSB7XG4gICAgICAgIGNvbnN0IGkgPSBzLnRleHQudHJpbSgpO1xuICAgICAgICBpZiAoIWkgfHwgaS5sZW5ndGggPiA2NClcbiAgICAgICAgICB0aHJvdyBuZXcgbChjZSwgYEJ1dHRvbiB3aXRoIGluZGV4ICR7cn0gaGFzIGludmFsaWQgdGV4dDogJHtpfWApO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBzLnR5cGUsIHRleHQ6IGksIGlkOiBhIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyB0eXBlOiBzLnR5cGUsIGlkOiBhIH07XG4gICAgfSkgOiBbeyB0eXBlOiBcImNsb3NlXCIsIGlkOiBcIlwiIH1dXG4gIH07XG59XG5jb25zdCBwbiA9IFwid2ViX2FwcF9vcGVuX3BvcHVwXCIsIHZpID0gQihcInBvcHVwXCIsIHBuKSwgTGUgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIFRpID0gTihwbiksICRpID0gdmkoXG4gIFwib3BlblwiLFxuICBhc3luYyAoZSkgPT4ge1xuICAgIGlmIChMZSgpKVxuICAgICAgdGhyb3cgbmV3IGwoV3QsIFwiQSBwb3B1cCBpcyBhbHJlYWR5IG9wZW5lZFwiKTtcbiAgICBMZS5zZXQoITApO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGJ1dHRvbl9pZDogdCA9IG51bGwgfSA9IGF3YWl0IHkocG4sIFwicG9wdXBfY2xvc2VkXCIsIHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgcGFyYW1zOiBDaShlKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgTGUuc2V0KCExKTtcbiAgICB9XG4gIH1cbiksIEtjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgaXNPcGVuZWQ6IExlLFxuICBpc1N1cHBvcnRlZDogVGksXG4gIG9wZW46ICRpXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpLCBSaSA9IFwid2ViX2FwcF9jbG9zZV9zY2FuX3FyX3BvcHVwXCIsIF9uID0gXCJ3ZWJfYXBwX29wZW5fc2Nhbl9xcl9wb3B1cFwiLCBPaSA9IFwic2Nhbl9xcl9wb3B1cF9jbG9zZWRcIiwgUGkgPSBcInFyX3RleHRfcmVjZWl2ZWRcIiwgZXMgPSBCKFwicXJTY2FubmVyXCIsIF9uKSwgQnQgPSBlcyhcImNsb3NlXCIsICgpID0+IHtcbiAgWC5zZXQoITEpLCBmKFJpKTtcbn0pLCBYID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBCaSA9IE4oX24pO1xuZnVuY3Rpb24gTWkoZSkge1xuICByZXR1cm4gYi53aXRoRm4oKHQpID0+IHtcbiAgICBpZiAoWCgpKVxuICAgICAgdGhyb3cgbmV3IGwoV3QsIFwiVGhlIFFSIFNjYW5uZXIgaXMgYWxyZWFkeSBvcGVuZWRcIik7XG4gICAgWC5zZXQoITApLCBlIHx8IChlID0ge30pO1xuICAgIGNvbnN0IHsgb25DYXB0dXJlZDogbiwgdGV4dDogbywgY2FwdHVyZTogcyB9ID0gZSwgWywgcl0gPSB0ZShcbiAgICAgIC8vIFdoZW5ldmVyIHRoZSBzY2FubmVyIHdhcyBjbG9zZWQgZm9yIHNvbWUgcmVhc29uIChieSBhIGRldmVsb3BlciBvciBhXG4gICAgICAvLyB1c2VyKSwgd2Ugc2hvdWxkIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aCB1bmRlZmluZWQuXG4gICAgICBYLnN1YigoKSA9PiB7XG4gICAgICAgIGEucmVzb2x2ZSgpO1xuICAgICAgfSksXG4gICAgICAvLyBXaGVuZXZlciB1c2VyIGNsb3NlZCB0aGUgc2Nhbm5lciwgdXBkYXRlIHRoZSBpc09wZW5lZCBzaWduYWwgc3RhdGUuXG4gICAgICBFKE9pLCAoKSA9PiB7XG4gICAgICAgIFguc2V0KCExKTtcbiAgICAgIH0pLFxuICAgICAgLy8gV2hlbmV2ZXIgc29tZSBRUiB3YXMgc2Nhbm5lZCwgd2Ugc2hvdWxkIGNoZWNrIGlmIGl0IG11c3QgYmUgY2FwdHVyZWQuXG4gICAgICBFKFBpLCAoaSkgPT4ge1xuICAgICAgICBuID8gbihpLmRhdGEpIDogKCFzIHx8IHMoaS5kYXRhKSkgJiYgKGEucmVzb2x2ZShpLmRhdGEpLCBCdCgpKTtcbiAgICAgIH0pXG4gICAgKSwgYSA9IG5ldyBycih7IGFib3J0U2lnbmFsOiB0IH0pLmNhdGNoKEJ0KS5maW5hbGx5KHIpO1xuICAgIHJldHVybiAoZS5wb3N0RXZlbnQgfHwgZikoX24sIHsgdGV4dDogbyB9KSwgYTtcbiAgfSwgZSk7XG59XG5jb25zdCBJaSA9IGVzKFwib3BlblwiLCBNaSksIFpjID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgY2xvc2U6IEJ0LFxuICBpc09wZW5lZDogWCxcbiAgaXNTdXBwb3J0ZWQ6IEJpLFxuICBvcGVuOiBJaVxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKTtcbmZ1bmN0aW9uIEYoZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gZm4oKVtlXSk7XG59XG5jb25zdCBwZSA9IC8qIEBfX1BVUkVfXyAqLyBjKHtcbiAgaGFzU2hpbmVFZmZlY3Q6ICExLFxuICBpc0VuYWJsZWQ6ICEwLFxuICBpc0xvYWRlclZpc2libGU6ICExLFxuICBpc1Zpc2libGU6ICExLFxuICBwb3NpdGlvbjogXCJsZWZ0XCIsXG4gIHRleHQ6IFwiQ2FuY2VsXCJcbn0pLCBmbiA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+IHtcbiAgY29uc3QgZSA9IHBlKCk7XG4gIHJldHVybiB7XG4gICAgLi4uZSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IGUuYmFja2dyb3VuZENvbG9yIHx8IHVuKCkgfHwgXCIjMDAwMDAwXCIsXG4gICAgdGV4dENvbG9yOiBlLnRleHRDb2xvciB8fCBvbigpIHx8IFwiIzI0ODFjY1wiXG4gIH07XG59KSwgQWUgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIERpID0gRihcImJhY2tncm91bmRDb2xvclwiKSwgTmkgPSBGKFwiaGFzU2hpbmVFZmZlY3RcIiksIGtpID0gRihcImlzRW5hYmxlZFwiKSwgeGkgPSBGKFwiaXNMb2FkZXJWaXNpYmxlXCIpLCBWaSA9IEYoXCJpc1Zpc2libGVcIiksIExpID0gRihcInBvc2l0aW9uXCIpLCBqaSA9IEYoXCJ0ZXh0XCIpLCBIaSA9IEYoXCJ0ZXh0Q29sb3JcIiksIGF0ID0gXCJ3ZWJfYXBwX3NldHVwX3NlY29uZGFyeV9idXR0b25cIiwgdHMgPSBcInNlY29uZGFyeV9idXR0b25fcHJlc3NlZFwiLCBpdCA9IFwic2Vjb25kYXJ5QnV0dG9uXCIsIGRuID0gQihpdCwgYXQpLCBVaSA9IEooaXQsIEFlLCBhdCksIHFpID0gTihhdCksIEZpID0gZG4oXCJtb3VudFwiLCAoKSA9PiB7XG4gIGlmICghQWUoKSkge1xuICAgIGNvbnN0IGUgPSBEKCkgJiYgUChpdCk7XG4gICAgZSAmJiBwZS5zZXQoZSksIEFlLnNldCghMCk7XG4gIH1cbn0pLCBXaSA9IGRuKFxuICBcIm9uQ2xpY2tcIixcbiAgKGUpID0+IEUodHMsIGUpXG4pLCBHaSA9IGRuKFxuICBcIm9mZkNsaWNrXCIsXG4gIChlKSA9PiB7XG4gICAgdih0cywgZSk7XG4gIH1cbiksIHppID0gVWkoXG4gIFwic2V0UGFyYW1zXCIsXG4gIChlKSA9PiB7XG4gICAgcGUuc2V0KHtcbiAgICAgIC4uLnBlKCksXG4gICAgICAuLi5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGUpLmZpbHRlcigoWywgbl0pID0+IG4gIT09IHZvaWQgMClcbiAgICAgIClcbiAgICB9KSwgTyhpdCwgcGUoKSk7XG4gICAgY29uc3QgdCA9IGZuKCk7XG4gICAgdC50ZXh0ICYmIGYoYXQsIHtcbiAgICAgIGNvbG9yOiB0LmJhY2tncm91bmRDb2xvcixcbiAgICAgIGhhc19zaGluZV9lZmZlY3Q6IHQuaGFzU2hpbmVFZmZlY3QsXG4gICAgICBpc19hY3RpdmU6IHQuaXNFbmFibGVkLFxuICAgICAgaXNfcHJvZ3Jlc3NfdmlzaWJsZTogdC5pc0xvYWRlclZpc2libGUsXG4gICAgICBpc192aXNpYmxlOiB0LmlzVmlzaWJsZSxcbiAgICAgIHBvc2l0aW9uOiB0LnBvc2l0aW9uLFxuICAgICAgdGV4dDogdC50ZXh0LFxuICAgICAgdGV4dF9jb2xvcjogdC50ZXh0Q29sb3JcbiAgICB9KTtcbiAgfVxuKTtcbmZ1bmN0aW9uIFFpKCkge1xuICBBZS5zZXQoITEpO1xufVxuY29uc3QgWGMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHtcbiAgX19wcm90b19fOiBudWxsLFxuICBiYWNrZ3JvdW5kQ29sb3I6IERpLFxuICBoYXNTaGluZUVmZmVjdDogTmksXG4gIGlzRW5hYmxlZDoga2ksXG4gIGlzTG9hZGVyVmlzaWJsZTogeGksXG4gIGlzTW91bnRlZDogQWUsXG4gIGlzU3VwcG9ydGVkOiBxaSxcbiAgaXNWaXNpYmxlOiBWaSxcbiAgbW91bnQ6IEZpLFxuICBvZmZDbGljazogR2ksXG4gIG9uQ2xpY2s6IFdpLFxuICBwb3NpdGlvbjogTGksXG4gIHNldFBhcmFtczogemksXG4gIHN0YXRlOiBmbixcbiAgdGV4dDogamksXG4gIHRleHRDb2xvcjogSGksXG4gIHVubW91bnQ6IFFpXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpLCBjdCA9IFwid2ViX2FwcF9zZXR1cF9zZXR0aW5nc19idXR0b25cIiwgbnMgPSBcInNldHRpbmdzX2J1dHRvbl9wcmVzc2VkXCIsIHV0ID0gXCJzZXR0aW5nc0J1dHRvblwiLCBNdCA9IC8qIEBfX1BVUkVfXyAqLyBjKCExKSwgQ2UgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIEppID0gTihjdCksIG1uID0gQih1dCwgY3QpLCBvcyA9IEoodXQsIENlLCBjdCksIFlpID0gb3MoXCJoaWRlXCIsICgpID0+IHtcbiAgaG4oITEpO1xufSksIEtpID0gbW4oXCJtb3VudFwiLCAoKSA9PiB7XG4gIENlKCkgfHwgKGhuKEQoKSAmJiBQKHV0KSB8fCAhMSksIENlLnNldCghMCkpO1xufSk7XG5mdW5jdGlvbiBobihlKSB7XG4gIGUgIT09IE10KCkgJiYgKGYoY3QsIHsgaXNfdmlzaWJsZTogZSB9KSwgTyh1dCwgZSksIE10LnNldChlKSk7XG59XG5jb25zdCBaaSA9IG1uKFxuICBcIm9uQ2xpY2tcIixcbiAgKGUpID0+IEUobnMsIGUpXG4pLCBYaSA9IG1uKFxuICBcIm9mZkNsaWNrXCIsXG4gIChlKSA9PiB7XG4gICAgdihucywgZSk7XG4gIH1cbiksIGVjID0gb3MoXCJzaG93XCIsICgpID0+IHtcbiAgaG4oITApO1xufSk7XG5mdW5jdGlvbiB0YygpIHtcbiAgQ2Uuc2V0KCExKTtcbn1cbmNvbnN0IGV1ID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgaGlkZTogWWksXG4gIGlzTW91bnRlZDogQ2UsXG4gIGlzU3VwcG9ydGVkOiBKaSxcbiAgaXNWaXNpYmxlOiBNdCxcbiAgbW91bnQ6IEtpLFxuICBvZmZDbGljazogWGksXG4gIG9uQ2xpY2s6IFppLFxuICBzaG93OiBlYyxcbiAgdW5tb3VudDogdGNcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogXCJNb2R1bGVcIiB9KSksIGx0ID0gXCJ3ZWJfYXBwX3NldHVwX3N3aXBlX2JlaGF2aW9yXCIsIHB0ID0gXCJzd2lwZUJlaGF2aW9yXCIsIHZlID0gLyogQF9fUFVSRV9fICovIGMoITEpLCBuYyA9IE4obHQpLCBJdCA9IC8qIEBfX1BVUkVfXyAqLyBjKCEwKSwgb2MgPSBCKHB0LCBsdCksIHNzID0gSihwdCwgdmUsIGx0KSwgc2MgPSBzcyhcImRpc2FibGVWZXJ0aWNhbFwiLCAoKSA9PiB7XG4gIGJuKCExKTtcbn0pLCByYyA9IHNzKFwiZW5hYmxlVmVydGljYWxcIiwgKCkgPT4ge1xuICBibighMCk7XG59KSwgYWMgPSBvYyhcIm1vdW50XCIsICgpID0+IHtcbiAgdmUoKSB8fCAoYm4oXG4gICAgRCgpICYmIFAocHQpIHx8ICExLFxuICAgICEwXG4gICksIHZlLnNldCghMCkpO1xufSk7XG5mdW5jdGlvbiBibihlLCB0KSB7XG4gIChlICE9PSBJdCgpIHx8IHQpICYmIChmKGx0LCB7IGFsbG93X3ZlcnRpY2FsX3N3aXBlOiBlIH0pLCBPKHB0LCBlKSwgSXQuc2V0KGUpKTtcbn1cbmZ1bmN0aW9uIGljKCkge1xuICB2ZS5zZXQoITEpO1xufVxuY29uc3QgdHUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHtcbiAgX19wcm90b19fOiBudWxsLFxuICBkaXNhYmxlVmVydGljYWw6IHNjLFxuICBlbmFibGVWZXJ0aWNhbDogcmMsXG4gIGlzTW91bnRlZDogdmUsXG4gIGlzU3VwcG9ydGVkOiBuYyxcbiAgaXNWZXJ0aWNhbEVuYWJsZWQ6IEl0LFxuICBtb3VudDogYWMsXG4gIHVubW91bnQ6IGljXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpLCBudSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZGVmaW5lUHJvcGVydHkoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGFjY2VudFRleHRDb2xvcjogamEsXG4gIGJhY2tncm91bmRDb2xvcjogbm4sXG4gIGJpbmRDc3NWYXJzOiBkaSxcbiAgYm90dG9tQmFyQmdDb2xvcjogam8sXG4gIGJ1dHRvbkNvbG9yOiBvbixcbiAgYnV0dG9uVGV4dENvbG9yOiBMbyxcbiAgZGVzdHJ1Y3RpdmVUZXh0Q29sb3I6IEhhLFxuICBoZWFkZXJCYWNrZ3JvdW5kQ29sb3I6IFVhLFxuICBoaW50Q29sb3I6IHFhLFxuICBpc0Nzc1ZhcnNCb3VuZDoga2UsXG4gIGlzRGFyazogRmEsXG4gIGlzTW91bnRlZDogYmUsXG4gIGxpbmtDb2xvcjogV2EsXG4gIG1vdW50OiBxbyxcbiAgc2Vjb25kYXJ5QmFja2dyb3VuZENvbG9yOiBGZSxcbiAgc2VjdGlvbkJhY2tncm91bmRDb2xvcjogR2EsXG4gIHNlY3Rpb25IZWFkZXJUZXh0Q29sb3I6IHphLFxuICBzZWN0aW9uU2VwYXJhdG9yQ29sb3I6IFFhLFxuICBzdGF0ZTogVSxcbiAgc3VidGl0bGVUZXh0Q29sb3I6IEphLFxuICB0ZXh0Q29sb3I6IFlhLFxuICB1bm1vdW50OiBtaVxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKSwgcmUgPSBcInZpZXdwb3J0XCIsIHJzID0gXCJ3ZWJfYXBwX3JlcXVlc3RfZnVsbHNjcmVlblwiLCBjYyA9IFwiZnVsbHNjcmVlbl9mYWlsZWRcIiwgZ24gPSBcImZ1bGxzY3JlZW5fY2hhbmdlZFwiLCBhcyA9IFwic2FmZV9hcmVhX2NoYW5nZWRcIiwgaXMgPSBcImNvbnRlbnRfc2FmZV9hcmVhX2NoYW5nZWRcIiwgY3MgPSBcInZpZXdwb3J0X2NoYW5nZWRcIiwga24gPSBcIndlYl9hcHBfcmVxdWVzdF9zYWZlX2FyZWFcIiwgeG4gPSBcIndlYl9hcHBfcmVxdWVzdF9jb250ZW50X3NhZmVfYXJlYVwiLCBWbiA9IHtcbiAgbGVmdDogMCxcbiAgdG9wOiAwLFxuICBib3R0b206IDAsXG4gIHJpZ2h0OiAwXG59O1xuZnVuY3Rpb24gRXQoZSkge1xuICByZXR1cm4gTWF0aC5tYXgoZSwgMCk7XG59XG5jb25zdCBfZSA9IC8qIEBfX1BVUkVfXyAqLyBjKHtcbiAgY29udGVudFNhZmVBcmVhSW5zZXRzOiBWbixcbiAgaGVpZ2h0OiAwLFxuICBpc0V4cGFuZGVkOiAhMSxcbiAgaXNGdWxsc2NyZWVuOiAhMSxcbiAgc2FmZUFyZWFJbnNldHM6IFZuLFxuICBzdGFibGVIZWlnaHQ6IDAsXG4gIHdpZHRoOiAwXG59KTtcbmZ1bmN0aW9uIEsoZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gX2UoKVtlXSk7XG59XG5mdW5jdGlvbiBhZShlKSB7XG4gIGNvbnN0IHsgaGVpZ2h0OiB0LCBzdGFibGVIZWlnaHQ6IG4sIHdpZHRoOiBvIH0gPSBlO1xuICBfZS5zZXQoe1xuICAgIC4uLl9lKCksXG4gICAgLi4ueG8oe1xuICAgICAgLi4uZSxcbiAgICAgIGhlaWdodDogdCA/IEV0KHQpIDogdm9pZCAwLFxuICAgICAgd2lkdGg6IG8gPyBFdChvKSA6IHZvaWQgMCxcbiAgICAgIHN0YWJsZUhlaWdodDogbiA/IEV0KG4pIDogdm9pZCAwXG4gICAgfSlcbiAgfSksIE8ocmUsIF9lKCkpO1xufVxuZnVuY3Rpb24gdWMoKSB7XG4gIHJldHVybiBQKHJlKTtcbn1cbmNvbnN0IHVzID0gSyhcImlzRnVsbHNjcmVlblwiKSwgRW4gPSAvKiBAX19QVVJFX18gKi8gYygpLCBsYyA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+ICEhRW4oKSksIGxzID0gLyogQF9fUFVSRV9fICovIGMoKSwgQmUgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIHBjID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gISFfdCgpKSwgcHMgPSAvKiBAX19QVVJFX18gKi8gYyh2b2lkIDApLCBfdCA9IC8qIEBfX1BVUkVfXyAqLyBjKCksIF9jID0gSihyZSwgQmUsIHJzKTtcbmZ1bmN0aW9uIF9zKGUsIHQpIHtcbiAgcmV0dXJuIF9jKGUsIC8qIEBfX1BVUkVfXyAqLyBSZShcbiAgICAobikgPT4geSh0LCBbZ24sIGNjXSwgbikudGhlbigobykgPT4ge1xuICAgICAgaWYgKFwiZXJyb3JcIiBpbiBvKSB7XG4gICAgICAgIGlmIChvLmVycm9yID09PSBcIkFMUkVBRFlfRlVMTFNDUkVFTlwiKVxuICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgdGhyb3cgbmV3IGwoVXIsIFwiRnVsbHNjcmVlbiByZXF1ZXN0IGZhaWxlZFwiLCBvLmVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvLmlzX2Z1bGxzY3JlZW47XG4gICAgfSkudGhlbigobykgPT4ge1xuICAgICAgbyAhPT0gdXMoKSAmJiBhZSh7IGlzRnVsbHNjcmVlbjogbyB9KTtcbiAgICB9KSxcbiAgICAoKSA9PiBuZXcgbChxLCBcIkZ1bGxzY3JlZW4gbW9kZSBjaGFuZ2UgaXMgYWxyZWFkeSBiZWluZyByZXF1ZXN0ZWRcIiksXG4gICAgRW4sXG4gICAgbHNcbiAgKSk7XG59XG5jb25zdCBmYyA9IF9zKFwicmVxdWVzdEZ1bGxzY3JlZW5cIiwgcnMpLCBkYyA9IF9zKFwiZXhpdEZ1bGxzY3JlZW5cIiwgXCJ3ZWJfYXBwX2V4aXRfZnVsbHNjcmVlblwiKSwgZnMgPSBIKHJlKSwgbWMgPSBaZShyZSwgQmUpO1xuZnVuY3Rpb24gZnQoZSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gd24oKVtlXSk7XG59XG5jb25zdCB3biA9IEsoXCJzYWZlQXJlYUluc2V0c1wiKSwgZHMgPSBmdChcImJvdHRvbVwiKSwgbXMgPSBmdChcImxlZnRcIiksIGhzID0gZnQoXCJyaWdodFwiKSwgYnMgPSBmdChcInRvcFwiKTtcbmZ1bmN0aW9uIGR0KGUpIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+IFNuKClbZV0pO1xufVxuY29uc3QgU24gPSBLKFwiY29udGVudFNhZmVBcmVhSW5zZXRzXCIpLCBncyA9IGR0KFwiYm90dG9tXCIpLCBFcyA9IGR0KFwibGVmdFwiKSwgd3MgPSBkdChcInJpZ2h0XCIpLCBTcyA9IGR0KFwidG9wXCIpLCBoYyA9IC8qIEBfX1BVUkVfXyAqLyBoKFxuICBcInJlcXVlc3RDb250ZW50U2FmZUFyZWFJbnNldHNcIixcbiAgKGUpID0+IHkoeG4sIFwiY29udGVudF9zYWZlX2FyZWFfY2hhbmdlZFwiLCBlKSxcbiAgeyBpc1N1cHBvcnRlZDogeG4gfVxuKSwgYmMgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJyZXF1ZXN0U2FmZUFyZWFJbnNldHNcIixcbiAgKGUpID0+IHkoa24sIFwic2FmZV9hcmVhX2NoYW5nZWRcIiwgZSksXG4gIHsgaXNTdXBwb3J0ZWQ6IGtuIH1cbik7XG5mdW5jdGlvbiBnYyhlKSB7XG4gIHJldHVybiB5KFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIsIFwidmlld3BvcnRfY2hhbmdlZFwiLCBlKS50aGVuKCh0KSA9PiAoe1xuICAgIGhlaWdodDogdC5oZWlnaHQsXG4gICAgd2lkdGg6IHQud2lkdGgsXG4gICAgaXNFeHBhbmRlZDogdC5pc19leHBhbmRlZCxcbiAgICBpc1N0YWJsZTogdC5pc19zdGF0ZV9zdGFibGVcbiAgfSkpO1xufVxuY29uc3QgeXMgPSAoZSkgPT4ge1xuICBjb25zdCB7IGhlaWdodDogdCB9ID0gZTtcbiAgYWUoe1xuICAgIGlzRXhwYW5kZWQ6IGUuaXNfZXhwYW5kZWQsXG4gICAgaGVpZ2h0OiB0LFxuICAgIHdpZHRoOiBlLndpZHRoLFxuICAgIHN0YWJsZUhlaWdodDogZS5pc19zdGF0ZV9zdGFibGUgPyB0IDogdm9pZCAwXG4gIH0pO1xufSwgQXMgPSAoZSkgPT4ge1xuICBhZSh7IGlzRnVsbHNjcmVlbjogZS5pc19mdWxsc2NyZWVuIH0pO1xufSwgQ3MgPSAoZSkgPT4ge1xuICBhZSh7IHNhZmVBcmVhSW5zZXRzOiBlIH0pO1xufSwgdnMgPSAoZSkgPT4ge1xuICBhZSh7IGNvbnRlbnRTYWZlQXJlYUluc2V0czogZSB9KTtcbn0sIEVjID0gZnMoXCJtb3VudFwiLCAvKiBAX19QVVJFX18gKi8gJG8oXG4gIHJlLFxuICAoZSkgPT4gYi5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdCA9IEQoKSAmJiB1YygpO1xuICAgIGlmICh0KVxuICAgICAgcmV0dXJuIHQ7XG4gICAgY29uc3QgW1xuICAgICAgbixcbiAgICAgIG9cbiAgICBdID0gYXdhaXQgYi5hbGwoW1xuICAgICAgYmMuaWZBdmFpbGFibGUoZSkgfHwgd24oKSxcbiAgICAgIGhjLmlmQXZhaWxhYmxlKGUpIHx8IFNuKClcbiAgICBdKSwgcyA9IG9lKCksIHIgPSB7XG4gICAgICBjb250ZW50U2FmZUFyZWFJbnNldHM6IG8sXG4gICAgICBpc0Z1bGxzY3JlZW46ICEhcy5mdWxsc2NyZWVuLFxuICAgICAgc2FmZUFyZWFJbnNldHM6IG5cbiAgICB9O1xuICAgIGlmIChbXCJtYWNvc1wiLCBcInRkZXNrdG9wXCIsIFwidW5pZ3JhbVwiLCBcIndlYmtcIiwgXCJ3ZWJhXCIsIFwid2ViXCJdLmluY2x1ZGVzKHMucGxhdGZvcm0pKSB7XG4gICAgICBjb25zdCBhID0gd2luZG93O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucixcbiAgICAgICAgaGVpZ2h0OiBhLmlubmVySGVpZ2h0LFxuICAgICAgICBpc0V4cGFuZGVkOiAhMCxcbiAgICAgICAgc3RhYmxlSGVpZ2h0OiBhLmlubmVySGVpZ2h0LFxuICAgICAgICB3aWR0aDogYS5pbm5lcldpZHRoXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZ2MoZSkudGhlbigoYSkgPT4gKHtcbiAgICAgIC4uLnIsXG4gICAgICBoZWlnaHQ6IGEuaGVpZ2h0LFxuICAgICAgaXNFeHBhbmRlZDogYS5pc0V4cGFuZGVkLFxuICAgICAgc3RhYmxlSGVpZ2h0OiBhLmlzU3RhYmxlID8gYS5oZWlnaHQgOiAwLFxuICAgICAgd2lkdGg6IGEud2lkdGhcbiAgICB9KSk7XG4gIH0pLFxuICAoZSkgPT4ge1xuICAgIEUoY3MsIHlzKSwgRShnbiwgQXMpLCBFKGFzLCBDcyksIEUoaXMsIHZzKSwgYWUoZSk7XG4gIH0sXG4gIEJlLFxuICBfdCxcbiAgcHNcbikpO1xuZnVuY3Rpb24gd2MoKSB7XG4gIGNvbnN0IGUgPSBfdCgpO1xuICBlICYmIGUuY2FuY2VsKCksIHYoY3MsIHlzKSwgdihnbiwgQXMpLCB2KGFzLCBDcyksIHYoaXMsIHZzKSwgQmUuc2V0KCExKTtcbn1cbmNvbnN0IGplID0gLyogQF9fUFVSRV9fICovIGMoITEpLCB5biA9IEsoXCJoZWlnaHRcIiksIEFuID0gSyhcInN0YWJsZUhlaWdodFwiKSwgVHMgPSBLKFwid2lkdGhcIiksIFNjID0gbWMoXG4gIFwiYmluZENzc1ZhcnNcIixcbiAgKGUpID0+IHtcbiAgICBqZSgpICYmIGFuKCksIGUgfHwgKGUgPSAobikgPT4gYC0tdGctdmlld3BvcnQtJHt4dChuKX1gKTtcbiAgICBjb25zdCB0ID0gW1xuICAgICAgW1wiaGVpZ2h0XCIsIHluXSxcbiAgICAgIFtcInN0YWJsZUhlaWdodFwiLCBBbl0sXG4gICAgICBbXCJ3aWR0aFwiLCBUc10sXG4gICAgICBbXCJzYWZlQXJlYUluc2V0VG9wXCIsIGJzXSxcbiAgICAgIFtcInNhZmVBcmVhSW5zZXRCb3R0b21cIiwgZHNdLFxuICAgICAgW1wic2FmZUFyZWFJbnNldExlZnRcIiwgbXNdLFxuICAgICAgW1wic2FmZUFyZWFJbnNldFJpZ2h0XCIsIGhzXSxcbiAgICAgIFtcImNvbnRlbnRTYWZlQXJlYUluc2V0VG9wXCIsIFNzXSxcbiAgICAgIFtcImNvbnRlbnRTYWZlQXJlYUluc2V0Qm90dG9tXCIsIGdzXSxcbiAgICAgIFtcImNvbnRlbnRTYWZlQXJlYUluc2V0TGVmdFwiLCBFc10sXG4gICAgICBbXCJjb250ZW50U2FmZUFyZWFJbnNldFJpZ2h0XCIsIHdzXVxuICAgIF0ucmVkdWNlKChuLCBbbywgc10pID0+IHtcbiAgICAgIGNvbnN0IHIgPSBlKG8pO1xuICAgICAgaWYgKHIpIHtcbiAgICAgICAgY29uc3QgYSA9ICgpID0+IHtcbiAgICAgICAgICBWdChyLCBgJHtzKCl9cHhgKTtcbiAgICAgICAgfTtcbiAgICAgICAgbi5wdXNoKFthLCBzLnN1YihhKSwgcl0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG47XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB0LmZvckVhY2goKG4pID0+IHtcbiAgICAgIG5bMF0oKTtcbiAgICB9KSwgamUuc2V0KCEwKSwgKCkgPT4ge1xuICAgICAgdC5mb3JFYWNoKChuKSA9PiB7XG4gICAgICAgIG5bMV0oKSwgTHQoblsyXSk7XG4gICAgICB9KSwgamUuc2V0KCExKTtcbiAgICB9O1xuICB9XG4pLCB5YyA9IGZzKFwiZXhwYW5kXCIsICgpID0+IHtcbiAgZihcIndlYl9hcHBfZXhwYW5kXCIpO1xufSksIEFjID0gSyhcImlzRXhwYW5kZWRcIiksIENjID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4geW4oKSA9PT0gQW4oKSksIG91ID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgYmluZENzc1ZhcnM6IFNjLFxuICBjaGFuZ2VGdWxsc2NyZWVuRXJyb3I6IGxzLFxuICBjaGFuZ2VGdWxsc2NyZWVuUHJvbWlzZTogRW4sXG4gIGNvbnRlbnRTYWZlQXJlYUluc2V0Qm90dG9tOiBncyxcbiAgY29udGVudFNhZmVBcmVhSW5zZXRMZWZ0OiBFcyxcbiAgY29udGVudFNhZmVBcmVhSW5zZXRSaWdodDogd3MsXG4gIGNvbnRlbnRTYWZlQXJlYUluc2V0VG9wOiBTcyxcbiAgY29udGVudFNhZmVBcmVhSW5zZXRzOiBTbixcbiAgZXhpdEZ1bGxzY3JlZW46IGRjLFxuICBleHBhbmQ6IHljLFxuICBoZWlnaHQ6IHluLFxuICBpc0NoYW5naW5nRnVsbHNjcmVlbjogbGMsXG4gIGlzQ3NzVmFyc0JvdW5kOiBqZSxcbiAgaXNFeHBhbmRlZDogQWMsXG4gIGlzRnVsbHNjcmVlbjogdXMsXG4gIGlzTW91bnRlZDogQmUsXG4gIGlzTW91bnRpbmc6IHBjLFxuICBpc1N0YWJsZTogQ2MsXG4gIG1vdW50OiBFYyxcbiAgbW91bnRFcnJvcjogcHMsXG4gIG1vdW50UHJvbWlzZTogX3QsXG4gIHJlcXVlc3RGdWxsc2NyZWVuOiBmYyxcbiAgc2FmZUFyZWFJbnNldEJvdHRvbTogZHMsXG4gIHNhZmVBcmVhSW5zZXRMZWZ0OiBtcyxcbiAgc2FmZUFyZWFJbnNldFJpZ2h0OiBocyxcbiAgc2FmZUFyZWFJbnNldFRvcDogYnMsXG4gIHNhZmVBcmVhSW5zZXRzOiB3bixcbiAgc3RhYmxlSGVpZ2h0OiBBbixcbiAgc3RhdGU6IF9lLFxuICB1bm1vdW50OiB3YyxcbiAgd2lkdGg6IFRzXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpLCBMbiA9IFwid2ViX2FwcF9yZXF1ZXN0X2Vtb2ppX3N0YXR1c19hY2Nlc3NcIiwgJHMgPSAvKiBAX19QVVJFX18gKi8gYygpLCB2YyA9IC8qIEBfX1BVUkVfXyAqLyBjKCksIHN1ID0gLyogQF9fUFVSRV9fICovIF8oKCkgPT4gISEkcygpKSwgcnUgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJyZXF1ZXN0RW1vamlTdGF0dXNBY2Nlc3NcIixcbiAgLyogQF9fUFVSRV9fICovIFJlKFxuICAgICgpID0+IHkoTG4sIFwiZW1vamlfc3RhdHVzX2FjY2Vzc19yZXF1ZXN0ZWRcIikudGhlbigoZSkgPT4gZS5zdGF0dXMpLFxuICAgICgpID0+IG5ldyBsKFxuICAgICAgcSxcbiAgICAgIFwiRW1vamkgc3RhdHVzIGFjY2VzcyByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzc1wiXG4gICAgKSxcbiAgICAkcyxcbiAgICB2YyxcbiAgICAhMVxuICApLFxuICB7IGlzU3VwcG9ydGVkOiBMbiB9XG4pLCBqbiA9IFwid2ViX2FwcF9zZXRfZW1vamlfc3RhdHVzXCIsIFJzID0gLyogQF9fUFVSRV9fICovIGMoKSwgVGMgPSAvKiBAX19QVVJFX18gKi8gYygpLCBhdSA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+ICEhUnMoKSksIGl1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwic2V0RW1vamlTdGF0dXNcIixcbiAgLyogQF9fUFVSRV9fICovIFJlKFxuICAgIGFzeW5jIChlLCB0KSA9PiB7XG4gICAgICBjb25zdCBuID0gYXdhaXQgeShqbiwgW1wiZW1vamlfc3RhdHVzX3NldFwiLCBcImVtb2ppX3N0YXR1c19mYWlsZWRcIl0sIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgY3VzdG9tX2Vtb2ppX2lkOiBlLFxuICAgICAgICAgIGR1cmF0aW9uOiB0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKG4gJiYgXCJlcnJvclwiIGluIG4pXG4gICAgICAgIHRocm93IG5ldyBsKHFyLCBcIkZhaWxlZCB0byBzZXQgZW1vamkgc3RhdHVzXCIsIG4uZXJyb3IpO1xuICAgIH0sXG4gICAgKCkgPT4gbmV3IGwoXG4gICAgICBxLFxuICAgICAgXCJFbW9qaSBzdGF0dXMgc2V0IHJlcXVlc3QgaXMgY3VycmVudGx5IGluIHByb2dyZXNzXCJcbiAgICApLFxuICAgIFJzLFxuICAgIFRjLFxuICAgICExXG4gICksXG4gIHsgaXNTdXBwb3J0ZWQ6IGpuIH1cbiksIE9zID0gXCJ3ZWJfYXBwX2FkZF90b19ob21lX3NjcmVlblwiLCBpZSA9IHsgaXNTdXBwb3J0ZWQ6IE9zIH0sIFBzID0gLyogQF9fUFVSRV9fICovIGMoKSwgJGMgPSAvKiBAX19QVVJFX18gKi8gYygpLCBjdSA9IC8qIEBfX1BVUkVfXyAqLyBfKCgpID0+ICEhUHMoKSksIHV1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwiYWRkVG9Ib21lU2NyZWVuXCIsXG4gICgpID0+IHtcbiAgICBmKE9zKTtcbiAgfSxcbiAgaWVcbiksIGx1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwiY2hlY2tIb21lU2NyZWVuU3RhdHVzXCIsXG4gIC8qIEBfX1BVUkVfXyAqLyBSZShcbiAgICAoZSkgPT4geShcIndlYl9hcHBfY2hlY2tfaG9tZV9zY3JlZW5cIiwgXCJob21lX3NjcmVlbl9jaGVja2VkXCIsIGUpLnRoZW4oKHQpID0+IHQuc3RhdHVzIHx8IFwidW5rbm93blwiKSxcbiAgICAoKSA9PiBuZXcgbChcbiAgICAgIHEsXG4gICAgICBcIkNoZWNrIGhvbWUgc2NyZWVuIHN0YXR1cyByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzc1wiXG4gICAgKSxcbiAgICBQcyxcbiAgICAkY1xuICApLFxuICBpZVxuKSwgcHUgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJvbkFkZGVkVG9Ib21lU2NyZWVuXCIsXG4gIChlLCB0KSA9PiBFKFwiaG9tZV9zY3JlZW5fYWRkZWRcIiwgZSwgdCksXG4gIGllXG4pLCBfdSA9IC8qIEBfX1BVUkVfXyAqLyBoKFxuICBcIm9uQWRkVG9Ib21lU2NyZWVuRmFpbGVkXCIsXG4gIChlLCB0KSA9PiBFKFwiaG9tZV9zY3JlZW5fZmFpbGVkXCIsIGUsIHQpLFxuICBpZVxuKSwgZnUgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJvZmZBZGRlZFRvSG9tZVNjcmVlblwiLFxuICAoZSkgPT4ge1xuICAgIHYoXCJob21lX3NjcmVlbl9hZGRlZFwiLCBlKTtcbiAgfSxcbiAgaWVcbiksIGR1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwib2ZmQWRkVG9Ib21lU2NyZWVuRmFpbGVkXCIsXG4gIChlKSA9PiB7XG4gICAgdihcImhvbWVfc2NyZWVuX2ZhaWxlZFwiLCBlKTtcbiAgfSxcbiAgaWVcbiksIFJjID0gSCgpLCBtdSA9IFJjKFxuICBcIm9wZW5MaW5rXCIsXG4gIChlLCB0KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpXG4gICAgICB0cnkge1xuICAgICAgICBlID0gbmV3IFVSTChlKTtcbiAgICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgdGhyb3cgbmV3IGwoRnQsIGBcIiR7ZS50b1N0cmluZygpfVwiIGlzIGludmFsaWQgVVJMYCwgbik7XG4gICAgICB9XG4gICAgdCB8fCAodCA9IHt9KSwgZihcIndlYl9hcHBfb3Blbl9saW5rXCIsIHtcbiAgICAgIHVybDogZS50b1N0cmluZygpLFxuICAgICAgdHJ5X2Jyb3dzZXI6IHQudHJ5QnJvd3NlcixcbiAgICAgIHRyeV9pbnN0YW50X3ZpZXc6IHQudHJ5SW5zdGFudFZpZXdcbiAgICB9KTtcbiAgfVxuKSwgSG4gPSBcIndlYl9hcHBfb3Blbl90Z19saW5rXCIsIE9jID0gSCgpLCBQYyA9IE9jKFxuICBcIm9wZW5UZWxlZ3JhbUxpbmtcIixcbiAgKGUpID0+IHtcbiAgICBjb25zdCB0ID0gZS50b1N0cmluZygpO1xuICAgIGlmICghdC5tYXRjaCgvXmh0dHBzOlxcL1xcL3QubWVcXC8uKy8pKVxuICAgICAgdGhyb3cgbmV3IGwoRnQsIGBcIiR7dH1cIiBpcyBpbnZhbGlkIFVSTGApO1xuICAgIGlmICghUShIbiwgVigpKSkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB0O1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlID0gbmV3IFVSTChlKSwgZihIbiwgeyBwYXRoX2Z1bGw6IGUucGF0aG5hbWUgKyBlLnNlYXJjaCB9KTtcbiAgfVxuKSwgQmMgPSBIKCksIGh1ID0gQmMoXG4gIFwic2hhcmVVUkxcIixcbiAgKGUsIHQpID0+IHtcbiAgICBQYyhcbiAgICAgIFwiaHR0cHM6Ly90Lm1lL3NoYXJlL3VybD9cIiArIG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB1cmw6IGUsIHRleHQ6IHQgfHwgXCJcIiB9KS50b1N0cmluZygpLnJlcGxhY2UoL1xcKy9nLCBcIiUyMFwiKVxuICAgICk7XG4gIH1cbiksIER0ID0gXCJ3ZWJfYXBwX3JlcXVlc3RfcGhvbmVcIiwgd3QgPSAvKiBAX19QVVJFX18gKi8gYyghMSksIE1jID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwicmVxdWVzdFBob25lQWNjZXNzXCIsXG4gIChlKSA9PiB7XG4gICAgaWYgKHd0KCkpXG4gICAgICB0aHJvdyBuZXcgbChxLCBcIlBob25lIGFjY2VzcyByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzc1wiKTtcbiAgICByZXR1cm4gd3Quc2V0KCEwKSwgeShEdCwgXCJwaG9uZV9yZXF1ZXN0ZWRcIiwgZSkudGhlbigodCkgPT4gdC5zdGF0dXMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgd3Quc2V0KCExKTtcbiAgICB9KTtcbiAgfSxcbiAge1xuICAgIGlzU3VwcG9ydGVkOiBEdFxuICB9XG4pO1xuZnVuY3Rpb24gVW4oZSkge1xuICByZXR1cm4gZSB8fCAoZSA9IHt9KSwgc2UoXCJnZXRSZXF1ZXN0ZWRDb250YWN0XCIsIHt9LCB7XG4gICAgLi4uZSxcbiAgICB0aW1lb3V0OiBlLnRpbWVvdXQgfHwgNWUzXG4gIH0pLnRoZW4oXG4gICAgS24oe1xuICAgICAgY29udGFjdDogSGUoe1xuICAgICAgICB1c2VySWQ6IFtcInVzZXJfaWRcIiwgVWUoKV0sXG4gICAgICAgIHBob25lTnVtYmVyOiBbXCJwaG9uZV9udW1iZXJcIiwgTCgpXSxcbiAgICAgICAgZmlyc3ROYW1lOiBbXCJmaXJzdF9uYW1lXCIsIEwoKV0sXG4gICAgICAgIGxhc3ROYW1lOiBbXCJsYXN0X25hbWVcIiwgTCghMCldXG4gICAgICB9KSgpLFxuICAgICAgYXV0aERhdGU6IFtcImF1dGhfZGF0ZVwiLCBOdCgpXSxcbiAgICAgIGhhc2g6IEwoKVxuICAgIH0pKClcbiAgKTtcbn1cbmNvbnN0IGJ1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwicmVxdWVzdENvbnRhY3RcIixcbiAgKGUpID0+IGIud2l0aEZuKFxuICAgIGFzeW5jICh0KSA9PiB7XG4gICAgICBjb25zdCBuID0geyBhYm9ydFNpZ25hbDogdCB9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFVuKG4pO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICB9XG4gICAgICBpZiAoYXdhaXQgTWMobikgIT09IFwic2VudFwiKVxuICAgICAgICB0aHJvdyBuZXcgbChrciwgXCJVc2VyIGRlbmllZCBhY2Nlc3NcIik7XG4gICAgICBsZXQgcyA9IDUwO1xuICAgICAgZm9yICg7ICF0LmFib3J0ZWQ7ICkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBVbihuKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgYXIocyksIHMgKz0gNTA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGVcbiAgKSxcbiAge1xuICAgIGlzU3VwcG9ydGVkOiBEdFxuICB9XG4pLCBxbiA9IFwid2ViX2FwcF9yZXF1ZXN0X3dyaXRlX2FjY2Vzc1wiLCBTdCA9IC8qIEBfX1BVUkVfXyAqLyBjKCExKSwgZ3UgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJyZXF1ZXN0V3JpdGVBY2Nlc3NcIixcbiAgKGUpID0+IHtcbiAgICBpZiAoU3QoKSlcbiAgICAgIHRocm93IG5ldyBsKHEsIFwiV3JpdGUgYWNjZXNzIHJlcXVlc3QgaXMgY3VycmVudGx5IGluIHByb2dyZXNzXCIpO1xuICAgIHJldHVybiBTdC5zZXQoITApLCB5KHFuLCBcIndyaXRlX2FjY2Vzc19yZXF1ZXN0ZWRcIiwgZSkudGhlbigodCkgPT4gdC5zdGF0dXMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgU3Quc2V0KCExKTtcbiAgICB9KTtcbiAgfSxcbiAge1xuICAgIGlzU3VwcG9ydGVkOiBxblxuICB9XG4pLCBFdSA9IC8qIEBfX1BVUkVfXyAqLyBoKFxuICBcImdldEN1cnJlbnRUaW1lXCIsXG4gIChlKSA9PiBzZShcImdldEN1cnJlbnRUaW1lXCIsIHt9LCBlKS50aGVuKE50KCkpLFxuICB7XG4gICAgaXNTdXBwb3J0ZWQ6IFwid2ViX2FwcF9pbnZva2VfY3VzdG9tX21ldGhvZFwiXG4gIH1cbiksIEZuID0gXCJ3ZWJfYXBwX3JlYWRfdGV4dF9mcm9tX2NsaXBib2FyZFwiLCB3dSA9IC8qIEBfX1BVUkVfXyAqLyBoKFxuICBcInJlYWRUZXh0RnJvbUNsaXBib2FyZFwiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBDbygpO1xuICAgIHJldHVybiB5KEZuLCBcImNsaXBib2FyZF90ZXh0X3JlY2VpdmVkXCIsIHtcbiAgICAgIC4uLmUsXG4gICAgICBwYXJhbXM6IHsgcmVxX2lkOiB0IH0sXG4gICAgICBjYXB0dXJlOiB5byh0KVxuICAgIH0pLnRoZW4oKHsgZGF0YTogbiA9IG51bGwgfSkgPT4gbik7XG4gIH0sXG4gIHtcbiAgICBpc1N1cHBvcnRlZDogRm5cbiAgfVxuKSwgU3UgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJzZW5kRGF0YVwiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHsgc2l6ZTogdCB9ID0gbmV3IEJsb2IoW2VdKTtcbiAgICBpZiAoIXQgfHwgdCA+IDQwOTYpXG4gICAgICB0aHJvdyBuZXcgbChOciwgdCA/IFwiTWF4aW11bSBzaXplIG9mIGRhdGEgdG8gc2VuZCBpcyA0MDk2IGJ5dGVzXCIgOiBcIkF0dGVtcHRlZCB0byBzZW5kIGVtcHR5IGRhdGFcIik7XG4gICAgZihcIndlYl9hcHBfZGF0YV9zZW5kXCIsIHsgZGF0YTogZSB9KTtcbiAgfVxuKSwgV24gPSBcIndlYl9hcHBfc2hhcmVfdG9fc3RvcnlcIiwgeXUgPSAvKiBAX19QVVJFX18gKi8gaChcbiAgXCJzaGFyZVN0b3J5XCIsXG4gIChlLCB0KSA9PiB7XG4gICAgdCB8fCAodCA9IHt9KSwgZihXbiwge1xuICAgICAgdGV4dDogdC50ZXh0LFxuICAgICAgbWVkaWFfdXJsOiBlLFxuICAgICAgd2lkZ2V0X2xpbms6IHQud2lkZ2V0TGlua1xuICAgIH0pO1xuICB9LFxuICB7IGlzU3VwcG9ydGVkOiBXbiB9XG4pLCBHbiA9IFwid2ViX2FwcF9zd2l0Y2hfaW5saW5lX3F1ZXJ5XCIsIEF1ID0gLyogQF9fUFVSRV9fICovIGgoXG4gIFwic3dpdGNoSW5saW5lUXVlcnlcIixcbiAgKGUsIHQpID0+IHtcbiAgICBmKEduLCB7XG4gICAgICBxdWVyeTogZSxcbiAgICAgIGNoYXRfdHlwZXM6IHQgfHwgW11cbiAgICB9KTtcbiAgfSxcbiAge1xuICAgIGlzU3VwcG9ydGVkOiBbR24sIHtcbiAgICAgIGZuOiAoKSA9PiAhIW9lKCkuYm90SW5saW5lLFxuICAgICAgZXJyb3I6IFwiTWluaSBBcHAgc2hvdWxkIGJlIHJhbiBpbiBCb3QgaW5saW5lIG1vZGVcIlxuICAgIH1dXG4gIH1cbik7XG5mdW5jdGlvbiBDdShlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHsgcmVzdWx0OiBlKCkgfTtcbiAgfSBjYXRjaCAodCkge1xuICAgIHJldHVybiB7IGVycm9yOiB0IH07XG4gIH1cbn1cbmZ1bmN0aW9uIHZ1KGUpIHtcbiAgSXIoZSksIENyKCk7XG4gIGNvbnN0IFt0LCBuXSA9IHRlKFxuICAgIEUoXCJyZWxvYWRfaWZyYW1lXCIsICgpID0+IHtcbiAgICAgIGYoXCJpZnJhbWVfd2lsbF9yZWxvYWRcIiksIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9KSxcbiAgICB2clxuICApLCB7IGFjY2VwdEN1c3RvbVN0eWxlczogbyA9ICEwIH0gPSBlIHx8IHt9O1xuICBpZiAobykge1xuICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgcy5pZCA9IFwidGVsZWdyYW0tY3VzdG9tLXN0eWxlc1wiLCBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpLCB0KFxuICAgICAgRShcInNldF9jdXN0b21fc3R5bGVcIiwgKHIpID0+IHtcbiAgICAgICAgcy5pbm5lckhUTUwgPSByO1xuICAgICAgfSksXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQocyk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gZihcImlmcmFtZV9yZWFkeVwiLCB7IHJlbG9hZF9zdXBwb3J0ZWQ6ICEwIH0pLCBuO1xufVxuZXhwb3J0IHtcbiAgTXIgYXMgJGNyZWF0ZVJlcXVlc3RJZCxcbiAgbHIgYXMgJGRlYnVnLFxuICBBbyBhcyAkcG9zdEV2ZW50LFxuICBnciBhcyAkdGFyZ2V0T3JpZ2luLFxuICBWIGFzICR2ZXJzaW9uLFxuICBiIGFzIENhbmNlbGFibGVQcm9taXNlLFxuICBwbyBhcyBFUlJfQUJPUlRFRCxcbiAga3IgYXMgRVJSX0FDQ0VTU19ERU5JRUQsXG4gIHhyIGFzIEVSUl9BTFJFQURZX01PVU5USU5HLFxuICBXdCBhcyBFUlJfQUxSRUFEWV9PUEVORUQsXG4gIHEgYXMgRVJSX0FMUkVBRFlfUkVRVUVTVElORyxcbiAgX28gYXMgRVJSX0NBTkNFTEVELFxuICBWciBhcyBFUlJfQ1NTX1ZBUlNfQUxSRUFEWV9CT1VORCxcbiAgYnIgYXMgRVJSX0NVU1RPTV9NRVRIT0RfRVJSX1JFU1BPTlNFLFxuICBOciBhcyBFUlJfREFUQV9JTlZBTElEX1NJWkUsXG4gIHFyIGFzIEVSUl9FTU9KSV9TVEFUVVNfU0VUX0ZBSUxFRCxcbiAgVXIgYXMgRVJSX0ZVTExTQ1JFRU5fRkFJTEVELFxuICBEciBhcyBFUlJfSU5WQUxJRF9TTFVHLFxuICBGdCBhcyBFUlJfSU5WQUxJRF9VUkwsXG4gIE1zIGFzIEVSUl9JTlZBTElEX1ZBTFVFLFxuICBociBhcyBFUlJfTUVUSE9EX1BBUkFNRVRFUl9VTlNVUFBPUlRFRCxcbiAgZHIgYXMgRVJSX01FVEhPRF9VTlNVUFBPUlRFRCxcbiAgTHIgYXMgRVJSX05PVF9BVkFJTEFCTEUsXG4gIGpyIGFzIEVSUl9OT1RfSU5JVElBTElaRUQsXG4gIEhyIGFzIEVSUl9OT1RfTU9VTlRFRCxcbiAgSW4gYXMgRVJSX05PVF9TVVBQT1JURUQsXG4gIFFuIGFzIEVSUl9QQVJTRSxcbiAgY2UgYXMgRVJSX1BPUFVQX0lOVkFMSURfUEFSQU1TLFxuICBtciBhcyBFUlJfUkVUUklFVkVfTFBfRkFJTEVELFxuICBmbyBhcyBFUlJfVElNRURfT1VULFxuICBEcyBhcyBFUlJfVU5FWFBFQ1RFRF9UWVBFLFxuICBJcyBhcyBFUlJfVU5FWFBFQ1RFRF9WQUxVRSxcbiAgZ28gYXMgRVJSX1VOS05PV05fRU5WLFxuICBsIGFzIFR5cGVkRXJyb3IsXG4gIGxvIGFzIGFkZEV2ZW50TGlzdGVuZXIsXG4gIHV1IGFzIGFkZFRvSG9tZVNjcmVlbixcbiAgYWEgYXMgYXV0aGVudGljYXRlQmlvbWV0cnksXG4gIEhjIGFzIGJhY2tCdXR0b24sXG4gIEVpIGFzIGJpbmRNaW5pQXBwQ3NzVmFycyxcbiAgZGkgYXMgYmluZFRoZW1lUGFyYW1zQ3NzVmFycyxcbiAgU2MgYXMgYmluZFZpZXdwb3J0Q3NzVmFycyxcbiAgVWMgYXMgYmlvbWV0cnksXG4gIFJvIGFzIGJpb21ldHJ5TW91bnRFcnJvcixcbiAgUWUgYXMgYmlvbWV0cnlTdGF0ZSxcbiAgbHMgYXMgY2hhbmdlRnVsbHNjcmVlbkVycm9yLFxuICBFbiBhcyBjaGFuZ2VGdWxsc2NyZWVuUHJvbWlzZSxcbiAgbHUgYXMgY2hlY2tIb21lU2NyZWVuU3RhdHVzLFxuICAkYyBhcyBjaGVja0hvbWVTY3JlZW5TdGF0dXNFcnJvcixcbiAgUHMgYXMgY2hlY2tIb21lU2NyZWVuU3RhdHVzUHJvbWlzZSxcbiAgeXQgYXMgY2xhc3NOYW1lcyxcbiAgd2kgYXMgY2xvc2VNaW5pQXBwLFxuICBCdCBhcyBjbG9zZVFyU2Nhbm5lcixcbiAgcWMgYXMgY2xvc2luZ0JlaGF2aW9yLFxuICBGYyBhcyBjbG91ZFN0b3JhZ2UsXG4gIFRyIGFzIGNvbXBhcmVWZXJzaW9ucyxcbiAgJHIgYXMgY3JlYXRlUG9zdEV2ZW50LFxuICBDciBhcyBkZWZpbmVFdmVudEhhbmRsZXJzLFxuICBnYSBhcyBkZWxldGVDbG91ZFN0b3JhZ2VJdGVtLFxuICBMdCBhcyBkZWxldGVDc3NWYXIsXG4gIGZhIGFzIGRpc2FibGVDbG9zaW5nQ29uZmlybWF0aW9uLFxuICBzYyBhcyBkaXNhYmxlVmVydGljYWxTd2lwZXMsXG4gIHZ0IGFzIGVtaXRNaW5pQXBwc0V2ZW50LFxuICBkYSBhcyBlbmFibGVDbG9zaW5nQ29uZmlybWF0aW9uLFxuICByYyBhcyBlbmFibGVWZXJ0aWNhbFN3aXBlcyxcbiAgZGMgYXMgZXhpdEZ1bGxzY3JlZW4sXG4gIHljIGFzIGV4cGFuZFZpZXdwb3J0LFxuICB3YSBhcyBnZXRDbG91ZFN0b3JhZ2VJdGVtLFxuICBTYSBhcyBnZXRDbG91ZFN0b3JhZ2VLZXlzLFxuICBFdSBhcyBnZXRDdXJyZW50VGltZSxcbiAgV2MgYXMgaGFwdGljRmVlZGJhY2ssXG4gIENhIGFzIGhhcHRpY0ZlZWRiYWNrSW1wYWN0T2NjdXJyZWQsXG4gIHZhIGFzIGhhcHRpY0ZlZWRiYWNrTm90aWZpY2F0aW9uT2NjdXJyZWQsXG4gIFRhIGFzIGhhcHRpY0ZlZWRiYWNrU2VsZWN0aW9uQ2hhbmdlZCxcbiAgV3IgYXMgaGlkZUJhY2tCdXR0b24sXG4gIFlpIGFzIGhpZGVTZXR0aW5nc0J1dHRvbixcbiAgdnUgYXMgaW5pdCxcbiAgR2MgYXMgaW5pdERhdGEsXG4gIElvIGFzIGluaXREYXRhQXV0aERhdGUsXG4gIERvIGFzIGluaXREYXRhQ2FuU2VuZEFmdGVyLFxuICAkYSBhcyBpbml0RGF0YUNhblNlbmRBZnRlckRhdGUsXG4gIFJhIGFzIGluaXREYXRhQ2hhdCxcbiAgUGEgYXMgaW5pdERhdGFDaGF0SW5zdGFuY2UsXG4gIE9hIGFzIGluaXREYXRhQ2hhdFR5cGUsXG4gIEJhIGFzIGluaXREYXRhSGFzaCxcbiAgTWEgYXMgaW5pdERhdGFRdWVyeUlkLFxuICBObyBhcyBpbml0RGF0YVJhdyxcbiAgSWEgYXMgaW5pdERhdGFSZWNlaXZlcixcbiAgTmEgYXMgaW5pdERhdGFTdGFydFBhcmFtLFxuICBlbiBhcyBpbml0RGF0YVN0YXRlLFxuICBrYSBhcyBpbml0RGF0YVVzZXIsXG4gIFFjIGFzIGludm9pY2UsXG4gIFJyIGFzIGludm9rZUN1c3RvbU1ldGhvZCxcbiAga2MgYXMgaXNBYm9ydEVycm9yLFxuICBJZSBhcyBpc0F1dGhlbnRpY2F0aW5nQmlvbWV0cnksXG4gIG1lIGFzIGlzQmFja0J1dHRvbk1vdW50ZWQsXG4gIEZyIGFzIGlzQmFja0J1dHRvblN1cHBvcnRlZCxcbiAgJHQgYXMgaXNCYWNrQnV0dG9uVmlzaWJsZSxcbiAgSmUgYXMgaXNCaW9tZXRyeU1vdW50ZWQsXG4gIEtyIGFzIGlzQmlvbWV0cnlNb3VudGluZyxcbiAgb2EgYXMgaXNCaW9tZXRyeVN1cHBvcnRlZCxcbiAgeGMgYXMgaXNDYW5jZWxlZEVycm9yLFxuICBsYyBhcyBpc0NoYW5naW5nRnVsbHNjcmVlbixcbiAgY3UgYXMgaXNDaGVja2luZ0hvbWVTY3JlZW5TdGF0dXMsXG4gIGhlIGFzIGlzQ2xvc2luZ0JlaGF2aW9yTW91bnRlZCxcbiAgUnQgYXMgaXNDbG9zaW5nQ29uZmlybWF0aW9uRW5hYmxlZCxcbiAgYmEgYXMgaXNDbG91ZFN0b3JhZ2VTdXBwb3J0ZWQsXG4gIFZvIGFzIGlzQ29sb3JEYXJrLFxuICB1cyBhcyBpc0Z1bGxzY3JlZW4sXG4gIEFhIGFzIGlzSGFwdGljRmVlZGJhY2tTdXBwb3J0ZWQsXG4gIHRyIGFzIGlzSWZyYW1lLFxuICBOZSBhcyBpc0ludm9pY2VPcGVuZWQsXG4gIFZhIGFzIGlzSW52b2ljZVN1cHBvcnRlZCxcbiAgWGEgYXMgaXNNYWluQnV0dG9uRW5hYmxlZCxcbiAgZWkgYXMgaXNNYWluQnV0dG9uTG9hZGVyVmlzaWJsZSxcbiAgZ2UgYXMgaXNNYWluQnV0dG9uTW91bnRlZCxcbiAgdGkgYXMgaXNNYWluQnV0dG9uVmlzaWJsZSxcbiAgb3QgYXMgaXNNaW5pQXBwQWN0aXZlLFxuICB4ZSBhcyBpc01pbmlBcHBDc3NWYXJzQm91bmQsXG4gIGhpIGFzIGlzTWluaUFwcERhcmssXG4gIHllIGFzIGlzTWluaUFwcE1vdW50ZWQsXG4gIGJpIGFzIGlzTWluaUFwcFN1cHBvcnRlZCxcbiAgTGUgYXMgaXNQb3B1cE9wZW5lZCxcbiAgVGkgYXMgaXNQb3B1cFN1cHBvcnRlZCxcbiAgWCBhcyBpc1FyU2Nhbm5lck9wZW5lZCxcbiAgQmkgYXMgaXNRclNjYW5uZXJTdXBwb3J0ZWQsXG4gIGZlIGFzIGlzUkdCLFxuICB4cyBhcyBpc1JHQlNob3J0LFxuICBYbiBhcyBpc1JlY29yZCxcbiAgRGUgYXMgaXNSZXF1ZXN0aW5nQmlvbWV0cnlBY2Nlc3MsXG4gIHN1IGFzIGlzUmVxdWVzdGluZ0Vtb2ppU3RhdHVzQWNjZXNzLFxuICB3dCBhcyBpc1JlcXVlc3RpbmdQaG9uZUFjY2VzcyxcbiAgU3QgYXMgaXNSZXF1ZXN0aW5nV3JpdGVBY2Nlc3MsXG4gIERuIGFzIGlzU1NSLFxuICBraSBhcyBpc1NlY29uZGFyeUJ1dHRvbkVuYWJsZWQsXG4gIHhpIGFzIGlzU2Vjb25kYXJ5QnV0dG9uTG9hZGVyVmlzaWJsZSxcbiAgQWUgYXMgaXNTZWNvbmRhcnlCdXR0b25Nb3VudGVkLFxuICBxaSBhcyBpc1NlY29uZGFyeUJ1dHRvblN1cHBvcnRlZCxcbiAgVmkgYXMgaXNTZWNvbmRhcnlCdXR0b25WaXNpYmxlLFxuICBhdSBhcyBpc1NldHRpbmdFbW9qaVN0YXR1cyxcbiAgQ2UgYXMgaXNTZXR0aW5nc0J1dHRvbk1vdW50ZWQsXG4gIEppIGFzIGlzU2V0dGluZ3NCdXR0b25TdXBwb3J0ZWQsXG4gIE10IGFzIGlzU2V0dGluZ3NCdXR0b25WaXNpYmxlLFxuICB2ZSBhcyBpc1N3aXBlQmVoYXZpb3JNb3VudGVkLFxuICBuYyBhcyBpc1N3aXBlQmVoYXZpb3JTdXBwb3J0ZWQsXG4gIEJuIGFzIGlzVE1BLFxuICBrZSBhcyBpc1RoZW1lUGFyYW1zQ3NzVmFyc0JvdW5kLFxuICBGYSBhcyBpc1RoZW1lUGFyYW1zRGFyayxcbiAgYmUgYXMgaXNUaGVtZVBhcmFtc01vdW50ZWQsXG4gIE5jIGFzIGlzVGltZW91dEVycm9yLFxuICBJdCBhcyBpc1ZlcnRpY2FsU3dpcGVzRW5hYmxlZCxcbiAgamUgYXMgaXNWaWV3cG9ydENzc1ZhcnNCb3VuZCxcbiAgQWMgYXMgaXNWaWV3cG9ydEV4cGFuZGVkLFxuICBCZSBhcyBpc1ZpZXdwb3J0TW91bnRlZCxcbiAgcGMgYXMgaXNWaWV3cG9ydE1vdW50aW5nLFxuICBDYyBhcyBpc1ZpZXdwb3J0U3RhYmxlLFxuICBKYyBhcyBtYWluQnV0dG9uLFxuICBLYSBhcyBtYWluQnV0dG9uQmFja2dyb3VuZENvbG9yLFxuICBaYSBhcyBtYWluQnV0dG9uSGFzU2hpbmVFZmZlY3QsXG4gIHNuIGFzIG1haW5CdXR0b25TdGF0ZSxcbiAgbmkgYXMgbWFpbkJ1dHRvblRleHQsXG4gIG9pIGFzIG1haW5CdXR0b25UZXh0Q29sb3IsXG4gIERjIGFzIG1lcmdlQ2xhc3NOYW1lcyxcbiAgWWMgYXMgbWluaUFwcCxcbiAgRWUgYXMgbWluaUFwcEJhY2tncm91bmRDb2xvcixcbiAgY24gYXMgbWluaUFwcEJhY2tncm91bmRDb2xvclJHQixcbiAgd2UgYXMgbWluaUFwcEJvdHRvbUJhckNvbG9yLFxuICB1biBhcyBtaW5pQXBwQm90dG9tQmFyQ29sb3JSR0IsXG4gIFNlIGFzIG1pbmlBcHBIZWFkZXJDb2xvcixcbiAgR28gYXMgbWluaUFwcEhlYWRlckNvbG9yUkdCLFxuICB5aSBhcyBtaW5pQXBwUmVhZHksXG4gIHpvIGFzIG1pbmlBcHBTdGF0ZSxcbiAgVmMgYXMgbW9ja1RlbGVncmFtRW52LFxuICBHciBhcyBtb3VudEJhY2tCdXR0b24sXG4gIHVhIGFzIG1vdW50QmlvbWV0cnksXG4gIG1hIGFzIG1vdW50Q2xvc2luZ0JlaGF2aW9yLFxuICBhaSBhcyBtb3VudE1haW5CdXR0b24sXG4gIFNpIGFzIG1vdW50TWluaUFwcCxcbiAgRmkgYXMgbW91bnRTZWNvbmRhcnlCdXR0b24sXG4gIEtpIGFzIG1vdW50U2V0dGluZ3NCdXR0b24sXG4gIGFjIGFzIG1vdW50U3dpcGVCZWhhdmlvcixcbiAgcW8gYXMgbW91bnRUaGVtZVBhcmFtcyxcbiAgRWMgYXMgbW91bnRWaWV3cG9ydCxcbiAgdiBhcyBvZmYsXG4gIGR1IGFzIG9mZkFkZFRvSG9tZVNjcmVlbkZhaWxlZCxcbiAgZnUgYXMgb2ZmQWRkZWRUb0hvbWVTY3JlZW4sXG4gIFFyIGFzIG9mZkJhY2tCdXR0b25DbGljayxcbiAgY2kgYXMgb2ZmTWFpbkJ1dHRvbkNsaWNrLFxuICBHaSBhcyBvZmZTZWNvbmRhcnlCdXR0b25DbGljayxcbiAgWGkgYXMgb2ZmU2V0dGluZ3NCdXR0b25DbGljayxcbiAgRSBhcyBvbixcbiAgX3UgYXMgb25BZGRUb0hvbWVTY3JlZW5GYWlsZWQsXG4gIHB1IGFzIG9uQWRkZWRUb0hvbWVTY3JlZW4sXG4gIHpyIGFzIG9uQmFja0J1dHRvbkNsaWNrLFxuICBpaSBhcyBvbk1haW5CdXR0b25DbGljayxcbiAgV2kgYXMgb25TZWNvbmRhcnlCdXR0b25DbGljayxcbiAgWmkgYXMgb25TZXR0aW5nc0J1dHRvbkNsaWNrLFxuICBpYSBhcyBvcGVuQmlvbWV0cnlTZXR0aW5ncyxcbiAgTGEgYXMgb3Blbkludm9pY2UsXG4gIG11IGFzIG9wZW5MaW5rLFxuICAkaSBhcyBvcGVuUG9wdXAsXG4gIElpIGFzIG9wZW5RclNjYW5uZXIsXG4gIFBjIGFzIG9wZW5UZWxlZ3JhbUxpbmssXG4gIHpjIGFzIHBhcnNlSW5pdERhdGEsXG4gIHBpIGFzIHBhcnNlVGhlbWVQYXJhbXMsXG4gIEtjIGFzIHBvcHVwLFxuICBIdCBhcyBwb3N0RXZlbnQsXG4gIFpjIGFzIHFyU2Nhbm5lcixcbiAgd3UgYXMgcmVhZFRleHRGcm9tQ2xpcGJvYXJkLFxuICB2ciBhcyByZW1vdmVFdmVudEhhbmRsZXJzLFxuICBVdCBhcyByZXF1ZXN0LFxuICBYciBhcyByZXF1ZXN0QmlvbWV0cnksXG4gIGNhIGFzIHJlcXVlc3RCaW9tZXRyeUFjY2VzcyxcbiAgYnUgYXMgcmVxdWVzdENvbnRhY3QsXG4gIGhjIGFzIHJlcXVlc3RDb250ZW50U2FmZUFyZWFJbnNldHMsXG4gIHJ1IGFzIHJlcXVlc3RFbW9qaVN0YXR1c0FjY2VzcyxcbiAgdmMgYXMgcmVxdWVzdEVtb2ppU3RhdHVzQWNjZXNzRXJyb3IsXG4gICRzIGFzIHJlcXVlc3RFbW9qaVN0YXR1c0FjY2Vzc1Byb21pc2UsXG4gIGZjIGFzIHJlcXVlc3RGdWxsc2NyZWVuLFxuICBNYyBhcyByZXF1ZXN0UGhvbmVBY2Nlc3MsXG4gIGJjIGFzIHJlcXVlc3RTYWZlQXJlYUluc2V0cyxcbiAgZ2MgYXMgcmVxdWVzdFZpZXdwb3J0LFxuICBndSBhcyByZXF1ZXN0V3JpdGVBY2Nlc3MsXG4gIERhIGFzIHJlc3RvcmVJbml0RGF0YSxcbiAgb2UgYXMgcmV0cmlldmVMYXVuY2hQYXJhbXMsXG4gIEN1IGFzIHNhZmVDYWxsLFxuICBYYyBhcyBzZWNvbmRhcnlCdXR0b24sXG4gIERpIGFzIHNlY29uZGFyeUJ1dHRvbkJhY2tncm91bmRDb2xvcixcbiAgTmkgYXMgc2Vjb25kYXJ5QnV0dG9uSGFzU2hpbmVFZmZlY3QsXG4gIExpIGFzIHNlY29uZGFyeUJ1dHRvblBvc2l0aW9uLFxuICBmbiBhcyBzZWNvbmRhcnlCdXR0b25TdGF0ZSxcbiAgamkgYXMgc2Vjb25kYXJ5QnV0dG9uVGV4dCxcbiAgSGkgYXMgc2Vjb25kYXJ5QnV0dG9uVGV4dENvbG9yLFxuICBTdSBhcyBzZW5kRGF0YSxcbiAgSWMgYXMgc2VyaWFsaXplTGF1bmNoUGFyYW1zLFxuICB2biBhcyBzZXJpYWxpemVUaGVtZVBhcmFtcyxcbiAgeWEgYXMgc2V0Q2xvdWRTdG9yYWdlSXRlbSxcbiAgVnQgYXMgc2V0Q3NzVmFyLFxuICBpdSBhcyBzZXRFbW9qaVN0YXR1cyxcbiAgVGMgYXMgc2V0RW1vamlTdGF0dXNFcnJvcixcbiAgUnMgYXMgc2V0RW1vamlTdGF0dXNQcm9taXNlLFxuICB1aSBhcyBzZXRNYWluQnV0dG9uUGFyYW1zLFxuICBLbyBhcyBzZXRNaW5pQXBwQmFja2dyb3VuZENvbG9yLFxuICBabyBhcyBzZXRNaW5pQXBwQm90dG9tQmFyQ29sb3IsXG4gIFhvIGFzIHNldE1pbmlBcHBIZWFkZXJDb2xvcixcbiAgemkgYXMgc2V0U2Vjb25kYXJ5QnV0dG9uUGFyYW1zLFxuICBldSBhcyBzZXR0aW5nc0J1dHRvbixcbiAgeXUgYXMgc2hhcmVTdG9yeSxcbiAgaHUgYXMgc2hhcmVVUkwsXG4gIEpyIGFzIHNob3dCYWNrQnV0dG9uLFxuICBlYyBhcyBzaG93U2V0dGluZ3NCdXR0b24sXG4gIExjIGFzIHN1YnNjcmliZSxcbiAgUSBhcyBzdXBwb3J0cyxcbiAgdHUgYXMgc3dpcGVCZWhhdmlvcixcbiAgQXUgYXMgc3dpdGNoSW5saW5lUXVlcnksXG4gIG51IGFzIHRoZW1lUGFyYW1zLFxuICBqYSBhcyB0aGVtZVBhcmFtc0FjY2VudFRleHRDb2xvcixcbiAgbm4gYXMgdGhlbWVQYXJhbXNCYWNrZ3JvdW5kQ29sb3IsXG4gIGpvIGFzIHRoZW1lUGFyYW1zQm90dG9tQmFyQmdDb2xvcixcbiAgb24gYXMgdGhlbWVQYXJhbXNCdXR0b25Db2xvcixcbiAgTG8gYXMgdGhlbWVQYXJhbXNCdXR0b25UZXh0Q29sb3IsXG4gIEhhIGFzIHRoZW1lUGFyYW1zRGVzdHJ1Y3RpdmVUZXh0Q29sb3IsXG4gIFVhIGFzIHRoZW1lUGFyYW1zSGVhZGVyQmFja2dyb3VuZENvbG9yLFxuICBxYSBhcyB0aGVtZVBhcmFtc0hpbnRDb2xvcixcbiAgV2EgYXMgdGhlbWVQYXJhbXNMaW5rQ29sb3IsXG4gIEZlIGFzIHRoZW1lUGFyYW1zU2Vjb25kYXJ5QmFja2dyb3VuZENvbG9yLFxuICBHYSBhcyB0aGVtZVBhcmFtc1NlY3Rpb25CYWNrZ3JvdW5kQ29sb3IsXG4gIHphIGFzIHRoZW1lUGFyYW1zU2VjdGlvbkhlYWRlclRleHRDb2xvcixcbiAgUWEgYXMgdGhlbWVQYXJhbXNTZWN0aW9uU2VwYXJhdG9yQ29sb3IsXG4gIFUgYXMgdGhlbWVQYXJhbXNTdGF0ZSxcbiAgSmEgYXMgdGhlbWVQYXJhbXNTdWJ0aXRsZVRleHRDb2xvcixcbiAgWWEgYXMgdGhlbWVQYXJhbXNUZXh0Q29sb3IsXG4gIFpuIGFzIHRvUkdCLFxuICBZbiBhcyB0b1JlY29yZCxcbiAgWXIgYXMgdW5tb3VudEJhY2tCdXR0b24sXG4gIGxhIGFzIHVubW91bnRCaW9tZXRyeSxcbiAgaGEgYXMgdW5tb3VudENsb3NpbmdCZWhhdmlvcixcbiAgbGkgYXMgdW5tb3VudE1haW5CdXR0b24sXG4gIEFpIGFzIHVubW91bnRNaW5pQXBwLFxuICBRaSBhcyB1bm1vdW50U2Vjb25kYXJ5QnV0dG9uLFxuICB0YyBhcyB1bm1vdW50U2V0dGluZ3NCdXR0b24sXG4gIGljIGFzIHVubW91bnRTd2lwZUJlaGF2aW9yLFxuICBtaSBhcyB1bm1vdW50VGhlbWVQYXJhbXMsXG4gIHdjIGFzIHVubW91bnRWaWV3cG9ydCxcbiAgamMgYXMgdW5zdWJzY3JpYmUsXG4gIHBhIGFzIHVwZGF0ZUJpb21ldHJ5VG9rZW4sXG4gIG91IGFzIHZpZXdwb3J0LFxuICBncyBhcyB2aWV3cG9ydENvbnRlbnRTYWZlQXJlYUluc2V0Qm90dG9tLFxuICBFcyBhcyB2aWV3cG9ydENvbnRlbnRTYWZlQXJlYUluc2V0TGVmdCxcbiAgd3MgYXMgdmlld3BvcnRDb250ZW50U2FmZUFyZWFJbnNldFJpZ2h0LFxuICBTcyBhcyB2aWV3cG9ydENvbnRlbnRTYWZlQXJlYUluc2V0VG9wLFxuICBTbiBhcyB2aWV3cG9ydENvbnRlbnRTYWZlQXJlYUluc2V0cyxcbiAgeW4gYXMgdmlld3BvcnRIZWlnaHQsXG4gIHBzIGFzIHZpZXdwb3J0TW91bnRFcnJvcixcbiAgX3QgYXMgdmlld3BvcnRNb3VudFByb21pc2UsXG4gIGRzIGFzIHZpZXdwb3J0U2FmZUFyZWFJbnNldEJvdHRvbSxcbiAgbXMgYXMgdmlld3BvcnRTYWZlQXJlYUluc2V0TGVmdCxcbiAgaHMgYXMgdmlld3BvcnRTYWZlQXJlYUluc2V0UmlnaHQsXG4gIGJzIGFzIHZpZXdwb3J0U2FmZUFyZWFJbnNldFRvcCxcbiAgd24gYXMgdmlld3BvcnRTYWZlQXJlYUluc2V0cyxcbiAgQW4gYXMgdmlld3BvcnRTdGFibGVIZWlnaHQsXG4gIF9lIGFzIHZpZXdwb3J0U3RhdGUsXG4gIFRzIGFzIHZpZXdwb3J0V2lkdGhcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/sdk/dist/index.js\n");

/***/ })

};
;